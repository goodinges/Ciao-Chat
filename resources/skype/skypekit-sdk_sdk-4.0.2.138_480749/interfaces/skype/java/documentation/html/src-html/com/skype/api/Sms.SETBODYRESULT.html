<HTML>
<BODY BGCOLOR="white">
<PRE>
<FONT color="green">001</FONT>    package com.skype.api;<a name="line.1"></a>
<FONT color="green">002</FONT>    <a name="line.2"></a>
<FONT color="green">003</FONT>    import java.io.IOException;<a name="line.3"></a>
<FONT color="green">004</FONT>    import java.util.*;<a name="line.4"></a>
<FONT color="green">005</FONT>    import com.skype.ipc.*;<a name="line.5"></a>
<FONT color="green">006</FONT>    /**<a name="line.6"></a>
<FONT color="green">007</FONT>     * Wrapper class that includes SMS-specific properties and methods, such as P_BODY and GetTargetPrice. Instantiate SMS instances using Skype.CreateOutgoingSms; post SMS messages to a Conversation using Conversation.PostSMS.  &lt;br&gt;&lt;br&gt;Each SMS can have multiple targets (normalized phone numbers). Note that in a Conversation context, every SMS instance has a corresponding Message instance. Once you've posted an SMS, you can retrieve its corresponding Message instance using Sms.GetPropChatmsgId. That Message instance's P_BODY_XML property contains the SMS message data, such as price, target phone number(s), failure codes, and so forth, which you can parsed out and display in the UI. To put it another way, the object chain goes like this: &lt;br&gt;&lt;br&gt;@code &lt;br&gt;Conversation-&gt;Message-&gt;SMS  &lt;br&gt;&lt;/CODE&gt; &lt;br&gt;&lt;br&gt;Note that SkypeKit SDK supports outgoing SMS messages only. SkypeKit clients, even when logged in with accounts that have SkypeIn numbers, cannot receive SMS messages. &lt;br&gt;<a name="line.7"></a>
<FONT color="green">008</FONT>     */<a name="line.8"></a>
<FONT color="green">009</FONT>    <a name="line.9"></a>
<FONT color="green">010</FONT>    <a name="line.10"></a>
<FONT color="green">011</FONT>    public class Sms extends SkypeObject {<a name="line.11"></a>
<FONT color="green">012</FONT>    <a name="line.12"></a>
<FONT color="green">013</FONT>    <a name="line.13"></a>
<FONT color="green">014</FONT>            public interface SmsListener {<a name="line.14"></a>
<FONT color="green">015</FONT>                    /** This event gets called when there are changes to Sms properties defined in Sms.PROPERTY  */<a name="line.15"></a>
<FONT color="green">016</FONT>                    public void OnPropertyChange(SkypeObject obj, PROPERTY prop, Object value);<a name="line.16"></a>
<FONT color="green">017</FONT>                    <a name="line.17"></a>
<FONT color="green">018</FONT>            }<a name="line.18"></a>
<FONT color="green">019</FONT>            <a name="line.19"></a>
<FONT color="green">020</FONT>            public Sms(int oid, Skype skype) {<a name="line.20"></a>
<FONT color="green">021</FONT>                    super(oid,skype);<a name="line.21"></a>
<FONT color="green">022</FONT>            }<a name="line.22"></a>
<FONT color="green">023</FONT>            <a name="line.23"></a>
<FONT color="green">024</FONT>            private static final int MODULE_ID = 12;<a name="line.24"></a>
<FONT color="green">025</FONT>            <a name="line.25"></a>
<FONT color="green">026</FONT>            public static final int moduleID() {<a name="line.26"></a>
<FONT color="green">027</FONT>                    return MODULE_ID;<a name="line.27"></a>
<FONT color="green">028</FONT>            }<a name="line.28"></a>
<FONT color="green">029</FONT>            <a name="line.29"></a>
<FONT color="green">030</FONT>            /** Properties of the Sms class */<a name="line.30"></a>
<FONT color="green">031</FONT>            public enum PROPERTY {<a name="line.31"></a>
<FONT color="green">032</FONT>            <a name="line.32"></a>
<FONT color="green">033</FONT>                    /** type: TYPE */<a name="line.33"></a>
<FONT color="green">034</FONT>                    type(190),<a name="line.34"></a>
<FONT color="green">035</FONT>                    <a name="line.35"></a>
<FONT color="green">036</FONT>                    /** type: STATUS */<a name="line.36"></a>
<FONT color="green">037</FONT>                    status(191),<a name="line.37"></a>
<FONT color="green">038</FONT>                    <a name="line.38"></a>
<FONT color="green">039</FONT>                    /** Set asynchronously and meaningful only after invoking Conversation.PostSMS and detecting Sms.STATUS of SOME_TARGETS_FAILED or FAILED. &lt;br&gt;, type: FAILUREREASON */<a name="line.39"></a>
<FONT color="green">040</FONT>                    failurereason(192),<a name="line.40"></a>
<FONT color="green">041</FONT>                    <a name="line.41"></a>
<FONT color="green">042</FONT>                    /** set to 1 when status goes to FAILED. use MarkSeen() to clear, type: boolean */<a name="line.42"></a>
<FONT color="green">043</FONT>                    is_failed_unseen(48),<a name="line.43"></a>
<FONT color="green">044</FONT>                    <a name="line.44"></a>
<FONT color="green">045</FONT>                    /** unix timestamp of message submission, type: int */<a name="line.45"></a>
<FONT color="green">046</FONT>                    timestamp(198),<a name="line.46"></a>
<FONT color="green">047</FONT>                    <a name="line.47"></a>
<FONT color="green">048</FONT>                    /** The total price of sending this SMS message (sum of the individual prices to send to each recipient). Defaults to -1 on instantiation and incremented by the price for each recipient once that recipient's status reflects TARGET_ACCEPTABLE. Use Sms.GetTargetPrice to retrieve individual target prices. &lt;br&gt;&lt;br&gt;A value of MAX_UINT indicates that SkypeKit is actively querying and/or updating the value. Note that P_PRICE is an integer value. Calculate the actual price (in units specified by P_PRICE_CURRENCY) using P_PRICE_PRECISION as: &lt;br&gt;&lt;br&gt;@code &lt;br&gt;actualPrice = price / 10^pricePrecision;  &lt;br&gt;&lt;/CODE&gt; &lt;br&gt;, type: int */<a name="line.48"></a>
<FONT color="green">049</FONT>                    price(193),<a name="line.49"></a>
<FONT color="green">050</FONT>                    <a name="line.50"></a>
<FONT color="green">051</FONT>                    /** The decimal precision of the SMS price values, both individual and total. For example, a value of 2 indicates that you should divide the price (represented as an integer) by 100 (10^2) to obtain the actual price. &lt;br&gt;, type: int */<a name="line.51"></a>
<FONT color="green">052</FONT>                    price_precision(49),<a name="line.52"></a>
<FONT color="green">053</FONT>                    <a name="line.53"></a>
<FONT color="green">054</FONT>                    /** should be same as account currency at the time of composing/sending, type: String */<a name="line.54"></a>
<FONT color="green">055</FONT>                    price_currency(194),<a name="line.55"></a>
<FONT color="green">056</FONT>                    <a name="line.56"></a>
<FONT color="green">057</FONT>                    /** number that should receive the replies, type: String */<a name="line.57"></a>
<FONT color="green">058</FONT>                    reply_to_number(199),<a name="line.58"></a>
<FONT color="green">059</FONT>                    <a name="line.59"></a>
<FONT color="green">060</FONT>                    /** space-separated normalised pstn numbers, type: String */<a name="line.60"></a>
<FONT color="green">061</FONT>                    target_numbers(195),<a name="line.61"></a>
<FONT color="green">062</FONT>                    <a name="line.62"></a>
<FONT color="green">063</FONT>                    /** binary blob. track with OnPropertyChange(), access with GetTargetStatus(target), type: byte[] */<a name="line.63"></a>
<FONT color="green">064</FONT>                    target_statuses(196),<a name="line.64"></a>
<FONT color="green">065</FONT>                    <a name="line.65"></a>
<FONT color="green">066</FONT>                    /** actual payload, type: String */<a name="line.66"></a>
<FONT color="green">067</FONT>                    body(197),<a name="line.67"></a>
<FONT color="green">068</FONT>                    <a name="line.68"></a>
<FONT color="green">069</FONT>                    /** reference to Message, type: Message */<a name="line.69"></a>
<FONT color="green">070</FONT>                    chatmsg_id(840);<a name="line.70"></a>
<FONT color="green">071</FONT>                    <a name="line.71"></a>
<FONT color="green">072</FONT>                    private static final Map&lt;Integer,PROPERTY&gt; lookup = new HashMap&lt;Integer,PROPERTY&gt;();<a name="line.72"></a>
<FONT color="green">073</FONT>                    <a name="line.73"></a>
<FONT color="green">074</FONT>                    static {<a name="line.74"></a>
<FONT color="green">075</FONT>                            for(PROPERTY s : EnumSet.allOf(PROPERTY.class))<a name="line.75"></a>
<FONT color="green">076</FONT>                                    lookup.put(s.getId(), s);<a name="line.76"></a>
<FONT color="green">077</FONT>                    }<a name="line.77"></a>
<FONT color="green">078</FONT>                    <a name="line.78"></a>
<FONT color="green">079</FONT>                    private final int id;<a name="line.79"></a>
<FONT color="green">080</FONT>                    <a name="line.80"></a>
<FONT color="green">081</FONT>                    private PROPERTY(int value) {<a name="line.81"></a>
<FONT color="green">082</FONT>                            this.id = value;<a name="line.82"></a>
<FONT color="green">083</FONT>                    }<a name="line.83"></a>
<FONT color="green">084</FONT>                    <a name="line.84"></a>
<FONT color="green">085</FONT>                    public int getId() { return id; }<a name="line.85"></a>
<FONT color="green">086</FONT>                    <a name="line.86"></a>
<FONT color="green">087</FONT>                    public static PROPERTY get(int code) {<a name="line.87"></a>
<FONT color="green">088</FONT>                            return lookup.get(code);<a name="line.88"></a>
<FONT color="green">089</FONT>                    }<a name="line.89"></a>
<FONT color="green">090</FONT>                    <a name="line.90"></a>
<FONT color="green">091</FONT>                    public static PROPERTY fromString(String s) {<a name="line.91"></a>
<FONT color="green">092</FONT>                            for (PROPERTY p : lookup.values()) {<a name="line.92"></a>
<FONT color="green">093</FONT>                                    if (p.toString() == s) {<a name="line.93"></a>
<FONT color="green">094</FONT>                                            return p;<a name="line.94"></a>
<FONT color="green">095</FONT>                                    }<a name="line.95"></a>
<FONT color="green">096</FONT>                            }<a name="line.96"></a>
<FONT color="green">097</FONT>                            return null;<a name="line.97"></a>
<FONT color="green">098</FONT>                    }<a name="line.98"></a>
<FONT color="green">099</FONT>            }<a name="line.99"></a>
<FONT color="green">100</FONT>            <a name="line.100"></a>
<FONT color="green">101</FONT>            public Object GetPropertyAsEnum(int propid) {<a name="line.101"></a>
<FONT color="green">102</FONT>                    return PROPERTY.get(propid);<a name="line.102"></a>
<FONT color="green">103</FONT>            }<a name="line.103"></a>
<FONT color="green">104</FONT>            <a name="line.104"></a>
<FONT color="green">105</FONT>            public String GetStrProperty(PROPERTY prop) {<a name="line.105"></a>
<FONT color="green">106</FONT>                    //check in propcache if so then return<a name="line.106"></a>
<FONT color="green">107</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.107"></a>
<FONT color="green">108</FONT>                            String value =  (String)mPropCache.get(prop.id);<a name="line.108"></a>
<FONT color="green">109</FONT>                            if (value != null &amp;&amp; !(value.length() == 0) ){<a name="line.109"></a>
<FONT color="green">110</FONT>                                    return value;<a name="line.110"></a>
<FONT color="green">111</FONT>                            }<a name="line.111"></a>
<FONT color="green">112</FONT>                    }<a name="line.112"></a>
<FONT color="green">113</FONT>                    //else get from skypekit...<a name="line.113"></a>
<FONT color="green">114</FONT>                    GetPropertyRequest request = new GetPropertyRequest(12, mObjectId, prop.id);<a name="line.114"></a>
<FONT color="green">115</FONT>                    <a name="line.115"></a>
<FONT color="green">116</FONT>                    String string = null;<a name="line.116"></a>
<FONT color="green">117</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.117"></a>
<FONT color="green">118</FONT>                    if (r != null){<a name="line.118"></a>
<FONT color="green">119</FONT>                            string = r.GetAsString();<a name="line.119"></a>
<FONT color="green">120</FONT>                    }<a name="line.120"></a>
<FONT color="green">121</FONT>                    <a name="line.121"></a>
<FONT color="green">122</FONT>                    if (string != null)<a name="line.122"></a>
<FONT color="green">123</FONT>                    {<a name="line.123"></a>
<FONT color="green">124</FONT>                            mPropCache.put(new Integer(prop.id), string);<a name="line.124"></a>
<FONT color="green">125</FONT>                    }<a name="line.125"></a>
<FONT color="green">126</FONT>                    return string;<a name="line.126"></a>
<FONT color="green">127</FONT>            }<a name="line.127"></a>
<FONT color="green">128</FONT>            <a name="line.128"></a>
<FONT color="green">129</FONT>            public int GetIntProperty(PROPERTY prop) {<a name="line.129"></a>
<FONT color="green">130</FONT>                    //check in propcache if so then return<a name="line.130"></a>
<FONT color="green">131</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.131"></a>
<FONT color="green">132</FONT>                            int value = ((Integer)mPropCache.get(prop.id)).intValue();<a name="line.132"></a>
<FONT color="green">133</FONT>                            if (value != 0){<a name="line.133"></a>
<FONT color="green">134</FONT>                                    return value;<a name="line.134"></a>
<FONT color="green">135</FONT>                            }<a name="line.135"></a>
<FONT color="green">136</FONT>                    }<a name="line.136"></a>
<FONT color="green">137</FONT>                    //else get from skypekit...<a name="line.137"></a>
<FONT color="green">138</FONT>                    GetPropertyRequest request = new GetPropertyRequest(moduleID(), mObjectId, prop.id);<a name="line.138"></a>
<FONT color="green">139</FONT>                    <a name="line.139"></a>
<FONT color="green">140</FONT>                    Integer integer = null;<a name="line.140"></a>
<FONT color="green">141</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.141"></a>
<FONT color="green">142</FONT>                    if (r != null){<a name="line.142"></a>
<FONT color="green">143</FONT>                            integer  = r.GetAsInt();<a name="line.143"></a>
<FONT color="green">144</FONT>                    }<a name="line.144"></a>
<FONT color="green">145</FONT>                    <a name="line.145"></a>
<FONT color="green">146</FONT>                    if (integer != null)<a name="line.146"></a>
<FONT color="green">147</FONT>                    {<a name="line.147"></a>
<FONT color="green">148</FONT>                            mPropCache.put(new Integer(prop.id), integer);<a name="line.148"></a>
<FONT color="green">149</FONT>                            return integer.intValue();<a name="line.149"></a>
<FONT color="green">150</FONT>                    }<a name="line.150"></a>
<FONT color="green">151</FONT>                    else<a name="line.151"></a>
<FONT color="green">152</FONT>                    {<a name="line.152"></a>
<FONT color="green">153</FONT>                            return 0;<a name="line.153"></a>
<FONT color="green">154</FONT>                    }<a name="line.154"></a>
<FONT color="green">155</FONT>            }<a name="line.155"></a>
<FONT color="green">156</FONT>            <a name="line.156"></a>
<FONT color="green">157</FONT>            public boolean GetBooleanProperty(PROPERTY prop) {<a name="line.157"></a>
<FONT color="green">158</FONT>                    //check in propcache if so then return<a name="line.158"></a>
<FONT color="green">159</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.159"></a>
<FONT color="green">160</FONT>                            return ((Boolean)mPropCache.get(prop.id)).booleanValue();<a name="line.160"></a>
<FONT color="green">161</FONT>                    }<a name="line.161"></a>
<FONT color="green">162</FONT>                    //else get from skypekit...<a name="line.162"></a>
<FONT color="green">163</FONT>                    GetPropertyRequest request = new GetPropertyRequest(moduleID(), mObjectId, prop.id);<a name="line.163"></a>
<FONT color="green">164</FONT>                    <a name="line.164"></a>
<FONT color="green">165</FONT>                    Boolean boolResp = null;<a name="line.165"></a>
<FONT color="green">166</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.166"></a>
<FONT color="green">167</FONT>                    if (r != null){<a name="line.167"></a>
<FONT color="green">168</FONT>                            boolResp  = r.GetAsBoolean();<a name="line.168"></a>
<FONT color="green">169</FONT>                    }<a name="line.169"></a>
<FONT color="green">170</FONT>                    <a name="line.170"></a>
<FONT color="green">171</FONT>                    if (boolResp != null)<a name="line.171"></a>
<FONT color="green">172</FONT>                    {<a name="line.172"></a>
<FONT color="green">173</FONT>                            mPropCache.put(new Integer(prop.id), boolResp);<a name="line.173"></a>
<FONT color="green">174</FONT>                            return boolResp.booleanValue();<a name="line.174"></a>
<FONT color="green">175</FONT>                    }<a name="line.175"></a>
<FONT color="green">176</FONT>                    else<a name="line.176"></a>
<FONT color="green">177</FONT>                    {<a name="line.177"></a>
<FONT color="green">178</FONT>                            return false;<a name="line.178"></a>
<FONT color="green">179</FONT>                    }<a name="line.179"></a>
<FONT color="green">180</FONT>            }<a name="line.180"></a>
<FONT color="green">181</FONT>            <a name="line.181"></a>
<FONT color="green">182</FONT>            public byte [] GetBinProperty(PROPERTY prop) {<a name="line.182"></a>
<FONT color="green">183</FONT>                    //get from skypekit...<a name="line.183"></a>
<FONT color="green">184</FONT>                    GetPropertyRequest request = new GetPropertyRequest(12, mObjectId, prop.id);<a name="line.184"></a>
<FONT color="green">185</FONT>                    <a name="line.185"></a>
<FONT color="green">186</FONT>                    byte [] data = null;<a name="line.186"></a>
<FONT color="green">187</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.187"></a>
<FONT color="green">188</FONT>                    if (r != null) {<a name="line.188"></a>
<FONT color="green">189</FONT>                            data = r.GetAsBinary();<a name="line.189"></a>
<FONT color="green">190</FONT>                    }<a name="line.190"></a>
<FONT color="green">191</FONT>                    return data;<a name="line.191"></a>
<FONT color="green">192</FONT>            }<a name="line.192"></a>
<FONT color="green">193</FONT>            <a name="line.193"></a>
<FONT color="green">194</FONT>            /**<a name="line.194"></a>
<FONT color="green">195</FONT>             */<a name="line.195"></a>
<FONT color="green">196</FONT>            public enum TYPE {<a name="line.196"></a>
<FONT color="green">197</FONT>            <a name="line.197"></a>
<FONT color="green">198</FONT>                    /** a normal outgoing SMS message*/<a name="line.198"></a>
<FONT color="green">199</FONT>                    OUTGOING(2),<a name="line.199"></a>
<FONT color="green">200</FONT>                    <a name="line.200"></a>
<FONT color="green">201</FONT>                    /** a message requesting a SMS confirmation code be sent to the number provided*/<a name="line.201"></a>
<FONT color="green">202</FONT>                    CONFIRMATION_CODE_REQUEST(3),<a name="line.202"></a>
<FONT color="green">203</FONT>                    <a name="line.203"></a>
<FONT color="green">204</FONT>                    /** a message returning the SMS confirmation code received as a result of a CONFIRMATION_CODE_REQUEST to authorize it*/<a name="line.204"></a>
<FONT color="green">205</FONT>                    CONFIRMATION_CODE_SUBMIT(4);<a name="line.205"></a>
<FONT color="green">206</FONT>                    <a name="line.206"></a>
<FONT color="green">207</FONT>                    private static final Map&lt;Integer,TYPE&gt; lookup = new HashMap&lt;Integer,TYPE&gt;();<a name="line.207"></a>
<FONT color="green">208</FONT>                    <a name="line.208"></a>
<FONT color="green">209</FONT>                    static {<a name="line.209"></a>
<FONT color="green">210</FONT>                            for(TYPE s : EnumSet.allOf(TYPE.class))<a name="line.210"></a>
<FONT color="green">211</FONT>                                    lookup.put(s.getId(), s);<a name="line.211"></a>
<FONT color="green">212</FONT>                    }<a name="line.212"></a>
<FONT color="green">213</FONT>                    <a name="line.213"></a>
<FONT color="green">214</FONT>                    private final int id;<a name="line.214"></a>
<FONT color="green">215</FONT>                    <a name="line.215"></a>
<FONT color="green">216</FONT>                    private TYPE(int value) {<a name="line.216"></a>
<FONT color="green">217</FONT>                            this.id = value;<a name="line.217"></a>
<FONT color="green">218</FONT>                    }<a name="line.218"></a>
<FONT color="green">219</FONT>                    <a name="line.219"></a>
<FONT color="green">220</FONT>                    public int getId() { return id; }<a name="line.220"></a>
<FONT color="green">221</FONT>                    <a name="line.221"></a>
<FONT color="green">222</FONT>                    public static TYPE get(int code) {<a name="line.222"></a>
<FONT color="green">223</FONT>                            return lookup.get(code);<a name="line.223"></a>
<FONT color="green">224</FONT>                    }<a name="line.224"></a>
<FONT color="green">225</FONT>                    <a name="line.225"></a>
<FONT color="green">226</FONT>                    public static TYPE fromString(String s) {<a name="line.226"></a>
<FONT color="green">227</FONT>                            for (TYPE p : lookup.values()) {<a name="line.227"></a>
<FONT color="green">228</FONT>                                    if (p.toString() == s) {<a name="line.228"></a>
<FONT color="green">229</FONT>                                            return p;<a name="line.229"></a>
<FONT color="green">230</FONT>                                    }<a name="line.230"></a>
<FONT color="green">231</FONT>                            }<a name="line.231"></a>
<FONT color="green">232</FONT>                            return null;<a name="line.232"></a>
<FONT color="green">233</FONT>                    }<a name="line.233"></a>
<FONT color="green">234</FONT>            }<a name="line.234"></a>
<FONT color="green">235</FONT>            <a name="line.235"></a>
<FONT color="green">236</FONT>            /**<a name="line.236"></a>
<FONT color="green">237</FONT>             */<a name="line.237"></a>
<FONT color="green">238</FONT>            public enum STATUS {<a name="line.238"></a>
<FONT color="green">239</FONT>            <a name="line.239"></a>
<FONT color="green">240</FONT>                    /** */<a name="line.240"></a>
<FONT color="green">241</FONT>                    COMPOSING(3),<a name="line.241"></a>
<FONT color="green">242</FONT>                    <a name="line.242"></a>
<FONT color="green">243</FONT>                    /** */<a name="line.243"></a>
<FONT color="green">244</FONT>                    SENDING_TO_SERVER(4),<a name="line.244"></a>
<FONT color="green">245</FONT>                    <a name="line.245"></a>
<FONT color="green">246</FONT>                    /** */<a name="line.246"></a>
<FONT color="green">247</FONT>                    SENT_TO_SERVER(5),<a name="line.247"></a>
<FONT color="green">248</FONT>                    <a name="line.248"></a>
<FONT color="green">249</FONT>                    /** */<a name="line.249"></a>
<FONT color="green">250</FONT>                    DELIVERED(6),<a name="line.250"></a>
<FONT color="green">251</FONT>                    <a name="line.251"></a>
<FONT color="green">252</FONT>                    /** */<a name="line.252"></a>
<FONT color="green">253</FONT>                    SOME_TARGETS_FAILED(7),<a name="line.253"></a>
<FONT color="green">254</FONT>                    <a name="line.254"></a>
<FONT color="green">255</FONT>                    /** */<a name="line.255"></a>
<FONT color="green">256</FONT>                    FAILED(8);<a name="line.256"></a>
<FONT color="green">257</FONT>                    <a name="line.257"></a>
<FONT color="green">258</FONT>                    private static final Map&lt;Integer,STATUS&gt; lookup = new HashMap&lt;Integer,STATUS&gt;();<a name="line.258"></a>
<FONT color="green">259</FONT>                    <a name="line.259"></a>
<FONT color="green">260</FONT>                    static {<a name="line.260"></a>
<FONT color="green">261</FONT>                            for(STATUS s : EnumSet.allOf(STATUS.class))<a name="line.261"></a>
<FONT color="green">262</FONT>                                    lookup.put(s.getId(), s);<a name="line.262"></a>
<FONT color="green">263</FONT>                    }<a name="line.263"></a>
<FONT color="green">264</FONT>                    <a name="line.264"></a>
<FONT color="green">265</FONT>                    private final int id;<a name="line.265"></a>
<FONT color="green">266</FONT>                    <a name="line.266"></a>
<FONT color="green">267</FONT>                    private STATUS(int value) {<a name="line.267"></a>
<FONT color="green">268</FONT>                            this.id = value;<a name="line.268"></a>
<FONT color="green">269</FONT>                    }<a name="line.269"></a>
<FONT color="green">270</FONT>                    <a name="line.270"></a>
<FONT color="green">271</FONT>                    public int getId() { return id; }<a name="line.271"></a>
<FONT color="green">272</FONT>                    <a name="line.272"></a>
<FONT color="green">273</FONT>                    public static STATUS get(int code) {<a name="line.273"></a>
<FONT color="green">274</FONT>                            return lookup.get(code);<a name="line.274"></a>
<FONT color="green">275</FONT>                    }<a name="line.275"></a>
<FONT color="green">276</FONT>                    <a name="line.276"></a>
<FONT color="green">277</FONT>                    public static STATUS fromString(String s) {<a name="line.277"></a>
<FONT color="green">278</FONT>                            for (STATUS p : lookup.values()) {<a name="line.278"></a>
<FONT color="green">279</FONT>                                    if (p.toString() == s) {<a name="line.279"></a>
<FONT color="green">280</FONT>                                            return p;<a name="line.280"></a>
<FONT color="green">281</FONT>                                    }<a name="line.281"></a>
<FONT color="green">282</FONT>                            }<a name="line.282"></a>
<FONT color="green">283</FONT>                            return null;<a name="line.283"></a>
<FONT color="green">284</FONT>                    }<a name="line.284"></a>
<FONT color="green">285</FONT>            }<a name="line.285"></a>
<FONT color="green">286</FONT>            <a name="line.286"></a>
<FONT color="green">287</FONT>            /**<a name="line.287"></a>
<FONT color="green">288</FONT>             */<a name="line.288"></a>
<FONT color="green">289</FONT>            public enum FAILUREREASON {<a name="line.289"></a>
<FONT color="green">290</FONT>            <a name="line.290"></a>
<FONT color="green">291</FONT>                    /** */<a name="line.291"></a>
<FONT color="green">292</FONT>                    MISC_ERROR(1),<a name="line.292"></a>
<FONT color="green">293</FONT>                    <a name="line.293"></a>
<FONT color="green">294</FONT>                    /** */<a name="line.294"></a>
<FONT color="green">295</FONT>                    SERVER_CONNECT_FAILED(2),<a name="line.295"></a>
<FONT color="green">296</FONT>                    <a name="line.296"></a>
<FONT color="green">297</FONT>                    /** */<a name="line.297"></a>
<FONT color="green">298</FONT>                    NO_SMS_CAPABILITY(3),<a name="line.298"></a>
<FONT color="green">299</FONT>                    <a name="line.299"></a>
<FONT color="green">300</FONT>                    /** */<a name="line.300"></a>
<FONT color="green">301</FONT>                    INSUFFICIENT_FUNDS(4),<a name="line.301"></a>
<FONT color="green">302</FONT>                    <a name="line.302"></a>
<FONT color="green">303</FONT>                    /** */<a name="line.303"></a>
<FONT color="green">304</FONT>                    INVALID_CONFIRMATION_CODE(5),<a name="line.304"></a>
<FONT color="green">305</FONT>                    <a name="line.305"></a>
<FONT color="green">306</FONT>                    /** */<a name="line.306"></a>
<FONT color="green">307</FONT>                    USER_BLOCKED(6),<a name="line.307"></a>
<FONT color="green">308</FONT>                    <a name="line.308"></a>
<FONT color="green">309</FONT>                    /** */<a name="line.309"></a>
<FONT color="green">310</FONT>                    IP_BLOCKED(7),<a name="line.310"></a>
<FONT color="green">311</FONT>                    <a name="line.311"></a>
<FONT color="green">312</FONT>                    /** */<a name="line.312"></a>
<FONT color="green">313</FONT>                    NODE_BLOCKED(8),<a name="line.313"></a>
<FONT color="green">314</FONT>                    <a name="line.314"></a>
<FONT color="green">315</FONT>                    /** */<a name="line.315"></a>
<FONT color="green">316</FONT>                    NO_SENDERID_CAPABILITY(9);<a name="line.316"></a>
<FONT color="green">317</FONT>                    <a name="line.317"></a>
<FONT color="green">318</FONT>                    private static final Map&lt;Integer,FAILUREREASON&gt; lookup = new HashMap&lt;Integer,FAILUREREASON&gt;();<a name="line.318"></a>
<FONT color="green">319</FONT>                    <a name="line.319"></a>
<FONT color="green">320</FONT>                    static {<a name="line.320"></a>
<FONT color="green">321</FONT>                            for(FAILUREREASON s : EnumSet.allOf(FAILUREREASON.class))<a name="line.321"></a>
<FONT color="green">322</FONT>                                    lookup.put(s.getId(), s);<a name="line.322"></a>
<FONT color="green">323</FONT>                    }<a name="line.323"></a>
<FONT color="green">324</FONT>                    <a name="line.324"></a>
<FONT color="green">325</FONT>                    private final int id;<a name="line.325"></a>
<FONT color="green">326</FONT>                    <a name="line.326"></a>
<FONT color="green">327</FONT>                    private FAILUREREASON(int value) {<a name="line.327"></a>
<FONT color="green">328</FONT>                            this.id = value;<a name="line.328"></a>
<FONT color="green">329</FONT>                    }<a name="line.329"></a>
<FONT color="green">330</FONT>                    <a name="line.330"></a>
<FONT color="green">331</FONT>                    public int getId() { return id; }<a name="line.331"></a>
<FONT color="green">332</FONT>                    <a name="line.332"></a>
<FONT color="green">333</FONT>                    public static FAILUREREASON get(int code) {<a name="line.333"></a>
<FONT color="green">334</FONT>                            return lookup.get(code);<a name="line.334"></a>
<FONT color="green">335</FONT>                    }<a name="line.335"></a>
<FONT color="green">336</FONT>                    <a name="line.336"></a>
<FONT color="green">337</FONT>                    public static FAILUREREASON fromString(String s) {<a name="line.337"></a>
<FONT color="green">338</FONT>                            for (FAILUREREASON p : lookup.values()) {<a name="line.338"></a>
<FONT color="green">339</FONT>                                    if (p.toString() == s) {<a name="line.339"></a>
<FONT color="green">340</FONT>                                            return p;<a name="line.340"></a>
<FONT color="green">341</FONT>                                    }<a name="line.341"></a>
<FONT color="green">342</FONT>                            }<a name="line.342"></a>
<FONT color="green">343</FONT>                            return null;<a name="line.343"></a>
<FONT color="green">344</FONT>                    }<a name="line.344"></a>
<FONT color="green">345</FONT>            }<a name="line.345"></a>
<FONT color="green">346</FONT>            <a name="line.346"></a>
<FONT color="green">347</FONT>            /**<a name="line.347"></a>
<FONT color="green">348</FONT>             */<a name="line.348"></a>
<FONT color="green">349</FONT>            public enum TARGETSTATUS {<a name="line.349"></a>
<FONT color="green">350</FONT>            <a name="line.350"></a>
<FONT color="green">351</FONT>                    /** */<a name="line.351"></a>
<FONT color="green">352</FONT>                    TARGET_ANALYZING(1),<a name="line.352"></a>
<FONT color="green">353</FONT>                    <a name="line.353"></a>
<FONT color="green">354</FONT>                    /** */<a name="line.354"></a>
<FONT color="green">355</FONT>                    TARGET_UNDEFINED(2),<a name="line.355"></a>
<FONT color="green">356</FONT>                    <a name="line.356"></a>
<FONT color="green">357</FONT>                    /** */<a name="line.357"></a>
<FONT color="green">358</FONT>                    TARGET_ACCEPTABLE(3),<a name="line.358"></a>
<FONT color="green">359</FONT>                    <a name="line.359"></a>
<FONT color="green">360</FONT>                    /** */<a name="line.360"></a>
<FONT color="green">361</FONT>                    TARGET_NOT_ROUTABLE(4),<a name="line.361"></a>
<FONT color="green">362</FONT>                    <a name="line.362"></a>
<FONT color="green">363</FONT>                    /** */<a name="line.363"></a>
<FONT color="green">364</FONT>                    TARGET_DELIVERY_PENDING(5),<a name="line.364"></a>
<FONT color="green">365</FONT>                    <a name="line.365"></a>
<FONT color="green">366</FONT>                    /** */<a name="line.366"></a>
<FONT color="green">367</FONT>                    TARGET_DELIVERY_SUCCESSFUL(6),<a name="line.367"></a>
<FONT color="green">368</FONT>                    <a name="line.368"></a>
<FONT color="green">369</FONT>                    /** */<a name="line.369"></a>
<FONT color="green">370</FONT>                    TARGET_DELIVERY_FAILED(7);<a name="line.370"></a>
<FONT color="green">371</FONT>                    <a name="line.371"></a>
<FONT color="green">372</FONT>                    private static final Map&lt;Integer,TARGETSTATUS&gt; lookup = new HashMap&lt;Integer,TARGETSTATUS&gt;();<a name="line.372"></a>
<FONT color="green">373</FONT>                    <a name="line.373"></a>
<FONT color="green">374</FONT>                    static {<a name="line.374"></a>
<FONT color="green">375</FONT>                            for(TARGETSTATUS s : EnumSet.allOf(TARGETSTATUS.class))<a name="line.375"></a>
<FONT color="green">376</FONT>                                    lookup.put(s.getId(), s);<a name="line.376"></a>
<FONT color="green">377</FONT>                    }<a name="line.377"></a>
<FONT color="green">378</FONT>                    <a name="line.378"></a>
<FONT color="green">379</FONT>                    private final int id;<a name="line.379"></a>
<FONT color="green">380</FONT>                    <a name="line.380"></a>
<FONT color="green">381</FONT>                    private TARGETSTATUS(int value) {<a name="line.381"></a>
<FONT color="green">382</FONT>                            this.id = value;<a name="line.382"></a>
<FONT color="green">383</FONT>                    }<a name="line.383"></a>
<FONT color="green">384</FONT>                    <a name="line.384"></a>
<FONT color="green">385</FONT>                    public int getId() { return id; }<a name="line.385"></a>
<FONT color="green">386</FONT>                    <a name="line.386"></a>
<FONT color="green">387</FONT>                    public static TARGETSTATUS get(int code) {<a name="line.387"></a>
<FONT color="green">388</FONT>                            return lookup.get(code);<a name="line.388"></a>
<FONT color="green">389</FONT>                    }<a name="line.389"></a>
<FONT color="green">390</FONT>                    <a name="line.390"></a>
<FONT color="green">391</FONT>                    public static TARGETSTATUS fromString(String s) {<a name="line.391"></a>
<FONT color="green">392</FONT>                            for (TARGETSTATUS p : lookup.values()) {<a name="line.392"></a>
<FONT color="green">393</FONT>                                    if (p.toString() == s) {<a name="line.393"></a>
<FONT color="green">394</FONT>                                            return p;<a name="line.394"></a>
<FONT color="green">395</FONT>                                    }<a name="line.395"></a>
<FONT color="green">396</FONT>                            }<a name="line.396"></a>
<FONT color="green">397</FONT>                            return null;<a name="line.397"></a>
<FONT color="green">398</FONT>                    }<a name="line.398"></a>
<FONT color="green">399</FONT>            }<a name="line.399"></a>
<FONT color="green">400</FONT>            <a name="line.400"></a>
<FONT color="green">401</FONT>            /**<a name="line.401"></a>
<FONT color="green">402</FONT>             *Retrieves the send status of this SMS to a particular recipient (P_TARGET_STATUSES) either prior to or after invoking Conversation.PostSMS. &lt;br&gt;<a name="line.402"></a>
<FONT color="green">403</FONT>             * @param target The normalized phone number of the target recipient. &lt;br&gt;<a name="line.403"></a>
<FONT color="green">404</FONT>             * @return status The send status of the target recipient, for example, TARGET_ANALYZING, TARGET_DELIVERY_PENDING, TARGET_DELIVERY_SUCCESSFUL, TARGET_DELIVERY_FAILED, and so forth. TARGET_UNDEFINED implies that the specified target is not a recipient of this SMS. &lt;br&gt;<a name="line.404"></a>
<FONT color="green">405</FONT>             */<a name="line.405"></a>
<FONT color="green">406</FONT>            public TARGETSTATUS GetTargetStatus( String target) {<a name="line.406"></a>
<FONT color="green">407</FONT>            <a name="line.407"></a>
<FONT color="green">408</FONT>                    Request request = null;<a name="line.408"></a>
<FONT color="green">409</FONT>                    try {<a name="line.409"></a>
<FONT color="green">410</FONT>                            request = new XCallRequest(12,4);<a name="line.410"></a>
<FONT color="green">411</FONT>                    } catch (IOException e) {<a name="line.411"></a>
<FONT color="green">412</FONT>                            e.printStackTrace();<a name="line.412"></a>
<FONT color="green">413</FONT>                            if (skype.errorListener != null)<a name="line.413"></a>
<FONT color="green">414</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.414"></a>
<FONT color="green">415</FONT>                    }<a name="line.415"></a>
<FONT color="green">416</FONT>                    request.addParm('O',0,mObjectId);<a name="line.416"></a>
<FONT color="green">417</FONT>                    request.addParm('S',1,target);<a name="line.417"></a>
<FONT color="green">418</FONT>                    <a name="line.418"></a>
<FONT color="green">419</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.419"></a>
<FONT color="green">420</FONT>                    <a name="line.420"></a>
<FONT color="green">421</FONT>                    if (r.isErrCall())<a name="line.421"></a>
<FONT color="green">422</FONT>                            return null;<a name="line.422"></a>
<FONT color="green">423</FONT>                            <a name="line.423"></a>
<FONT color="green">424</FONT>                    TARGETSTATUS targetstatus = null;<a name="line.424"></a>
<FONT color="green">425</FONT>                    targetstatus = TARGETSTATUS.get(r.GetAsInt(1));<a name="line.425"></a>
<FONT color="green">426</FONT>                    return targetstatus;<a name="line.426"></a>
<FONT color="green">427</FONT>            }<a name="line.427"></a>
<FONT color="green">428</FONT>            <a name="line.428"></a>
<FONT color="green">429</FONT>            /**<a name="line.429"></a>
<FONT color="green">430</FONT>             *Retrieves the amount of Skype credit necessary to send the SMS to a particular recipient. Defaults to -1 on instantiation and set only when that recipient's status reflects TARGET_ACCEPTABLE. Use Sms.GetPropPrice to retrieve the total cost of this SMS. &lt;br&gt;&lt;br&gt;Note that the target price is an integer value. Calculate the actual price (in units specified by P_PRICE_CURRENCY) using P_PRICE_PRECISION as: &lt;br&gt;@code &lt;br&gt;actualTargetPrice = targetPrice / 10^pricePrecision;  &lt;br&gt;&lt;/CODE&gt; &lt;br&gt;<a name="line.430"></a>
<FONT color="green">431</FONT>             * @param target The normalized phone number of the target recipient. &lt;br&gt;<a name="line.431"></a>
<FONT color="green">432</FONT>             * @return price The price of sending this SMS message to the target recipient. &lt;br&gt;<a name="line.432"></a>
<FONT color="green">433</FONT>             */<a name="line.433"></a>
<FONT color="green">434</FONT>            public int GetTargetPrice( String target) {<a name="line.434"></a>
<FONT color="green">435</FONT>            <a name="line.435"></a>
<FONT color="green">436</FONT>                    Request request = null;<a name="line.436"></a>
<FONT color="green">437</FONT>                    try {<a name="line.437"></a>
<FONT color="green">438</FONT>                            request = new XCallRequest(12,13);<a name="line.438"></a>
<FONT color="green">439</FONT>                    } catch (IOException e) {<a name="line.439"></a>
<FONT color="green">440</FONT>                            e.printStackTrace();<a name="line.440"></a>
<FONT color="green">441</FONT>                            if (skype.errorListener != null)<a name="line.441"></a>
<FONT color="green">442</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.442"></a>
<FONT color="green">443</FONT>                    }<a name="line.443"></a>
<FONT color="green">444</FONT>                    request.addParm('O',0,mObjectId);<a name="line.444"></a>
<FONT color="green">445</FONT>                    request.addParm('S',1,target);<a name="line.445"></a>
<FONT color="green">446</FONT>                    <a name="line.446"></a>
<FONT color="green">447</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.447"></a>
<FONT color="green">448</FONT>                    <a name="line.448"></a>
<FONT color="green">449</FONT>                    if (r.isErrCall())<a name="line.449"></a>
<FONT color="green">450</FONT>                            return 0;<a name="line.450"></a>
<FONT color="green">451</FONT>                            <a name="line.451"></a>
<FONT color="green">452</FONT>                    int price = 0;<a name="line.452"></a>
<FONT color="green">453</FONT>                    price = r.GetAsInt(1);<a name="line.453"></a>
<FONT color="green">454</FONT>                    return price;<a name="line.454"></a>
<FONT color="green">455</FONT>            }<a name="line.455"></a>
<FONT color="green">456</FONT>            <a name="line.456"></a>
<FONT color="green">457</FONT>            /**<a name="line.457"></a>
<FONT color="green">458</FONT>             */<a name="line.458"></a>
<FONT color="green">459</FONT>            public enum SETBODYRESULT {<a name="line.459"></a>
<FONT color="green">460</FONT>            <a name="line.460"></a>
<FONT color="green">461</FONT>                    /** body not set. message status wrong or invalid, or body not valid utf8 string*/<a name="line.461"></a>
<FONT color="green">462</FONT>                    BODY_INVALID(0),<a name="line.462"></a>
<FONT color="green">463</FONT>                    <a name="line.463"></a>
<FONT color="green">464</FONT>                    /** body too long. set, but truncated. charsUntilNextChunk contains maxChunks value*/<a name="line.464"></a>
<FONT color="green">465</FONT>                    BODY_TRUNCATED(1),<a name="line.465"></a>
<FONT color="green">466</FONT>                    <a name="line.466"></a>
<FONT color="green">467</FONT>                    /** body was set OK*/<a name="line.467"></a>
<FONT color="green">468</FONT>                    BODY_OK(2),<a name="line.468"></a>
<FONT color="green">469</FONT>                    <a name="line.469"></a>
<FONT color="green">470</FONT>                    /** last unicode char was ignored, as some of the text would be deleted due to conversion*/<a name="line.470"></a>
<FONT color="green">471</FONT>                    BODY_LASTCHAR_IGNORED(3);<a name="line.471"></a>
<FONT color="green">472</FONT>                    <a name="line.472"></a>
<FONT color="green">473</FONT>                    private static final Map&lt;Integer,SETBODYRESULT&gt; lookup = new HashMap&lt;Integer,SETBODYRESULT&gt;();<a name="line.473"></a>
<FONT color="green">474</FONT>                    <a name="line.474"></a>
<FONT color="green">475</FONT>                    static {<a name="line.475"></a>
<FONT color="green">476</FONT>                            for(SETBODYRESULT s : EnumSet.allOf(SETBODYRESULT.class))<a name="line.476"></a>
<FONT color="green">477</FONT>                                    lookup.put(s.getId(), s);<a name="line.477"></a>
<FONT color="green">478</FONT>                    }<a name="line.478"></a>
<FONT color="green">479</FONT>                    <a name="line.479"></a>
<FONT color="green">480</FONT>                    private final int id;<a name="line.480"></a>
<FONT color="green">481</FONT>                    <a name="line.481"></a>
<FONT color="green">482</FONT>                    private SETBODYRESULT(int value) {<a name="line.482"></a>
<FONT color="green">483</FONT>                            this.id = value;<a name="line.483"></a>
<FONT color="green">484</FONT>                    }<a name="line.484"></a>
<FONT color="green">485</FONT>                    <a name="line.485"></a>
<FONT color="green">486</FONT>                    public int getId() { return id; }<a name="line.486"></a>
<FONT color="green">487</FONT>                    <a name="line.487"></a>
<FONT color="green">488</FONT>                    public static SETBODYRESULT get(int code) {<a name="line.488"></a>
<FONT color="green">489</FONT>                            return lookup.get(code);<a name="line.489"></a>
<FONT color="green">490</FONT>                    }<a name="line.490"></a>
<FONT color="green">491</FONT>                    <a name="line.491"></a>
<FONT color="green">492</FONT>                    public static SETBODYRESULT fromString(String s) {<a name="line.492"></a>
<FONT color="green">493</FONT>                            for (SETBODYRESULT p : lookup.values()) {<a name="line.493"></a>
<FONT color="green">494</FONT>                                    if (p.toString() == s) {<a name="line.494"></a>
<FONT color="green">495</FONT>                                            return p;<a name="line.495"></a>
<FONT color="green">496</FONT>                                    }<a name="line.496"></a>
<FONT color="green">497</FONT>                            }<a name="line.497"></a>
<FONT color="green">498</FONT>                            return null;<a name="line.498"></a>
<FONT color="green">499</FONT>                    }<a name="line.499"></a>
<FONT color="green">500</FONT>            }<a name="line.500"></a>
<FONT color="green">501</FONT>            <a name="line.501"></a>
<FONT color="green">502</FONT>            /**<a name="line.502"></a>
<FONT color="green">503</FONT>             *Sets the recipient(s) of this SMS. Note that each invocation replaces the target list and re-calculates all prices - they are not additive! &lt;br&gt;<a name="line.503"></a>
<FONT color="green">504</FONT>             * @param numbers Normalized phone number(s) of the intended recipient(s). &lt;br&gt;<a name="line.504"></a>
<FONT color="green">505</FONT>             * @return success Set to true if the target list appears to contain valid, normalized telephone numbers. Note that this check is not very reliable. Actual target validity checking occurs asynchronously in the background, and manifests itself as a series of Sms.P_TARGET_STATUSES property change events. &lt;br&gt;<a name="line.505"></a>
<FONT color="green">506</FONT>             */<a name="line.506"></a>
<FONT color="green">507</FONT>            public boolean SetTargets( String [] numbers) {<a name="line.507"></a>
<FONT color="green">508</FONT>            <a name="line.508"></a>
<FONT color="green">509</FONT>                    Request request = null;<a name="line.509"></a>
<FONT color="green">510</FONT>                    try {<a name="line.510"></a>
<FONT color="green">511</FONT>                            request = new XCallRequest(12,6);<a name="line.511"></a>
<FONT color="green">512</FONT>                    } catch (IOException e) {<a name="line.512"></a>
<FONT color="green">513</FONT>                            e.printStackTrace();<a name="line.513"></a>
<FONT color="green">514</FONT>                            if (skype.errorListener != null)<a name="line.514"></a>
<FONT color="green">515</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.515"></a>
<FONT color="green">516</FONT>                    }<a name="line.516"></a>
<FONT color="green">517</FONT>                    request.addParm('O',0,mObjectId);<a name="line.517"></a>
<FONT color="green">518</FONT>                    request.addListStart(1);<a name="line.518"></a>
<FONT color="green">519</FONT>                    for (int i=0;i&lt;numbers.length;i++) {<a name="line.519"></a>
<FONT color="green">520</FONT>                            request.addParm('S',numbers[i]);<a name="line.520"></a>
<FONT color="green">521</FONT>                    }<a name="line.521"></a>
<FONT color="green">522</FONT>                    <a name="line.522"></a>
<FONT color="green">523</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.523"></a>
<FONT color="green">524</FONT>                    <a name="line.524"></a>
<FONT color="green">525</FONT>                    if (r.isErrCall())<a name="line.525"></a>
<FONT color="green">526</FONT>                            return false;<a name="line.526"></a>
<FONT color="green">527</FONT>                            <a name="line.527"></a>
<FONT color="green">528</FONT>                    boolean success = false;<a name="line.528"></a>
<FONT color="green">529</FONT>                    success = r.GetAsBoolean(1);<a name="line.529"></a>
<FONT color="green">530</FONT>                    return success;<a name="line.530"></a>
<FONT color="green">531</FONT>            }<a name="line.531"></a>
<FONT color="green">532</FONT>            <a name="line.532"></a>
<FONT color="green">533</FONT>            /**<a name="line.533"></a>
<FONT color="green">534</FONT>             *-The- method for setting the body text of this SMS. While Conversation.PostSMS does have a body argument, that argument is currently unused. &lt;br&gt;<a name="line.534"></a>
<FONT color="green">535</FONT>             * @param text Message body text. &lt;br&gt;<a name="line.535"></a>
<FONT color="green">536</FONT>             * @return SetSMSBodyResult<a name="line.536"></a>
<FONT color="green">537</FONT>             */<a name="line.537"></a>
<FONT color="green">538</FONT>            public SetSMSBodyResult SetBody( String text) {<a name="line.538"></a>
<FONT color="green">539</FONT>            <a name="line.539"></a>
<FONT color="green">540</FONT>                    Request request = null;<a name="line.540"></a>
<FONT color="green">541</FONT>                    try {<a name="line.541"></a>
<FONT color="green">542</FONT>                            request = new XCallRequest(12,7);<a name="line.542"></a>
<FONT color="green">543</FONT>                    } catch (IOException e) {<a name="line.543"></a>
<FONT color="green">544</FONT>                            e.printStackTrace();<a name="line.544"></a>
<FONT color="green">545</FONT>                            if (skype.errorListener != null)<a name="line.545"></a>
<FONT color="green">546</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.546"></a>
<FONT color="green">547</FONT>                    }<a name="line.547"></a>
<FONT color="green">548</FONT>                    request.addParm('O',0,mObjectId);<a name="line.548"></a>
<FONT color="green">549</FONT>                    request.addParm('S',1,text);<a name="line.549"></a>
<FONT color="green">550</FONT>                    <a name="line.550"></a>
<FONT color="green">551</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.551"></a>
<FONT color="green">552</FONT>                    <a name="line.552"></a>
<FONT color="green">553</FONT>                    if (r.isErrCall())<a name="line.553"></a>
<FONT color="green">554</FONT>                            return null;<a name="line.554"></a>
<FONT color="green">555</FONT>                            <a name="line.555"></a>
<FONT color="green">556</FONT>                    SetSMSBodyResult result = new SetSMSBodyResult();<a name="line.556"></a>
<FONT color="green">557</FONT>                    <a name="line.557"></a>
<FONT color="green">558</FONT>                    SETBODYRESULT setbodyresult = null;<a name="line.558"></a>
<FONT color="green">559</FONT>                    setbodyresult = SETBODYRESULT.get(r.GetAsInt(1));<a name="line.559"></a>
<FONT color="green">560</FONT>                    result.result = setbodyresult;<a name="line.560"></a>
<FONT color="green">561</FONT>                    <a name="line.561"></a>
<FONT color="green">562</FONT>                    Vector&lt;String&gt; chunks = new Vector&lt;String&gt;();<a name="line.562"></a>
<FONT color="green">563</FONT>                    while (r.HasMore(2))<a name="line.563"></a>
<FONT color="green">564</FONT>                    {<a name="line.564"></a>
<FONT color="green">565</FONT>                            String string = null;<a name="line.565"></a>
<FONT color="green">566</FONT>                            string  = r.GetAsString(2);<a name="line.566"></a>
<FONT color="green">567</FONT>                            chunks.add(string);<a name="line.567"></a>
<FONT color="green">568</FONT>                    }<a name="line.568"></a>
<FONT color="green">569</FONT>                    result.chunks = chunks.toArray(new String[chunks.size()]);<a name="line.569"></a>
<FONT color="green">570</FONT>                    <a name="line.570"></a>
<FONT color="green">571</FONT>                    int charsUntilNextChunk = 0;<a name="line.571"></a>
<FONT color="green">572</FONT>                    charsUntilNextChunk = r.GetAsInt(3);<a name="line.572"></a>
<FONT color="green">573</FONT>                    result.charsUntilNextChunk = charsUntilNextChunk;<a name="line.573"></a>
<FONT color="green">574</FONT>                    <a name="line.574"></a>
<FONT color="green">575</FONT>                    return result;<a name="line.575"></a>
<FONT color="green">576</FONT>            }<a name="line.576"></a>
<FONT color="green">577</FONT>            <a name="line.577"></a>
<FONT color="green">578</FONT>            public class SetSMSBodyResult {<a name="line.578"></a>
<FONT color="green">579</FONT>                    public SETBODYRESULT result; /** Whether the Message body was successfully set and if not, why not. &lt;br&gt; */<a name="line.579"></a>
<FONT color="green">580</FONT>                    public String [] chunks; /** The Message body as a list of individual chunks. &lt;br&gt; */<a name="line.580"></a>
<FONT color="green">581</FONT>                    public int charsUntilNextChunk; /** Number of available characters until creation of the next chunk becomes necessary. &lt;br&gt; */<a name="line.581"></a>
<FONT color="green">582</FONT>            }<a name="line.582"></a>
<FONT color="green">583</FONT>            <a name="line.583"></a>
<FONT color="green">584</FONT>            /**<a name="line.584"></a>
<FONT color="green">585</FONT>             *Retrieves string list of SMS text chunks in first argument, while the second argument contains the number of available characters until creation of the next chunk becomes necessary. &lt;br&gt;<a name="line.585"></a>
<FONT color="green">586</FONT>             * @return GetBodyChunksResult<a name="line.586"></a>
<FONT color="green">587</FONT>             */<a name="line.587"></a>
<FONT color="green">588</FONT>            public GetBodyChunksResult GetBodyChunks() {<a name="line.588"></a>
<FONT color="green">589</FONT>            <a name="line.589"></a>
<FONT color="green">590</FONT>                    Request request = null;<a name="line.590"></a>
<FONT color="green">591</FONT>                    try {<a name="line.591"></a>
<FONT color="green">592</FONT>                            request = new XCallRequest(12,8);<a name="line.592"></a>
<FONT color="green">593</FONT>                    } catch (IOException e) {<a name="line.593"></a>
<FONT color="green">594</FONT>                            e.printStackTrace();<a name="line.594"></a>
<FONT color="green">595</FONT>                            if (skype.errorListener != null)<a name="line.595"></a>
<FONT color="green">596</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.596"></a>
<FONT color="green">597</FONT>                    }<a name="line.597"></a>
<FONT color="green">598</FONT>                    request.addParm('O',0,mObjectId);<a name="line.598"></a>
<FONT color="green">599</FONT>                    <a name="line.599"></a>
<FONT color="green">600</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.600"></a>
<FONT color="green">601</FONT>                    <a name="line.601"></a>
<FONT color="green">602</FONT>                    if (r.isErrCall())<a name="line.602"></a>
<FONT color="green">603</FONT>                            return null;<a name="line.603"></a>
<FONT color="green">604</FONT>                            <a name="line.604"></a>
<FONT color="green">605</FONT>                    GetBodyChunksResult result = new GetBodyChunksResult();<a name="line.605"></a>
<FONT color="green">606</FONT>                    <a name="line.606"></a>
<FONT color="green">607</FONT>                    Vector&lt;String&gt; textChunks = new Vector&lt;String&gt;();<a name="line.607"></a>
<FONT color="green">608</FONT>                    while (r.HasMore(1))<a name="line.608"></a>
<FONT color="green">609</FONT>                    {<a name="line.609"></a>
<FONT color="green">610</FONT>                            String string = null;<a name="line.610"></a>
<FONT color="green">611</FONT>                            string  = r.GetAsString(1);<a name="line.611"></a>
<FONT color="green">612</FONT>                            textChunks.add(string);<a name="line.612"></a>
<FONT color="green">613</FONT>                    }<a name="line.613"></a>
<FONT color="green">614</FONT>                    result.textChunks = textChunks.toArray(new String[textChunks.size()]);<a name="line.614"></a>
<FONT color="green">615</FONT>                    <a name="line.615"></a>
<FONT color="green">616</FONT>                    int charsUntilNextChunk = 0;<a name="line.616"></a>
<FONT color="green">617</FONT>                    charsUntilNextChunk = r.GetAsInt(2);<a name="line.617"></a>
<FONT color="green">618</FONT>                    result.charsUntilNextChunk = charsUntilNextChunk;<a name="line.618"></a>
<FONT color="green">619</FONT>                    <a name="line.619"></a>
<FONT color="green">620</FONT>                    return result;<a name="line.620"></a>
<FONT color="green">621</FONT>            }<a name="line.621"></a>
<FONT color="green">622</FONT>            <a name="line.622"></a>
<FONT color="green">623</FONT>            public class GetBodyChunksResult {<a name="line.623"></a>
<FONT color="green">624</FONT>                    public String [] textChunks; /** List of text chunk strings &lt;br&gt; */<a name="line.624"></a>
<FONT color="green">625</FONT>                    public int charsUntilNextChunk; /** Number of available characters until creation of the next chunk becomes necessary. &lt;br&gt; */<a name="line.625"></a>
<FONT color="green">626</FONT>            }<a name="line.626"></a>
<FONT color="green">627</FONT>            <a name="line.627"></a>
<FONT color="green">628</FONT>            /**<a name="line.628"></a>
<FONT color="green">629</FONT>             */<a name="line.629"></a>
<FONT color="green">630</FONT>            public enum CONFIRM_TYPE {<a name="line.630"></a>
<FONT color="green">631</FONT>            <a name="line.631"></a>
<FONT color="green">632</FONT>                    /** Confirm mobile number as SMS sender number*/<a name="line.632"></a>
<FONT color="green">633</FONT>                    ID_SMS(1),<a name="line.633"></a>
<FONT color="green">634</FONT>                    <a name="line.634"></a>
<FONT color="green">635</FONT>                    /** Confirm mobile number as CLI for SkypeOut calls*/<a name="line.635"></a>
<FONT color="green">636</FONT>                    ID_MOBILE(2),<a name="line.636"></a>
<FONT color="green">637</FONT>                    <a name="line.637"></a>
<FONT color="green">638</FONT>                    /** unused currently*/<a name="line.638"></a>
<FONT color="green">639</FONT>                    ID_SKYPEIN(3);<a name="line.639"></a>
<FONT color="green">640</FONT>                    <a name="line.640"></a>
<FONT color="green">641</FONT>                    private static final Map&lt;Integer,CONFIRM_TYPE&gt; lookup = new HashMap&lt;Integer,CONFIRM_TYPE&gt;();<a name="line.641"></a>
<FONT color="green">642</FONT>                    <a name="line.642"></a>
<FONT color="green">643</FONT>                    static {<a name="line.643"></a>
<FONT color="green">644</FONT>                            for(CONFIRM_TYPE s : EnumSet.allOf(CONFIRM_TYPE.class))<a name="line.644"></a>
<FONT color="green">645</FONT>                                    lookup.put(s.getId(), s);<a name="line.645"></a>
<FONT color="green">646</FONT>                    }<a name="line.646"></a>
<FONT color="green">647</FONT>                    <a name="line.647"></a>
<FONT color="green">648</FONT>                    private final int id;<a name="line.648"></a>
<FONT color="green">649</FONT>                    <a name="line.649"></a>
<FONT color="green">650</FONT>                    private CONFIRM_TYPE(int value) {<a name="line.650"></a>
<FONT color="green">651</FONT>                            this.id = value;<a name="line.651"></a>
<FONT color="green">652</FONT>                    }<a name="line.652"></a>
<FONT color="green">653</FONT>                    <a name="line.653"></a>
<FONT color="green">654</FONT>                    public int getId() { return id; }<a name="line.654"></a>
<FONT color="green">655</FONT>                    <a name="line.655"></a>
<FONT color="green">656</FONT>                    public static CONFIRM_TYPE get(int code) {<a name="line.656"></a>
<FONT color="green">657</FONT>                            return lookup.get(code);<a name="line.657"></a>
<FONT color="green">658</FONT>                    }<a name="line.658"></a>
<FONT color="green">659</FONT>                    <a name="line.659"></a>
<FONT color="green">660</FONT>                    public static CONFIRM_TYPE fromString(String s) {<a name="line.660"></a>
<FONT color="green">661</FONT>                            for (CONFIRM_TYPE p : lookup.values()) {<a name="line.661"></a>
<FONT color="green">662</FONT>                                    if (p.toString() == s) {<a name="line.662"></a>
<FONT color="green">663</FONT>                                            return p;<a name="line.663"></a>
<FONT color="green">664</FONT>                                    }<a name="line.664"></a>
<FONT color="green">665</FONT>                            }<a name="line.665"></a>
<FONT color="green">666</FONT>                            return null;<a name="line.666"></a>
<FONT color="green">667</FONT>                    }<a name="line.667"></a>
<FONT color="green">668</FONT>            }<a name="line.668"></a>
<FONT color="green">669</FONT>            <a name="line.669"></a>
<FONT color="green">670</FONT>    <a name="line.670"></a>
<FONT color="green">671</FONT>    }<a name="line.671"></a>




























































</PRE>
</BODY>
</HTML>
