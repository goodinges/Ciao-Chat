<HTML>
<BODY BGCOLOR="white">
<PRE>
<FONT color="green">001</FONT>    package com.skype.api;<a name="line.1"></a>
<FONT color="green">002</FONT>    <a name="line.2"></a>
<FONT color="green">003</FONT>    import java.io.IOException;<a name="line.3"></a>
<FONT color="green">004</FONT>    import java.util.*;<a name="line.4"></a>
<FONT color="green">005</FONT>    import com.skype.ipc.*;<a name="line.5"></a>
<FONT color="green">006</FONT>    /**<a name="line.6"></a>
<FONT color="green">007</FONT>     * Events in a conversation context are expressed as Messages. It is therefore useful to think of Message objects as events, rather than specifically text chat messages. &lt;br&gt;&lt;br&gt;Message member functions all return a Boolean indicating the success (true) or failure (false) of processing the request itself (transport, runtime availability, and so forth) - not the success or failure of its associated functionality. For example, Message.Edit returns true if it was able to make a determination, and its result parameter reflects whether this Message can be edited. Similarly, Message.Edit returns false if it was unable to make a determination, and the value of its result parameter is undefined. &lt;br&gt;&lt;br&gt;Message member functions that are specific to a Message TYPE return false if this Message is not of that type. For example, Message.GetVoiceMessage will return false if this Message's type is not POSTED_VOICE_MESSAGE. &lt;br&gt;&lt;br&gt;The actual meaning of a Message can be determined by its P_TYPE property. The meanings of most other Message properties depend on the value of P_TYPE. For example, let's take P_BODY_XML property. &lt;br&gt;&lt;br&gt;Following messages have a text entered by the user as a body. It may contain emoticons, URLs, etc. &lt;br&gt; - POSTED_TEXT &lt;br&gt; - POSTED_EMOTE &lt;br&gt; - SET_METADATA &lt;br&gt; - REQUESTED_AUTH &lt;br&gt;&lt;br&gt;Following messages have a custom XML format for the body (see the specific section on these message types for details): &lt;br&gt; - POSTED_CONTACTS &lt;br&gt; - POSTED_VOICE_MESSAGE &lt;br&gt; - POSTED_FILES &lt;br&gt; - POSTED_SMS &lt;br&gt; - STARTED_LIVESESSION and ENDED_LIVESESSION (same format) &lt;br&gt;&lt;br&gt;Following messages do not use the body property: &lt;br&gt; - SPAWNED_CONFERENCE &lt;br&gt; - ADDED_CONSUMERS &lt;br&gt; - ADDED_APPLICANTS &lt;br&gt; - RETIRED_OTHERS &lt;br&gt; - RETIRED &lt;br&gt; - SET_RANK &lt;br&gt; - HAS_BIRTHDAY &lt;br&gt; - GRANTED_AUTH &lt;br&gt; - BLOCKED &lt;br&gt;&lt;br&gt;Messages such as POSTED_TEXT use a small subset of a HTML-like markup to control the visual representation of the text. This markup is used by POSTED_TEXT and POSTED_EMOTE, but also for the conversation topic (CONVERSATION_META_TOPIC property and the body of the SET_METADATA message) and for authorization requests. &lt;br&gt;&lt;br&gt;Having chat messages in XML format means that all formatting is indicated by XML tags. This includes emoticons and URls. The big advantage is that it makes the parsing of the message by the UI much easier. The UI does not need to do emoticons or URL detection, this is already done and it only needs to look for the XML tags. &lt;br&gt;&lt;br&gt;For text messages, it is possible for the UI to simply ignore (meaning strip) the XML and the message will be understandable fine, it will only have lost some formatting. &lt;br&gt;&lt;br&gt;But it is obviously nicer to display at least the most commonly used tags. &lt;br&gt;&lt;br&gt;To strip the XML: &lt;br&gt; - if they have the alt="sometext" attribute set, return sometext as the output of that tag and ignore the rest of tag and all nested sub tags &lt;br&gt; - if no alt="" attribute set, use tag content as output - &lt;sometag&gt;hereissomething&lt;/sometag&gt; is output as hereissomething&lt;br&gt; - if no alt="" and no tag content, ignore the tag altogether (return nothing) &lt;br&gt;Skype for Windows supports displaying many XML tags, but only a sub-set is regularly used and should be supported by the UI for a good experience. These are the ones described here. &lt;br&gt;Animated emoticons &lt;br&gt;Emoticons are encoded with the "ss" tag. The element content is the plain text representation. It has a "type" attribute indicating the emoticons canonical name. Example:  &lt;br&gt;@code &lt;br&gt;Hi &lt;ss type="smile"&gt;:-)&lt;/ss&gt;  &lt;br&gt;&lt;/CODE&gt; &lt;br&gt;&lt;br&gt;Flag emoticons &lt;br&gt;Flag emoticons are little flags. They are encoded with the "flag" tag. The element contents is the plain text representation and it has a "country" attribute which is a 2-letter ISO-3166 country code. The user can enter a flag using "(flag:XX)", where XX is a valid ISO country code. Example:  &lt;br&gt;@code &lt;br&gt;I am in &lt;flag country="cc"&gt;CC&lt;/flag&gt;  &lt;br&gt;&lt;/CODE&gt; &lt;br&gt;&lt;br&gt;Links &lt;br&gt;If the library detects a URL, it will encode it using the html "a" tag, with the "href" attribute indicating the URL. The plain text representation is what the user originally typed. Example:  &lt;br&gt;@code &lt;br&gt;I am in &lt;a href="http://wwww.skype.com"&gt;www.skype.com&lt;/a&gt; &lt;br&gt;&lt;/CODE&gt; &lt;br&gt;&lt;br&gt;Alert matches &lt;br&gt;When a conversation is configured to display only alerts if specific words are present in the message (see "/alertson [text to match]" command), if a message matches the alert, it will be marked with the &lt;alertmatch&gt; tag. This allows the UI to highlight the word matching. Example:  &lt;br&gt;@code &lt;br&gt;Maybe &lt;alertmatch&gt;Vincent&lt;/alertmatch&gt; knows the answer  &lt;br&gt;&lt;/CODE&gt; &lt;br&gt;&lt;br&gt;Bold, italic, etc &lt;br&gt;Skype for Windows also supports displaying bold and italic text, using the "b" and "i" tags. &lt;br&gt;&lt;br&gt;Encoding messages &lt;br&gt;When sending a chat message via PostText(), there is the possibility to indicate if the library should do the XML encoding, or if the message has already been encoded. Usually, the UI can let library do the encoding. This is the case when the message does not contain any specific formatting. It may contain emoticons or URls, which will be detected by the library encoder and converted into XML tags. &lt;br&gt;If the message has some more complex encoding, such as a quote or some bold text, it is up to the UI to encode the message. &lt;br&gt;<a name="line.7"></a>
<FONT color="green">008</FONT>     */<a name="line.8"></a>
<FONT color="green">009</FONT>    <a name="line.9"></a>
<FONT color="green">010</FONT>    <a name="line.10"></a>
<FONT color="green">011</FONT>    public class Message extends SkypeObject {<a name="line.11"></a>
<FONT color="green">012</FONT>    <a name="line.12"></a>
<FONT color="green">013</FONT>    <a name="line.13"></a>
<FONT color="green">014</FONT>            public interface MessageListener {<a name="line.14"></a>
<FONT color="green">015</FONT>                    /** This event gets called when there are changes to Message properties defined in Message.PROPERTY  */<a name="line.15"></a>
<FONT color="green">016</FONT>                    public void OnPropertyChange(SkypeObject obj, PROPERTY prop, Object value);<a name="line.16"></a>
<FONT color="green">017</FONT>                    <a name="line.17"></a>
<FONT color="green">018</FONT>            }<a name="line.18"></a>
<FONT color="green">019</FONT>            <a name="line.19"></a>
<FONT color="green">020</FONT>            public Message(int oid, Skype skype) {<a name="line.20"></a>
<FONT color="green">021</FONT>                    super(oid,skype);<a name="line.21"></a>
<FONT color="green">022</FONT>                    /**get default properties for this module **/<a name="line.22"></a>
<FONT color="green">023</FONT>                    GetDefaultProps();<a name="line.23"></a>
<FONT color="green">024</FONT>            }<a name="line.24"></a>
<FONT color="green">025</FONT>            <a name="line.25"></a>
<FONT color="green">026</FONT>            private static final int MODULE_ID = 9;<a name="line.26"></a>
<FONT color="green">027</FONT>            <a name="line.27"></a>
<FONT color="green">028</FONT>            public static final int moduleID() {<a name="line.28"></a>
<FONT color="green">029</FONT>                    return MODULE_ID;<a name="line.29"></a>
<FONT color="green">030</FONT>            }<a name="line.30"></a>
<FONT color="green">031</FONT>            <a name="line.31"></a>
<FONT color="green">032</FONT>            /** Properties of the Message class */<a name="line.32"></a>
<FONT color="green">033</FONT>            public enum PROPERTY {<a name="line.33"></a>
<FONT color="green">034</FONT>            <a name="line.34"></a>
<FONT color="green">035</FONT>                    /** DB ID of corresponding conversation, type: Conversation */<a name="line.35"></a>
<FONT color="green">036</FONT>                    convo_id(960),<a name="line.36"></a>
<FONT color="green">037</FONT>                    <a name="line.37"></a>
<FONT color="green">038</FONT>                    /** GUID of the Conversation. The GUID is a "global ID" - these values are shared accross Skype client instances and accross all the participants of the conversation. &lt;br&gt;, type: String */<a name="line.38"></a>
<FONT color="green">039</FONT>                    convo_guid(120),<a name="line.39"></a>
<FONT color="green">040</FONT>                    <a name="line.40"></a>
<FONT color="green">041</FONT>                    /** Identity of the sender. While this is almost always the same as SKYPENAME property of the Contact, in some rare cases it can also be a phone number - for example, incoming voicemail notification Messages (message type = POSTED_VOICE_MESSAGE). &lt;br&gt;, type: String */<a name="line.41"></a>
<FONT color="green">042</FONT>                    author(122),<a name="line.42"></a>
<FONT color="green">043</FONT>                    <a name="line.43"></a>
<FONT color="green">044</FONT>                    /** displayname of the sender at the time of posting, type: String */<a name="line.44"></a>
<FONT color="green">045</FONT>                    author_displayname(123),<a name="line.45"></a>
<FONT color="green">046</FONT>                    <a name="line.46"></a>
<FONT color="green">047</FONT>                    /** Unlike the message id, the GUID is the same on all instances and for all participants. &lt;br&gt;, type: byte[] */<a name="line.47"></a>
<FONT color="green">048</FONT>                    guid(792),<a name="line.48"></a>
<FONT color="green">049</FONT>                    <a name="line.49"></a>
<FONT color="green">050</FONT>                    /** This property gets set when a conference is spawned from dialog Conversation. In that case recent message history from the original dialog is copied to the target conversation. For all the copied messages, the ORIGINALLY_MEANT_FOR property will be set to identity of the remote participant of the original dialog. &lt;br&gt;, type: String */<a name="line.50"></a>
<FONT color="green">051</FONT>                    originally_meant_for(790),<a name="line.51"></a>
<FONT color="green">052</FONT>                    <a name="line.52"></a>
<FONT color="green">053</FONT>                    /** UNIX timestamp (sent time, adjusted for local clock), type: int */<a name="line.53"></a>
<FONT color="green">054</FONT>                    timestamp(121),<a name="line.54"></a>
<FONT color="green">055</FONT>                    <a name="line.55"></a>
<FONT color="green">056</FONT>                    /** type: Message.TYPE */<a name="line.56"></a>
<FONT color="green">057</FONT>                    type(961),<a name="line.57"></a>
<FONT color="green">058</FONT>                    <a name="line.58"></a>
<FONT color="green">059</FONT>                    /** type: Message.SENDING_STATUS */<a name="line.59"></a>
<FONT color="green">060</FONT>                    sending_status(962),<a name="line.60"></a>
<FONT color="green">061</FONT>                    <a name="line.61"></a>
<FONT color="green">062</FONT>                    /** type: Message.CONSUMPTION_STATUS */<a name="line.62"></a>
<FONT color="green">063</FONT>                    consumption_status(968),<a name="line.63"></a>
<FONT color="green">064</FONT>                    <a name="line.64"></a>
<FONT color="green">065</FONT>                    /** Identity of the author that last edited this message. NULL if message has not been edited &lt;br&gt;, type: String */<a name="line.65"></a>
<FONT color="green">066</FONT>                    edited_by(222),<a name="line.66"></a>
<FONT color="green">067</FONT>                    <a name="line.67"></a>
<FONT color="green">068</FONT>                    /** UNIX timestamp of last edit, type: int */<a name="line.68"></a>
<FONT color="green">069</FONT>                    edit_timestamp(223),<a name="line.69"></a>
<FONT color="green">070</FONT>                    <a name="line.70"></a>
<FONT color="green">071</FONT>                    /** Message type-specific parameter. See Message.SET_METADATA_KEY for more information. &lt;br&gt;, type: int */<a name="line.71"></a>
<FONT color="green">072</FONT>                    param_key(963),<a name="line.72"></a>
<FONT color="green">073</FONT>                    <a name="line.73"></a>
<FONT color="green">074</FONT>                    /** Message type-specific parameter &lt;br&gt;, type: int */<a name="line.74"></a>
<FONT color="green">075</FONT>                    param_value(964),<a name="line.75"></a>
<FONT color="green">076</FONT>                    <a name="line.76"></a>
<FONT color="green">077</FONT>                    /** Message type-specific parameter &lt;br&gt;, type: String */<a name="line.77"></a>
<FONT color="green">078</FONT>                    body_xml(127),<a name="line.78"></a>
<FONT color="green">079</FONT>                    <a name="line.79"></a>
<FONT color="green">080</FONT>                    /** Message type-specific parameter. Depending of Message type, this property contains: &lt;br&gt; - STARTED_LIVESESSION - list of participants in the cal; &lt;br&gt; - ENDED_LIVESESSION - list of participants in the call; &lt;br&gt; - POSTED_SMS - list of recipients of the message; &lt;br&gt; - SPAWNED_CONFERENCE - the list of identities that were added; &lt;br&gt; - ADDED_CONSUMERS - the list of identities that were added; &lt;br&gt; - RETIRED_OTHERS - the skypename of the participant who was kicked; &lt;br&gt; - SET_RANK - the skypename of the participant whose rank was changed; &lt;br&gt; - REQUESTED_AUTH - Message.P_AUTHOR and Message.P_IDENTITIES are set to the users receiving and requesting the authorization, depending if the message was received or sent; &lt;br&gt; - GRANTED_AUTH - the skypename of the user we granted authorization; &lt;br&gt; - BLOCKED - the skypename of the user who was blocked; &lt;br&gt; - HAS_BIRTHDAY - skypename of current logged in user. &lt;br&gt;, type: String */<a name="line.80"></a>
<FONT color="green">081</FONT>                    identities(125),<a name="line.81"></a>
<FONT color="green">082</FONT>                    <a name="line.82"></a>
<FONT color="green">083</FONT>                    /** Message type-specific parameter. Possible values for STARTED/ENDED_LIVESESSION (only set for dialogs): &lt;br&gt; - no_answer  &lt;br&gt; - manual  &lt;br&gt; - busy  &lt;br&gt; - connection_dropped &lt;br&gt; - no_skypeout_subscription; &lt;br&gt; - insufficient_funds &lt;br&gt; - internet_connection_lost &lt;br&gt; - skypeout_account_blocked &lt;br&gt; - pstn_could_not_connect_to_skype_proxy &lt;br&gt; - pstn_invalid_number &lt;br&gt; - pstn_number_forbidden &lt;br&gt; - pstn_call_timed_out &lt;br&gt; - pstn_busy &lt;br&gt; - pstn_call_terminated &lt;br&gt; - pstn_network_error &lt;br&gt; - number_unavailable &lt;br&gt; - pstn_call_rejected &lt;br&gt; - pstn_misc_error &lt;br&gt; - internal_error &lt;br&gt; - unable_to_connect &lt;br&gt; - connection_dropped &lt;br&gt; - recording_failed &lt;br&gt; - playback_error &lt;br&gt; - legacy_error &lt;br&gt; - blocked_by_privacy_settings &lt;br&gt; - error &lt;br&gt; - transfer_failed &lt;br&gt; - transfer_insufficient_funds &lt;br&gt; - blocked_by_us &lt;br&gt; - emergency_call_denied &lt;br&gt;&lt;br&gt;This information is now available as an enum in LEAVEREASON &lt;br&gt;, type: String */<a name="line.83"></a>
<FONT color="green">084</FONT>                    reason(966),<a name="line.84"></a>
<FONT color="green">085</FONT>                    <a name="line.85"></a>
<FONT color="green">086</FONT>                    /** Leave reason for message of the RETIRED type, and STARTED/ENDED_LIVESESSION.                   Use for STARTED/ENDED_LIVESESSION is to provide simpler, enum based                   handling and deprecates the reason property (only set for dialogs), type: LEAVE_REASON */<a name="line.86"></a>
<FONT color="green">087</FONT>                    leavereason(126),<a name="line.87"></a>
<FONT color="green">088</FONT>                    <a name="line.88"></a>
<FONT color="green">089</FONT>                    /** Number of people who received this message (including local user) &lt;br&gt;, type: int */<a name="line.89"></a>
<FONT color="green">090</FONT>                    participant_count(982);<a name="line.90"></a>
<FONT color="green">091</FONT>                    <a name="line.91"></a>
<FONT color="green">092</FONT>                    private static final Map&lt;Integer,PROPERTY&gt; lookup = new HashMap&lt;Integer,PROPERTY&gt;();<a name="line.92"></a>
<FONT color="green">093</FONT>                    <a name="line.93"></a>
<FONT color="green">094</FONT>                    static {<a name="line.94"></a>
<FONT color="green">095</FONT>                            for(PROPERTY s : EnumSet.allOf(PROPERTY.class))<a name="line.95"></a>
<FONT color="green">096</FONT>                                    lookup.put(s.getId(), s);<a name="line.96"></a>
<FONT color="green">097</FONT>                    }<a name="line.97"></a>
<FONT color="green">098</FONT>                    <a name="line.98"></a>
<FONT color="green">099</FONT>                    private final int id;<a name="line.99"></a>
<FONT color="green">100</FONT>                    <a name="line.100"></a>
<FONT color="green">101</FONT>                    private PROPERTY(int value) {<a name="line.101"></a>
<FONT color="green">102</FONT>                            this.id = value;<a name="line.102"></a>
<FONT color="green">103</FONT>                    }<a name="line.103"></a>
<FONT color="green">104</FONT>                    <a name="line.104"></a>
<FONT color="green">105</FONT>                    public int getId() { return id; }<a name="line.105"></a>
<FONT color="green">106</FONT>                    <a name="line.106"></a>
<FONT color="green">107</FONT>                    public static PROPERTY get(int code) {<a name="line.107"></a>
<FONT color="green">108</FONT>                            return lookup.get(code);<a name="line.108"></a>
<FONT color="green">109</FONT>                    }<a name="line.109"></a>
<FONT color="green">110</FONT>                    <a name="line.110"></a>
<FONT color="green">111</FONT>                    public static PROPERTY fromString(String s) {<a name="line.111"></a>
<FONT color="green">112</FONT>                            for (PROPERTY p : lookup.values()) {<a name="line.112"></a>
<FONT color="green">113</FONT>                                    if (p.toString() == s) {<a name="line.113"></a>
<FONT color="green">114</FONT>                                            return p;<a name="line.114"></a>
<FONT color="green">115</FONT>                                    }<a name="line.115"></a>
<FONT color="green">116</FONT>                            }<a name="line.116"></a>
<FONT color="green">117</FONT>                            return null;<a name="line.117"></a>
<FONT color="green">118</FONT>                    }<a name="line.118"></a>
<FONT color="green">119</FONT>            }<a name="line.119"></a>
<FONT color="green">120</FONT>            <a name="line.120"></a>
<FONT color="green">121</FONT>            public Object GetPropertyAsEnum(int propid) {<a name="line.121"></a>
<FONT color="green">122</FONT>                    return PROPERTY.get(propid);<a name="line.122"></a>
<FONT color="green">123</FONT>            }<a name="line.123"></a>
<FONT color="green">124</FONT>            <a name="line.124"></a>
<FONT color="green">125</FONT>            public String GetStrProperty(PROPERTY prop) {<a name="line.125"></a>
<FONT color="green">126</FONT>                    //check in propcache if so then return<a name="line.126"></a>
<FONT color="green">127</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.127"></a>
<FONT color="green">128</FONT>                            String value =  (String)mPropCache.get(prop.id);<a name="line.128"></a>
<FONT color="green">129</FONT>                            if (value != null &amp;&amp; !(value.length() == 0) ){<a name="line.129"></a>
<FONT color="green">130</FONT>                                    return value;<a name="line.130"></a>
<FONT color="green">131</FONT>                            }<a name="line.131"></a>
<FONT color="green">132</FONT>                    }<a name="line.132"></a>
<FONT color="green">133</FONT>                    //else get from skypekit...<a name="line.133"></a>
<FONT color="green">134</FONT>                    GetPropertyRequest request = new GetPropertyRequest(9, mObjectId, prop.id);<a name="line.134"></a>
<FONT color="green">135</FONT>                    <a name="line.135"></a>
<FONT color="green">136</FONT>                    String string = null;<a name="line.136"></a>
<FONT color="green">137</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.137"></a>
<FONT color="green">138</FONT>                    if (r != null){<a name="line.138"></a>
<FONT color="green">139</FONT>                            string = r.GetAsString();<a name="line.139"></a>
<FONT color="green">140</FONT>                    }<a name="line.140"></a>
<FONT color="green">141</FONT>                    <a name="line.141"></a>
<FONT color="green">142</FONT>                    if (string != null)<a name="line.142"></a>
<FONT color="green">143</FONT>                    {<a name="line.143"></a>
<FONT color="green">144</FONT>                            mPropCache.put(new Integer(prop.id), string);<a name="line.144"></a>
<FONT color="green">145</FONT>                    }<a name="line.145"></a>
<FONT color="green">146</FONT>                    return string;<a name="line.146"></a>
<FONT color="green">147</FONT>            }<a name="line.147"></a>
<FONT color="green">148</FONT>            <a name="line.148"></a>
<FONT color="green">149</FONT>            public int GetIntProperty(PROPERTY prop) {<a name="line.149"></a>
<FONT color="green">150</FONT>                    //check in propcache if so then return<a name="line.150"></a>
<FONT color="green">151</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.151"></a>
<FONT color="green">152</FONT>                            int value = ((Integer)mPropCache.get(prop.id)).intValue();<a name="line.152"></a>
<FONT color="green">153</FONT>                            if (value != 0){<a name="line.153"></a>
<FONT color="green">154</FONT>                                    return value;<a name="line.154"></a>
<FONT color="green">155</FONT>                            }<a name="line.155"></a>
<FONT color="green">156</FONT>                    }<a name="line.156"></a>
<FONT color="green">157</FONT>                    //else get from skypekit...<a name="line.157"></a>
<FONT color="green">158</FONT>                    GetPropertyRequest request = new GetPropertyRequest(moduleID(), mObjectId, prop.id);<a name="line.158"></a>
<FONT color="green">159</FONT>                    <a name="line.159"></a>
<FONT color="green">160</FONT>                    Integer integer = null;<a name="line.160"></a>
<FONT color="green">161</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.161"></a>
<FONT color="green">162</FONT>                    if (r != null){<a name="line.162"></a>
<FONT color="green">163</FONT>                            integer  = r.GetAsInt();<a name="line.163"></a>
<FONT color="green">164</FONT>                    }<a name="line.164"></a>
<FONT color="green">165</FONT>                    <a name="line.165"></a>
<FONT color="green">166</FONT>                    if (integer != null)<a name="line.166"></a>
<FONT color="green">167</FONT>                    {<a name="line.167"></a>
<FONT color="green">168</FONT>                            mPropCache.put(new Integer(prop.id), integer);<a name="line.168"></a>
<FONT color="green">169</FONT>                            return integer.intValue();<a name="line.169"></a>
<FONT color="green">170</FONT>                    }<a name="line.170"></a>
<FONT color="green">171</FONT>                    else<a name="line.171"></a>
<FONT color="green">172</FONT>                    {<a name="line.172"></a>
<FONT color="green">173</FONT>                            return 0;<a name="line.173"></a>
<FONT color="green">174</FONT>                    }<a name="line.174"></a>
<FONT color="green">175</FONT>            }<a name="line.175"></a>
<FONT color="green">176</FONT>            <a name="line.176"></a>
<FONT color="green">177</FONT>            public boolean GetBooleanProperty(PROPERTY prop) {<a name="line.177"></a>
<FONT color="green">178</FONT>                    //check in propcache if so then return<a name="line.178"></a>
<FONT color="green">179</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.179"></a>
<FONT color="green">180</FONT>                            return ((Boolean)mPropCache.get(prop.id)).booleanValue();<a name="line.180"></a>
<FONT color="green">181</FONT>                    }<a name="line.181"></a>
<FONT color="green">182</FONT>                    //else get from skypekit...<a name="line.182"></a>
<FONT color="green">183</FONT>                    GetPropertyRequest request = new GetPropertyRequest(moduleID(), mObjectId, prop.id);<a name="line.183"></a>
<FONT color="green">184</FONT>                    <a name="line.184"></a>
<FONT color="green">185</FONT>                    Boolean boolResp = null;<a name="line.185"></a>
<FONT color="green">186</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.186"></a>
<FONT color="green">187</FONT>                    if (r != null){<a name="line.187"></a>
<FONT color="green">188</FONT>                            boolResp  = r.GetAsBoolean();<a name="line.188"></a>
<FONT color="green">189</FONT>                    }<a name="line.189"></a>
<FONT color="green">190</FONT>                    <a name="line.190"></a>
<FONT color="green">191</FONT>                    if (boolResp != null)<a name="line.191"></a>
<FONT color="green">192</FONT>                    {<a name="line.192"></a>
<FONT color="green">193</FONT>                            mPropCache.put(new Integer(prop.id), boolResp);<a name="line.193"></a>
<FONT color="green">194</FONT>                            return boolResp.booleanValue();<a name="line.194"></a>
<FONT color="green">195</FONT>                    }<a name="line.195"></a>
<FONT color="green">196</FONT>                    else<a name="line.196"></a>
<FONT color="green">197</FONT>                    {<a name="line.197"></a>
<FONT color="green">198</FONT>                            return false;<a name="line.198"></a>
<FONT color="green">199</FONT>                    }<a name="line.199"></a>
<FONT color="green">200</FONT>            }<a name="line.200"></a>
<FONT color="green">201</FONT>            <a name="line.201"></a>
<FONT color="green">202</FONT>            public byte [] GetBinProperty(PROPERTY prop) {<a name="line.202"></a>
<FONT color="green">203</FONT>                    //get from skypekit...<a name="line.203"></a>
<FONT color="green">204</FONT>                    GetPropertyRequest request = new GetPropertyRequest(9, mObjectId, prop.id);<a name="line.204"></a>
<FONT color="green">205</FONT>                    <a name="line.205"></a>
<FONT color="green">206</FONT>                    byte [] data = null;<a name="line.206"></a>
<FONT color="green">207</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.207"></a>
<FONT color="green">208</FONT>                    if (r != null) {<a name="line.208"></a>
<FONT color="green">209</FONT>                            data = r.GetAsBinary();<a name="line.209"></a>
<FONT color="green">210</FONT>                    }<a name="line.210"></a>
<FONT color="green">211</FONT>                    return data;<a name="line.211"></a>
<FONT color="green">212</FONT>            }<a name="line.212"></a>
<FONT color="green">213</FONT>            <a name="line.213"></a>
<FONT color="green">214</FONT>            /**default array of Message Properties that get fetched &amp; cached upon class construction*/<a name="line.214"></a>
<FONT color="green">215</FONT>            private static PROPERTY [] defaultProperties = { PROPERTY.convo_id, PROPERTY.type, PROPERTY.author, PROPERTY.author_displayname, PROPERTY.identities, PROPERTY.timestamp, PROPERTY.body_xml, PROPERTY.sending_status, PROPERTY.consumption_status};<a name="line.215"></a>
<FONT color="green">216</FONT>            <a name="line.216"></a>
<FONT color="green">217</FONT>            private void GetDefaultProps() {<a name="line.217"></a>
<FONT color="green">218</FONT>                    MultiGetPropertyRequest request = null;<a name="line.218"></a>
<FONT color="green">219</FONT>                    ArrayList&lt;Integer&gt; proparray = null;<a name="line.219"></a>
<FONT color="green">220</FONT>                            /**Add the single oid into array*/<a name="line.220"></a>
<FONT color="green">221</FONT>                            ArrayList&lt;Integer&gt; oidarray=new ArrayList&lt;Integer&gt;();<a name="line.221"></a>
<FONT color="green">222</FONT>                            oidarray.add(mObjectId);<a name="line.222"></a>
<FONT color="green">223</FONT>                            <a name="line.223"></a>
<FONT color="green">224</FONT>                            /**Add all requested propids into array*/<a name="line.224"></a>
<FONT color="green">225</FONT>                            proparray=new ArrayList&lt;Integer&gt;();<a name="line.225"></a>
<FONT color="green">226</FONT>                            for (PROPERTY defaultProp : defaultProperties) {<a name="line.226"></a>
<FONT color="green">227</FONT>                                    proparray.add(defaultProp.getId());<a name="line.227"></a>
<FONT color="green">228</FONT>                            }<a name="line.228"></a>
<FONT color="green">229</FONT>                            /**Generate the request*/<a name="line.229"></a>
<FONT color="green">230</FONT>                            request = new MultiGetPropertyRequest(moduleID(), oidarray,proparray);<a name="line.230"></a>
<FONT color="green">231</FONT>                            <a name="line.231"></a>
<FONT color="green">232</FONT>                            /** Make Multi Get call*/<a name="line.232"></a>
<FONT color="green">233</FONT>                            GetPropertyResponse r=skype.MultiGetProperty(request);<a name="line.233"></a>
<FONT color="green">234</FONT>                            /**Verify that it is a proper multiresponse*/<a name="line.234"></a>
<FONT color="green">235</FONT>                            if(!r.isMultiresponse())<a name="line.235"></a>
<FONT color="green">236</FONT>                            {<a name="line.236"></a>
<FONT color="green">237</FONT>                                    return;<a name="line.237"></a>
<FONT color="green">238</FONT>                            }<a name="line.238"></a>
<FONT color="green">239</FONT>                            /**update property cache with results*/<a name="line.239"></a>
<FONT color="green">240</FONT>                            mPropCache.putAll(r.GetAsMap(mObjectId, proparray));<a name="line.240"></a>
<FONT color="green">241</FONT>                    }<a name="line.241"></a>
<FONT color="green">242</FONT>                    <a name="line.242"></a>
<FONT color="green">243</FONT>                    /**<a name="line.243"></a>
<FONT color="green">244</FONT>                    The P_TYPE property determines the actual meaning of the Message object. Only Messages of POSTED_TEXT type contain actual text messages. The meaning and content of the rest of the message properties are largely dependant of the value of the Message.P_TYPE. &lt;br&gt; */<a name="line.244"></a>
<FONT color="green">245</FONT>                    public enum TYPE {<a name="line.245"></a>
<FONT color="green">246</FONT>                    <a name="line.246"></a>
<FONT color="green">247</FONT>                            /** Conference metadata were changed*/<a name="line.247"></a>
<FONT color="green">248</FONT>                            SET_METADATA(2),<a name="line.248"></a>
<FONT color="green">249</FONT>                            <a name="line.249"></a>
<FONT color="green">250</FONT>                            /** A conference was spawned from this dialog*/<a name="line.250"></a>
<FONT color="green">251</FONT>                            SPAWNED_CONFERENCE(4),<a name="line.251"></a>
<FONT color="green">252</FONT>                            <a name="line.252"></a>
<FONT color="green">253</FONT>                            /** Some users were added to the conference*/<a name="line.253"></a>
<FONT color="green">254</FONT>                            ADDED_CONSUMERS(10),<a name="line.254"></a>
<FONT color="green">255</FONT>                            <a name="line.255"></a>
<FONT color="green">256</FONT>                            /** Some users are applying to be added to the conference*/<a name="line.256"></a>
<FONT color="green">257</FONT>                            ADDED_APPLICANTS(11),<a name="line.257"></a>
<FONT color="green">258</FONT>                            <a name="line.258"></a>
<FONT color="green">259</FONT>                            /** User was kicked from the conference*/<a name="line.259"></a>
<FONT color="green">260</FONT>                            RETIRED_OTHERS(12),<a name="line.260"></a>
<FONT color="green">261</FONT>                            <a name="line.261"></a>
<FONT color="green">262</FONT>                            /** User left the conference*/<a name="line.262"></a>
<FONT color="green">263</FONT>                            RETIRED(13),<a name="line.263"></a>
<FONT color="green">264</FONT>                            <a name="line.264"></a>
<FONT color="green">265</FONT>                            /** Changed the rank of a user in the Conversation (multichat administration) &lt;br&gt;*/<a name="line.265"></a>
<FONT color="green">266</FONT>                            SET_RANK(21),<a name="line.266"></a>
<FONT color="green">267</FONT>                            <a name="line.267"></a>
<FONT color="green">268</FONT>                            /** A live session started*/<a name="line.268"></a>
<FONT color="green">269</FONT>                            STARTED_LIVESESSION(30),<a name="line.269"></a>
<FONT color="green">270</FONT>                            <a name="line.270"></a>
<FONT color="green">271</FONT>                            /** A live session ended*/<a name="line.271"></a>
<FONT color="green">272</FONT>                            ENDED_LIVESESSION(39),<a name="line.272"></a>
<FONT color="green">273</FONT>                            <a name="line.273"></a>
<FONT color="green">274</FONT>                            /** User requested authorization*/<a name="line.274"></a>
<FONT color="green">275</FONT>                            REQUESTED_AUTH(50),<a name="line.275"></a>
<FONT color="green">276</FONT>                            <a name="line.276"></a>
<FONT color="green">277</FONT>                            /** User was granted authorization. Notification message that user is now an authorized contact (of the local user). &lt;br&gt;*/<a name="line.277"></a>
<FONT color="green">278</FONT>                            GRANTED_AUTH(51),<a name="line.278"></a>
<FONT color="green">279</FONT>                            <a name="line.279"></a>
<FONT color="green">280</FONT>                            /** User was blocked*/<a name="line.280"></a>
<FONT color="green">281</FONT>                            BLOCKED(53),<a name="line.281"></a>
<FONT color="green">282</FONT>                            <a name="line.282"></a>
<FONT color="green">283</FONT>                            /** A text message*/<a name="line.283"></a>
<FONT color="green">284</FONT>                            POSTED_TEXT(61),<a name="line.284"></a>
<FONT color="green">285</FONT>                            <a name="line.285"></a>
<FONT color="green">286</FONT>                            /** An emote ('John Doe is laughing', cf /me chat command)*/<a name="line.286"></a>
<FONT color="green">287</FONT>                            POSTED_EMOTE(60),<a name="line.287"></a>
<FONT color="green">288</FONT>                            <a name="line.288"></a>
<FONT color="green">289</FONT>                            /** The message represents (a set of) contact card(s) posted in the conversation. One message can contain more than one contact cards. The contacts can be retrieved from the message by parsing them out from the P_BODY_XML property. For more information, see Conversation.PostContacts &lt;br&gt;*/<a name="line.289"></a>
<FONT color="green">290</FONT>                            POSTED_CONTACTS(63),<a name="line.290"></a>
<FONT color="green">291</FONT>                            <a name="line.291"></a>
<FONT color="green">292</FONT>                            /** The message represents an SMS object that was posted in the Conversation. See Conversation.PostSMS for more details. The Sms object itself can be retrieved from the Message with Message.GetSms The message BODY_XML contains a set of SMS properties, such as status, failurereason, targets, price and timestamp. &lt;br&gt;*/<a name="line.292"></a>
<FONT color="green">293</FONT>                            POSTED_SMS(64),<a name="line.293"></a>
<FONT color="green">294</FONT>                            <a name="line.294"></a>
<FONT color="green">295</FONT>                            /** Deprecated, never sent*/<a name="line.295"></a>
<FONT color="green">296</FONT>                            POSTED_ALERT(65),<a name="line.296"></a>
<FONT color="green">297</FONT>                            <a name="line.297"></a>
<FONT color="green">298</FONT>                            /** A voicemail*/<a name="line.298"></a>
<FONT color="green">299</FONT>                            POSTED_VOICE_MESSAGE(67),<a name="line.299"></a>
<FONT color="green">300</FONT>                            <a name="line.300"></a>
<FONT color="green">301</FONT>                            /** The message represents a (list of) file transfers that were posted in the Conversation with Conversation.PostFiles. Transfer objects can be retrieved from the Message with Message.GetTransfers &lt;br&gt;*/<a name="line.301"></a>
<FONT color="green">302</FONT>                            POSTED_FILES(68),<a name="line.302"></a>
<FONT color="green">303</FONT>                            <a name="line.303"></a>
<FONT color="green">304</FONT>                            /** Currently unused. &lt;br&gt;*/<a name="line.304"></a>
<FONT color="green">305</FONT>                            POSTED_INVOICE(69),<a name="line.305"></a>
<FONT color="green">306</FONT>                            <a name="line.306"></a>
<FONT color="green">307</FONT>                            /** The message represents a Contact birthday notification. &lt;br&gt;*/<a name="line.307"></a>
<FONT color="green">308</FONT>                            HAS_BIRTHDAY(110);<a name="line.308"></a>
<FONT color="green">309</FONT>                            <a name="line.309"></a>
<FONT color="green">310</FONT>                            private static final Map&lt;Integer,TYPE&gt; lookup = new HashMap&lt;Integer,TYPE&gt;();<a name="line.310"></a>
<FONT color="green">311</FONT>                            <a name="line.311"></a>
<FONT color="green">312</FONT>                            static {<a name="line.312"></a>
<FONT color="green">313</FONT>                                    for(TYPE s : EnumSet.allOf(TYPE.class))<a name="line.313"></a>
<FONT color="green">314</FONT>                                            lookup.put(s.getId(), s);<a name="line.314"></a>
<FONT color="green">315</FONT>                            }<a name="line.315"></a>
<FONT color="green">316</FONT>                            <a name="line.316"></a>
<FONT color="green">317</FONT>                            private final int id;<a name="line.317"></a>
<FONT color="green">318</FONT>                            <a name="line.318"></a>
<FONT color="green">319</FONT>                            private TYPE(int value) {<a name="line.319"></a>
<FONT color="green">320</FONT>                                    this.id = value;<a name="line.320"></a>
<FONT color="green">321</FONT>                            }<a name="line.321"></a>
<FONT color="green">322</FONT>                            <a name="line.322"></a>
<FONT color="green">323</FONT>                            public int getId() { return id; }<a name="line.323"></a>
<FONT color="green">324</FONT>                            <a name="line.324"></a>
<FONT color="green">325</FONT>                            public static TYPE get(int code) {<a name="line.325"></a>
<FONT color="green">326</FONT>                                    return lookup.get(code);<a name="line.326"></a>
<FONT color="green">327</FONT>                            }<a name="line.327"></a>
<FONT color="green">328</FONT>                            <a name="line.328"></a>
<FONT color="green">329</FONT>                            public static TYPE fromString(String s) {<a name="line.329"></a>
<FONT color="green">330</FONT>                                    for (TYPE p : lookup.values()) {<a name="line.330"></a>
<FONT color="green">331</FONT>                                            if (p.toString() == s) {<a name="line.331"></a>
<FONT color="green">332</FONT>                                                    return p;<a name="line.332"></a>
<FONT color="green">333</FONT>                                            }<a name="line.333"></a>
<FONT color="green">334</FONT>                                    }<a name="line.334"></a>
<FONT color="green">335</FONT>                                    return null;<a name="line.335"></a>
<FONT color="green">336</FONT>                            }<a name="line.336"></a>
<FONT color="green">337</FONT>                    }<a name="line.337"></a>
<FONT color="green">338</FONT>                    <a name="line.338"></a>
<FONT color="green">339</FONT>                    /**<a name="line.339"></a>
<FONT color="green">340</FONT>                     */<a name="line.340"></a>
<FONT color="green">341</FONT>                    public enum SENDING_STATUS {<a name="line.341"></a>
<FONT color="green">342</FONT>                    <a name="line.342"></a>
<FONT color="green">343</FONT>                            /** Message has not been delivered to at least one of the participants &lt;br&gt;*/<a name="line.343"></a>
<FONT color="green">344</FONT>                            SENDING(1),<a name="line.344"></a>
<FONT color="green">345</FONT>                            <a name="line.345"></a>
<FONT color="green">346</FONT>                            /** Message has been delivered to at least one other participant &lt;br&gt;*/<a name="line.346"></a>
<FONT color="green">347</FONT>                            SENT(2),<a name="line.347"></a>
<FONT color="green">348</FONT>                            <a name="line.348"></a>
<FONT color="green">349</FONT>                            /** Message could not be delivered (for SMS this reflects the actual SMS, not the chat message) &lt;br&gt;*/<a name="line.349"></a>
<FONT color="green">350</FONT>                            FAILED_TO_SEND(3);<a name="line.350"></a>
<FONT color="green">351</FONT>                            <a name="line.351"></a>
<FONT color="green">352</FONT>                            private static final Map&lt;Integer,SENDING_STATUS&gt; lookup = new HashMap&lt;Integer,SENDING_STATUS&gt;();<a name="line.352"></a>
<FONT color="green">353</FONT>                            <a name="line.353"></a>
<FONT color="green">354</FONT>                            static {<a name="line.354"></a>
<FONT color="green">355</FONT>                                    for(SENDING_STATUS s : EnumSet.allOf(SENDING_STATUS.class))<a name="line.355"></a>
<FONT color="green">356</FONT>                                            lookup.put(s.getId(), s);<a name="line.356"></a>
<FONT color="green">357</FONT>                            }<a name="line.357"></a>
<FONT color="green">358</FONT>                            <a name="line.358"></a>
<FONT color="green">359</FONT>                            private final int id;<a name="line.359"></a>
<FONT color="green">360</FONT>                            <a name="line.360"></a>
<FONT color="green">361</FONT>                            private SENDING_STATUS(int value) {<a name="line.361"></a>
<FONT color="green">362</FONT>                                    this.id = value;<a name="line.362"></a>
<FONT color="green">363</FONT>                            }<a name="line.363"></a>
<FONT color="green">364</FONT>                            <a name="line.364"></a>
<FONT color="green">365</FONT>                            public int getId() { return id; }<a name="line.365"></a>
<FONT color="green">366</FONT>                            <a name="line.366"></a>
<FONT color="green">367</FONT>                            public static SENDING_STATUS get(int code) {<a name="line.367"></a>
<FONT color="green">368</FONT>                                    return lookup.get(code);<a name="line.368"></a>
<FONT color="green">369</FONT>                            }<a name="line.369"></a>
<FONT color="green">370</FONT>                            <a name="line.370"></a>
<FONT color="green">371</FONT>                            public static SENDING_STATUS fromString(String s) {<a name="line.371"></a>
<FONT color="green">372</FONT>                                    for (SENDING_STATUS p : lookup.values()) {<a name="line.372"></a>
<FONT color="green">373</FONT>                                            if (p.toString() == s) {<a name="line.373"></a>
<FONT color="green">374</FONT>                                                    return p;<a name="line.374"></a>
<FONT color="green">375</FONT>                                            }<a name="line.375"></a>
<FONT color="green">376</FONT>                                    }<a name="line.376"></a>
<FONT color="green">377</FONT>                                    return null;<a name="line.377"></a>
<FONT color="green">378</FONT>                            }<a name="line.378"></a>
<FONT color="green">379</FONT>                    }<a name="line.379"></a>
<FONT color="green">380</FONT>                    <a name="line.380"></a>
<FONT color="green">381</FONT>                    /**<a name="line.381"></a>
<FONT color="green">382</FONT>                    Indicates if a message has been consumed (meaning read) or not */<a name="line.382"></a>
<FONT color="green">383</FONT>                    public enum CONSUMPTION_STATUS {<a name="line.383"></a>
<FONT color="green">384</FONT>                    <a name="line.384"></a>
<FONT color="green">385</FONT>                            /** Message has been read. Note that this is a read-only property. Consumption status of individual messages can not be set selectively. Message consumption status is determined at the conversation level, based conversation consumption horizon and individual message timestamps. Conversation consumption horizon can be updated with Conversation.SetConsumedHorizon method.  &lt;br&gt;*/<a name="line.385"></a>
<FONT color="green">386</FONT>                            CONSUMED(0),<a name="line.386"></a>
<FONT color="green">387</FONT>                            <a name="line.387"></a>
<FONT color="green">388</FONT>                            /** Do not notify the user that they have this unread message &lt;br&gt;*/<a name="line.388"></a>
<FONT color="green">389</FONT>                            UNCONSUMED_SUPPRESSED(1),<a name="line.389"></a>
<FONT color="green">390</FONT>                            <a name="line.390"></a>
<FONT color="green">391</FONT>                            /** Notify the user that they have this unread message &lt;br&gt;*/<a name="line.391"></a>
<FONT color="green">392</FONT>                            UNCONSUMED_NORMAL(2),<a name="line.392"></a>
<FONT color="green">393</FONT>                            <a name="line.393"></a>
<FONT color="green">394</FONT>                            /** This message consumption state is marked as DEPRECATED &lt;br&gt;*/<a name="line.394"></a>
<FONT color="green">395</FONT>                            UNCONSUMED_ELEVATED(3);<a name="line.395"></a>
<FONT color="green">396</FONT>                            <a name="line.396"></a>
<FONT color="green">397</FONT>                            private static final Map&lt;Integer,CONSUMPTION_STATUS&gt; lookup = new HashMap&lt;Integer,CONSUMPTION_STATUS&gt;();<a name="line.397"></a>
<FONT color="green">398</FONT>                            <a name="line.398"></a>
<FONT color="green">399</FONT>                            static {<a name="line.399"></a>
<FONT color="green">400</FONT>                                    for(CONSUMPTION_STATUS s : EnumSet.allOf(CONSUMPTION_STATUS.class))<a name="line.400"></a>
<FONT color="green">401</FONT>                                            lookup.put(s.getId(), s);<a name="line.401"></a>
<FONT color="green">402</FONT>                            }<a name="line.402"></a>
<FONT color="green">403</FONT>                            <a name="line.403"></a>
<FONT color="green">404</FONT>                            private final int id;<a name="line.404"></a>
<FONT color="green">405</FONT>                            <a name="line.405"></a>
<FONT color="green">406</FONT>                            private CONSUMPTION_STATUS(int value) {<a name="line.406"></a>
<FONT color="green">407</FONT>                                    this.id = value;<a name="line.407"></a>
<FONT color="green">408</FONT>                            }<a name="line.408"></a>
<FONT color="green">409</FONT>                            <a name="line.409"></a>
<FONT color="green">410</FONT>                            public int getId() { return id; }<a name="line.410"></a>
<FONT color="green">411</FONT>                            <a name="line.411"></a>
<FONT color="green">412</FONT>                            public static CONSUMPTION_STATUS get(int code) {<a name="line.412"></a>
<FONT color="green">413</FONT>                                    return lookup.get(code);<a name="line.413"></a>
<FONT color="green">414</FONT>                            }<a name="line.414"></a>
<FONT color="green">415</FONT>                            <a name="line.415"></a>
<FONT color="green">416</FONT>                            public static CONSUMPTION_STATUS fromString(String s) {<a name="line.416"></a>
<FONT color="green">417</FONT>                                    for (CONSUMPTION_STATUS p : lookup.values()) {<a name="line.417"></a>
<FONT color="green">418</FONT>                                            if (p.toString() == s) {<a name="line.418"></a>
<FONT color="green">419</FONT>                                                    return p;<a name="line.419"></a>
<FONT color="green">420</FONT>                                            }<a name="line.420"></a>
<FONT color="green">421</FONT>                                    }<a name="line.421"></a>
<FONT color="green">422</FONT>                                    return null;<a name="line.422"></a>
<FONT color="green">423</FONT>                            }<a name="line.423"></a>
<FONT color="green">424</FONT>                    }<a name="line.424"></a>
<FONT color="green">425</FONT>                    <a name="line.425"></a>
<FONT color="green">426</FONT>                    /**<a name="line.426"></a>
<FONT color="green">427</FONT>                    For messages of type SET_METADATA that alert participants to changes to the associated Conversation's metadata, indicates which metadata property changed and its P_BODY_XML property contains the changed data. Your UI is expected to detect messages with PARAM_KEY set and to update its visual representation of Conversation accordingly. &lt;br&gt;You can use the associated Conversation's properties and methods to obtain the updated metadata rather than parse the message body XML, for example, Conversation.P_META_PICTURE and Conversation.Conversation.GetPropMetaPicture. &lt;br&gt; */<a name="line.427"></a>
<FONT color="green">428</FONT>                    public enum SET_METADATA_KEY {<a name="line.428"></a>
<FONT color="green">429</FONT>                    <a name="line.429"></a>
<FONT color="green">430</FONT>                            /** Notification message that conversation name has changed. &lt;br&gt;*/<a name="line.430"></a>
<FONT color="green">431</FONT>                            SET_META_NAME(3640),<a name="line.431"></a>
<FONT color="green">432</FONT>                            <a name="line.432"></a>
<FONT color="green">433</FONT>                            /** Notification message that conversation topic has changed. &lt;br&gt;*/<a name="line.433"></a>
<FONT color="green">434</FONT>                            SET_META_TOPIC(3644),<a name="line.434"></a>
<FONT color="green">435</FONT>                            <a name="line.435"></a>
<FONT color="green">436</FONT>                            /** Notification message that conversation guidelines have changed. &lt;br&gt;*/<a name="line.436"></a>
<FONT color="green">437</FONT>                            SET_META_GUIDELINES(3652),<a name="line.437"></a>
<FONT color="green">438</FONT>                            <a name="line.438"></a>
<FONT color="green">439</FONT>                            /** Notification message that conversation picture has changed. &lt;br&gt;*/<a name="line.439"></a>
<FONT color="green">440</FONT>                            SET_META_PICTURE(3658);<a name="line.440"></a>
<FONT color="green">441</FONT>                            <a name="line.441"></a>
<FONT color="green">442</FONT>                            private static final Map&lt;Integer,SET_METADATA_KEY&gt; lookup = new HashMap&lt;Integer,SET_METADATA_KEY&gt;();<a name="line.442"></a>
<FONT color="green">443</FONT>                            <a name="line.443"></a>
<FONT color="green">444</FONT>                            static {<a name="line.444"></a>
<FONT color="green">445</FONT>                                    for(SET_METADATA_KEY s : EnumSet.allOf(SET_METADATA_KEY.class))<a name="line.445"></a>
<FONT color="green">446</FONT>                                            lookup.put(s.getId(), s);<a name="line.446"></a>
<FONT color="green">447</FONT>                            }<a name="line.447"></a>
<FONT color="green">448</FONT>                            <a name="line.448"></a>
<FONT color="green">449</FONT>                            private final int id;<a name="line.449"></a>
<FONT color="green">450</FONT>                            <a name="line.450"></a>
<FONT color="green">451</FONT>                            private SET_METADATA_KEY(int value) {<a name="line.451"></a>
<FONT color="green">452</FONT>                                    this.id = value;<a name="line.452"></a>
<FONT color="green">453</FONT>                            }<a name="line.453"></a>
<FONT color="green">454</FONT>                            <a name="line.454"></a>
<FONT color="green">455</FONT>                            public int getId() { return id; }<a name="line.455"></a>
<FONT color="green">456</FONT>                            <a name="line.456"></a>
<FONT color="green">457</FONT>                            public static SET_METADATA_KEY get(int code) {<a name="line.457"></a>
<FONT color="green">458</FONT>                                    return lookup.get(code);<a name="line.458"></a>
<FONT color="green">459</FONT>                            }<a name="line.459"></a>
<FONT color="green">460</FONT>                            <a name="line.460"></a>
<FONT color="green">461</FONT>                            public static SET_METADATA_KEY fromString(String s) {<a name="line.461"></a>
<FONT color="green">462</FONT>                                    for (SET_METADATA_KEY p : lookup.values()) {<a name="line.462"></a>
<FONT color="green">463</FONT>                                            if (p.toString() == s) {<a name="line.463"></a>
<FONT color="green">464</FONT>                                                    return p;<a name="line.464"></a>
<FONT color="green">465</FONT>                                            }<a name="line.465"></a>
<FONT color="green">466</FONT>                                    }<a name="line.466"></a>
<FONT color="green">467</FONT>                                    return null;<a name="line.467"></a>
<FONT color="green">468</FONT>                            }<a name="line.468"></a>
<FONT color="green">469</FONT>                    }<a name="line.469"></a>
<FONT color="green">470</FONT>                    <a name="line.470"></a>
<FONT color="green">471</FONT>                    /**<a name="line.471"></a>
<FONT color="green">472</FONT>                    Indicates the reason a user could not join or left a Conversation. SkypeKit automatically sets "could not join"-related values. "Left voluntarily"-related values are set as a result of explicit user actions. &lt;br&gt; */<a name="line.472"></a>
<FONT color="green">473</FONT>                    public enum LEAVEREASON {<a name="line.473"></a>
<FONT color="green">474</FONT>                    <a name="line.474"></a>
<FONT color="green">475</FONT>                            /** User cannot chat (user is currently logged in with a client that has chat disabled - see Contact.CAPABILITY.CAPABILITY_TEXT) &lt;br&gt;*/<a name="line.475"></a>
<FONT color="green">476</FONT>                            USER_INCAPABLE(2),<a name="line.476"></a>
<FONT color="green">477</FONT>                            <a name="line.477"></a>
<FONT color="green">478</FONT>                            /** Attempt to add local user to a conversation by an unknown contact &lt;br&gt;*/<a name="line.478"></a>
<FONT color="green">479</FONT>                            ADDER_MUST_BE_FRIEND(3),<a name="line.479"></a>
<FONT color="green">480</FONT>                            <a name="line.480"></a>
<FONT color="green">481</FONT>                            /** Attempt to add local user to a conversation by an unauthorized contact &lt;br&gt;*/<a name="line.481"></a>
<FONT color="green">482</FONT>                            ADDER_MUST_BE_AUTHORIZED(4),<a name="line.482"></a>
<FONT color="green">483</FONT>                            <a name="line.483"></a>
<FONT color="green">484</FONT>                            /** Local user declined an "invitation" to join a chat &lt;br&gt;*/<a name="line.484"></a>
<FONT color="green">485</FONT>                            DECLINE_ADD(5),<a name="line.485"></a>
<FONT color="green">486</FONT>                            <a name="line.486"></a>
<FONT color="green">487</FONT>                            /** User decided to end participation in an on-going multi-chat &lt;br&gt;*/<a name="line.487"></a>
<FONT color="green">488</FONT>                            UNSUBSCRIBE(6);<a name="line.488"></a>
<FONT color="green">489</FONT>                            <a name="line.489"></a>
<FONT color="green">490</FONT>                            private static final Map&lt;Integer,LEAVEREASON&gt; lookup = new HashMap&lt;Integer,LEAVEREASON&gt;();<a name="line.490"></a>
<FONT color="green">491</FONT>                            <a name="line.491"></a>
<FONT color="green">492</FONT>                            static {<a name="line.492"></a>
<FONT color="green">493</FONT>                                    for(LEAVEREASON s : EnumSet.allOf(LEAVEREASON.class))<a name="line.493"></a>
<FONT color="green">494</FONT>                                            lookup.put(s.getId(), s);<a name="line.494"></a>
<FONT color="green">495</FONT>                            }<a name="line.495"></a>
<FONT color="green">496</FONT>                            <a name="line.496"></a>
<FONT color="green">497</FONT>                            private final int id;<a name="line.497"></a>
<FONT color="green">498</FONT>                            <a name="line.498"></a>
<FONT color="green">499</FONT>                            private LEAVEREASON(int value) {<a name="line.499"></a>
<FONT color="green">500</FONT>                                    this.id = value;<a name="line.500"></a>
<FONT color="green">501</FONT>                            }<a name="line.501"></a>
<FONT color="green">502</FONT>                            <a name="line.502"></a>
<FONT color="green">503</FONT>                            public int getId() { return id; }<a name="line.503"></a>
<FONT color="green">504</FONT>                            <a name="line.504"></a>
<FONT color="green">505</FONT>                            public static LEAVEREASON get(int code) {<a name="line.505"></a>
<FONT color="green">506</FONT>                                    return lookup.get(code);<a name="line.506"></a>
<FONT color="green">507</FONT>                            }<a name="line.507"></a>
<FONT color="green">508</FONT>                            <a name="line.508"></a>
<FONT color="green">509</FONT>                            public static LEAVEREASON fromString(String s) {<a name="line.509"></a>
<FONT color="green">510</FONT>                                    for (LEAVEREASON p : lookup.values()) {<a name="line.510"></a>
<FONT color="green">511</FONT>                                            if (p.toString() == s) {<a name="line.511"></a>
<FONT color="green">512</FONT>                                                    return p;<a name="line.512"></a>
<FONT color="green">513</FONT>                                            }<a name="line.513"></a>
<FONT color="green">514</FONT>                                    }<a name="line.514"></a>
<FONT color="green">515</FONT>                                    return null;<a name="line.515"></a>
<FONT color="green">516</FONT>                            }<a name="line.516"></a>
<FONT color="green">517</FONT>                    }<a name="line.517"></a>
<FONT color="green">518</FONT>                    <a name="line.518"></a>
<FONT color="green">519</FONT>                    /**<a name="line.519"></a>
<FONT color="green">520</FONT>                     *For Message types having a body, determines whether that body is editable by the user.  &lt;br&gt;<a name="line.520"></a>
<FONT color="green">521</FONT>                     * @return result<a name="line.521"></a>
<FONT color="green">522</FONT>                     */<a name="line.522"></a>
<FONT color="green">523</FONT>                    public boolean CanEdit() {<a name="line.523"></a>
<FONT color="green">524</FONT>                    <a name="line.524"></a>
<FONT color="green">525</FONT>                            Request request = null;<a name="line.525"></a>
<FONT color="green">526</FONT>                            try {<a name="line.526"></a>
<FONT color="green">527</FONT>                                    request = new XCallRequest(9,1);<a name="line.527"></a>
<FONT color="green">528</FONT>                            } catch (IOException e) {<a name="line.528"></a>
<FONT color="green">529</FONT>                                    e.printStackTrace();<a name="line.529"></a>
<FONT color="green">530</FONT>                                    if (skype.errorListener != null)<a name="line.530"></a>
<FONT color="green">531</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.531"></a>
<FONT color="green">532</FONT>                            }<a name="line.532"></a>
<FONT color="green">533</FONT>                            request.addParm('O',0,mObjectId);<a name="line.533"></a>
<FONT color="green">534</FONT>                            <a name="line.534"></a>
<FONT color="green">535</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.535"></a>
<FONT color="green">536</FONT>                            <a name="line.536"></a>
<FONT color="green">537</FONT>                            if (r.isErrCall())<a name="line.537"></a>
<FONT color="green">538</FONT>                                    return false;<a name="line.538"></a>
<FONT color="green">539</FONT>                                    <a name="line.539"></a>
<FONT color="green">540</FONT>                            boolean result = false;<a name="line.540"></a>
<FONT color="green">541</FONT>                            result = r.GetAsBoolean(1);<a name="line.541"></a>
<FONT color="green">542</FONT>                            return result;<a name="line.542"></a>
<FONT color="green">543</FONT>                    }<a name="line.543"></a>
<FONT color="green">544</FONT>                    <a name="line.544"></a>
<FONT color="green">545</FONT>                    /**<a name="line.545"></a>
<FONT color="green">546</FONT>                     *For Message types that include a body and are editable:  &lt;br&gt; - alters BODY_XML of the message object &lt;br&gt; - sets EDITED_BY and EDIT_TIMESTAMP properties  &lt;br&gt; - propagates the changes to remote users. &lt;br&gt;<a name="line.546"></a>
<FONT color="green">547</FONT>                     * @param newText New value of the message BODY_XML property. &lt;br&gt;<a name="line.547"></a>
<FONT color="green">548</FONT>                     * @param isXML Specify isXML as true if the message body is formatted as XML; omit it or specify it as false if the message body is plain text. &lt;br&gt;<a name="line.548"></a>
<FONT color="green">549</FONT>                     * @param undo Reverts the message body to the original version. newText argument is ignored when this is set. &lt;br&gt;<a name="line.549"></a>
<FONT color="green">550</FONT>                     */<a name="line.550"></a>
<FONT color="green">551</FONT>                    public void Edit( String newText, boolean isXML, boolean undo) {<a name="line.551"></a>
<FONT color="green">552</FONT>                    <a name="line.552"></a>
<FONT color="green">553</FONT>                            Request request = null;<a name="line.553"></a>
<FONT color="green">554</FONT>                            try {<a name="line.554"></a>
<FONT color="green">555</FONT>                                    request = new XCallRequest(9,2);<a name="line.555"></a>
<FONT color="green">556</FONT>                            } catch (IOException e) {<a name="line.556"></a>
<FONT color="green">557</FONT>                                    e.printStackTrace();<a name="line.557"></a>
<FONT color="green">558</FONT>                                    if (skype.errorListener != null)<a name="line.558"></a>
<FONT color="green">559</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.559"></a>
<FONT color="green">560</FONT>                            }<a name="line.560"></a>
<FONT color="green">561</FONT>                            request.addParm('O',0,mObjectId);<a name="line.561"></a>
<FONT color="green">562</FONT>                            request.addParm('S',1,newText);<a name="line.562"></a>
<FONT color="green">563</FONT>                            request.addParm('b',2,isXML);<a name="line.563"></a>
<FONT color="green">564</FONT>                            request.addParm('b',3,undo);<a name="line.564"></a>
<FONT color="green">565</FONT>                            <a name="line.565"></a>
<FONT color="green">566</FONT>                            skype.XCall((XCallRequest)request);<a name="line.566"></a>
<FONT color="green">567</FONT>                    }<a name="line.567"></a>
<FONT color="green">568</FONT>                    <a name="line.568"></a>
<FONT color="green">569</FONT>                    /**<a name="line.569"></a>
<FONT color="green">570</FONT>                     *For messages of type POSTED_CONTACTS, parses the body XML and formats the data as a list of Contact instances. &lt;br&gt;<a name="line.570"></a>
<FONT color="green">571</FONT>                     * @return contacts<a name="line.571"></a>
<FONT color="green">572</FONT>                     */<a name="line.572"></a>
<FONT color="green">573</FONT>                    public Contact [] GetContacts() {<a name="line.573"></a>
<FONT color="green">574</FONT>                    <a name="line.574"></a>
<FONT color="green">575</FONT>                            Request request = null;<a name="line.575"></a>
<FONT color="green">576</FONT>                            try {<a name="line.576"></a>
<FONT color="green">577</FONT>                                    request = new XCallRequest(9,3);<a name="line.577"></a>
<FONT color="green">578</FONT>                            } catch (IOException e) {<a name="line.578"></a>
<FONT color="green">579</FONT>                                    e.printStackTrace();<a name="line.579"></a>
<FONT color="green">580</FONT>                                    if (skype.errorListener != null)<a name="line.580"></a>
<FONT color="green">581</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.581"></a>
<FONT color="green">582</FONT>                            }<a name="line.582"></a>
<FONT color="green">583</FONT>                            request.addParm('O',0,mObjectId);<a name="line.583"></a>
<FONT color="green">584</FONT>                            <a name="line.584"></a>
<FONT color="green">585</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.585"></a>
<FONT color="green">586</FONT>                            <a name="line.586"></a>
<FONT color="green">587</FONT>                            if (r.isErrCall())<a name="line.587"></a>
<FONT color="green">588</FONT>                                    return null;<a name="line.588"></a>
<FONT color="green">589</FONT>                                    <a name="line.589"></a>
<FONT color="green">590</FONT>                            Vector&lt;Contact&gt; contacts = new Vector&lt;Contact&gt;();<a name="line.590"></a>
<FONT color="green">591</FONT>                            while (r.HasMore(1))<a name="line.591"></a>
<FONT color="green">592</FONT>                            {<a name="line.592"></a>
<FONT color="green">593</FONT>                                    int oid = 0;<a name="line.593"></a>
<FONT color="green">594</FONT>                                    Contact contact = null;<a name="line.594"></a>
<FONT color="green">595</FONT>                                    oid = r.GetOid(1);<a name="line.595"></a>
<FONT color="green">596</FONT>                                    if (oid != AbstractDecoder.NULL_VALUE) { <a name="line.596"></a>
<FONT color="green">597</FONT>                                            contact = (Contact)skype.factory(Contact.moduleID(), oid, skype);<a name="line.597"></a>
<FONT color="green">598</FONT>                                    }<a name="line.598"></a>
<FONT color="green">599</FONT>                                    contacts.add(contact);<a name="line.599"></a>
<FONT color="green">600</FONT>                            }<a name="line.600"></a>
<FONT color="green">601</FONT>                            return contacts.toArray(new Contact[contacts.size()]);<a name="line.601"></a>
<FONT color="green">602</FONT>                            <a name="line.602"></a>
<FONT color="green">603</FONT>                    }<a name="line.603"></a>
<FONT color="green">604</FONT>                    <a name="line.604"></a>
<FONT color="green">605</FONT>                    /**<a name="line.605"></a>
<FONT color="green">606</FONT>                     *For messages of type POSTED_FILES, parses the body XML and creates a list of Transfer instances. &lt;br&gt;<a name="line.606"></a>
<FONT color="green">607</FONT>                     * @return transfers<a name="line.607"></a>
<FONT color="green">608</FONT>                     */<a name="line.608"></a>
<FONT color="green">609</FONT>                    public Transfer [] GetTransfers() {<a name="line.609"></a>
<FONT color="green">610</FONT>                    <a name="line.610"></a>
<FONT color="green">611</FONT>                            Request request = null;<a name="line.611"></a>
<FONT color="green">612</FONT>                            try {<a name="line.612"></a>
<FONT color="green">613</FONT>                                    request = new XCallRequest(9,4);<a name="line.613"></a>
<FONT color="green">614</FONT>                            } catch (IOException e) {<a name="line.614"></a>
<FONT color="green">615</FONT>                                    e.printStackTrace();<a name="line.615"></a>
<FONT color="green">616</FONT>                                    if (skype.errorListener != null)<a name="line.616"></a>
<FONT color="green">617</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.617"></a>
<FONT color="green">618</FONT>                            }<a name="line.618"></a>
<FONT color="green">619</FONT>                            request.addParm('O',0,mObjectId);<a name="line.619"></a>
<FONT color="green">620</FONT>                            <a name="line.620"></a>
<FONT color="green">621</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.621"></a>
<FONT color="green">622</FONT>                            <a name="line.622"></a>
<FONT color="green">623</FONT>                            if (r.isErrCall())<a name="line.623"></a>
<FONT color="green">624</FONT>                                    return null;<a name="line.624"></a>
<FONT color="green">625</FONT>                                    <a name="line.625"></a>
<FONT color="green">626</FONT>                            Vector&lt;Transfer&gt; transfers = new Vector&lt;Transfer&gt;();<a name="line.626"></a>
<FONT color="green">627</FONT>                            while (r.HasMore(1))<a name="line.627"></a>
<FONT color="green">628</FONT>                            {<a name="line.628"></a>
<FONT color="green">629</FONT>                                    int oid = 0;<a name="line.629"></a>
<FONT color="green">630</FONT>                                    Transfer transfer = null;<a name="line.630"></a>
<FONT color="green">631</FONT>                                    oid = r.GetOid(1);<a name="line.631"></a>
<FONT color="green">632</FONT>                                    if (oid != AbstractDecoder.NULL_VALUE) { <a name="line.632"></a>
<FONT color="green">633</FONT>                                            transfer = (Transfer)skype.factory(Transfer.moduleID(), oid, skype);<a name="line.633"></a>
<FONT color="green">634</FONT>                                    }<a name="line.634"></a>
<FONT color="green">635</FONT>                                    transfers.add(transfer);<a name="line.635"></a>
<FONT color="green">636</FONT>                            }<a name="line.636"></a>
<FONT color="green">637</FONT>                            return transfers.toArray(new Transfer[transfers.size()]);<a name="line.637"></a>
<FONT color="green">638</FONT>                            <a name="line.638"></a>
<FONT color="green">639</FONT>                    }<a name="line.639"></a>
<FONT color="green">640</FONT>                    <a name="line.640"></a>
<FONT color="green">641</FONT>                    /**<a name="line.641"></a>
<FONT color="green">642</FONT>                     *For messages of type POSTED_VOICE_MESSAGE, parses the body XML and creates a Voicemail instance. &lt;br&gt;<a name="line.642"></a>
<FONT color="green">643</FONT>                     * @return voicemail<a name="line.643"></a>
<FONT color="green">644</FONT>                     */<a name="line.644"></a>
<FONT color="green">645</FONT>                    public Voicemail GetVoiceMessage() {<a name="line.645"></a>
<FONT color="green">646</FONT>                    <a name="line.646"></a>
<FONT color="green">647</FONT>                            Request request = null;<a name="line.647"></a>
<FONT color="green">648</FONT>                            try {<a name="line.648"></a>
<FONT color="green">649</FONT>                                    request = new XCallRequest(9,5);<a name="line.649"></a>
<FONT color="green">650</FONT>                            } catch (IOException e) {<a name="line.650"></a>
<FONT color="green">651</FONT>                                    e.printStackTrace();<a name="line.651"></a>
<FONT color="green">652</FONT>                                    if (skype.errorListener != null)<a name="line.652"></a>
<FONT color="green">653</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.653"></a>
<FONT color="green">654</FONT>                            }<a name="line.654"></a>
<FONT color="green">655</FONT>                            request.addParm('O',0,mObjectId);<a name="line.655"></a>
<FONT color="green">656</FONT>                            <a name="line.656"></a>
<FONT color="green">657</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.657"></a>
<FONT color="green">658</FONT>                            <a name="line.658"></a>
<FONT color="green">659</FONT>                            if (r.isErrCall())<a name="line.659"></a>
<FONT color="green">660</FONT>                                    return null;<a name="line.660"></a>
<FONT color="green">661</FONT>                                    <a name="line.661"></a>
<FONT color="green">662</FONT>                            int oid = 0;<a name="line.662"></a>
<FONT color="green">663</FONT>                            Voicemail voicemail = null;<a name="line.663"></a>
<FONT color="green">664</FONT>                            oid = r.GetOid(1);<a name="line.664"></a>
<FONT color="green">665</FONT>                            if (oid != AbstractDecoder.NULL_VALUE) {<a name="line.665"></a>
<FONT color="green">666</FONT>                                    voicemail = (Voicemail)skype.factory(Voicemail.moduleID(), oid, skype);<a name="line.666"></a>
<FONT color="green">667</FONT>                            }<a name="line.667"></a>
<FONT color="green">668</FONT>                            return voicemail;<a name="line.668"></a>
<FONT color="green">669</FONT>                    }<a name="line.669"></a>
<FONT color="green">670</FONT>                    <a name="line.670"></a>
<FONT color="green">671</FONT>                    /**<a name="line.671"></a>
<FONT color="green">672</FONT>                     *For messages of type POSTED_SMS, parses the body XML and creates an SMS instances &lt;br&gt;<a name="line.672"></a>
<FONT color="green">673</FONT>                     * @return sms<a name="line.673"></a>
<FONT color="green">674</FONT>                     */<a name="line.674"></a>
<FONT color="green">675</FONT>                    public Sms GetSMS() {<a name="line.675"></a>
<FONT color="green">676</FONT>                    <a name="line.676"></a>
<FONT color="green">677</FONT>                            Request request = null;<a name="line.677"></a>
<FONT color="green">678</FONT>                            try {<a name="line.678"></a>
<FONT color="green">679</FONT>                                    request = new XCallRequest(9,6);<a name="line.679"></a>
<FONT color="green">680</FONT>                            } catch (IOException e) {<a name="line.680"></a>
<FONT color="green">681</FONT>                                    e.printStackTrace();<a name="line.681"></a>
<FONT color="green">682</FONT>                                    if (skype.errorListener != null)<a name="line.682"></a>
<FONT color="green">683</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.683"></a>
<FONT color="green">684</FONT>                            }<a name="line.684"></a>
<FONT color="green">685</FONT>                            request.addParm('O',0,mObjectId);<a name="line.685"></a>
<FONT color="green">686</FONT>                            <a name="line.686"></a>
<FONT color="green">687</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.687"></a>
<FONT color="green">688</FONT>                            <a name="line.688"></a>
<FONT color="green">689</FONT>                            if (r.isErrCall())<a name="line.689"></a>
<FONT color="green">690</FONT>                                    return null;<a name="line.690"></a>
<FONT color="green">691</FONT>                                    <a name="line.691"></a>
<FONT color="green">692</FONT>                            int oid = 0;<a name="line.692"></a>
<FONT color="green">693</FONT>                            Sms sms = null;<a name="line.693"></a>
<FONT color="green">694</FONT>                            oid = r.GetOid(1);<a name="line.694"></a>
<FONT color="green">695</FONT>                            if (oid != AbstractDecoder.NULL_VALUE) {<a name="line.695"></a>
<FONT color="green">696</FONT>                                    sms = (Sms)skype.factory(Sms.moduleID(), oid, skype);<a name="line.696"></a>
<FONT color="green">697</FONT>                            }<a name="line.697"></a>
<FONT color="green">698</FONT>                            return sms;<a name="line.698"></a>
<FONT color="green">699</FONT>                    }<a name="line.699"></a>
<FONT color="green">700</FONT>                    <a name="line.700"></a>
<FONT color="green">701</FONT>                    /**<a name="line.701"></a>
<FONT color="green">702</FONT>                     *Deletes this message from the local database. These deletions do not propagate to the other Skype instances that the user may have on other computers. Nor do they affect other participants that have the same message. This method is specifically from removing Message objects from the database - not for removing Messages from conversations. To remove a Message from a conversation, use Message.Edit method to replace the existing body text with an empty string. &lt;br&gt;<a name="line.702"></a>
<FONT color="green">703</FONT>                     */<a name="line.703"></a>
<FONT color="green">704</FONT>                    public void DeleteLocally() {<a name="line.704"></a>
<FONT color="green">705</FONT>                    <a name="line.705"></a>
<FONT color="green">706</FONT>                            Request request = null;<a name="line.706"></a>
<FONT color="green">707</FONT>                            try {<a name="line.707"></a>
<FONT color="green">708</FONT>                                    request = new XCallRequest(9,8);<a name="line.708"></a>
<FONT color="green">709</FONT>                            } catch (IOException e) {<a name="line.709"></a>
<FONT color="green">710</FONT>                                    e.printStackTrace();<a name="line.710"></a>
<FONT color="green">711</FONT>                                    if (skype.errorListener != null)<a name="line.711"></a>
<FONT color="green">712</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.712"></a>
<FONT color="green">713</FONT>                            }<a name="line.713"></a>
<FONT color="green">714</FONT>                            request.addParm('O',0,mObjectId);<a name="line.714"></a>
<FONT color="green">715</FONT>                            <a name="line.715"></a>
<FONT color="green">716</FONT>                            skype.XCall((XCallRequest)request);<a name="line.716"></a>
<FONT color="green">717</FONT>                    }<a name="line.717"></a>
<FONT color="green">718</FONT>                    <a name="line.718"></a>
<FONT color="green">719</FONT>            <a name="line.719"></a>
<FONT color="green">720</FONT>            }<a name="line.720"></a>




























































</PRE>
</BODY>
</HTML>
