<HTML>
<BODY BGCOLOR="white">
<PRE>
<FONT color="green">001</FONT>    package com.skype.api;<a name="line.1"></a>
<FONT color="green">002</FONT>    <a name="line.2"></a>
<FONT color="green">003</FONT>    import java.io.IOException;<a name="line.3"></a>
<FONT color="green">004</FONT>    import java.util.*;<a name="line.4"></a>
<FONT color="green">005</FONT>    import com.skype.ipc.*;<a name="line.5"></a>
<FONT color="green">006</FONT>    /**<a name="line.6"></a>
<FONT color="green">007</FONT>     * Address book entry. Encapsulates methods like GetType, GetIdentity, GetAvatar, SendAuthRequest, OpenConversation etc. Single contact can have additional phone numbers attached to it (ASSIGNED_PHONE1 .. ASSIGNED_PHONE3). Note that in the context of a conversation, Contacts are represented by Participant objects. Contact member functions all return a Boolean indicating the success (true) or failure (false) of processing the request itself (transport, runtime availability, and so forth)?not the success or failure of its associated functionality. For example, Contact.IsMemberOf returns true if it was able to make a determination, and its result parameter reflects whether this Contact is a member of the target group. Similarly, Contact.IsMemberOf returns false if it was unable to make a determination, and the value of its result parameter is undefined. &lt;br&gt;<a name="line.7"></a>
<FONT color="green">008</FONT>     */<a name="line.8"></a>
<FONT color="green">009</FONT>    <a name="line.9"></a>
<FONT color="green">010</FONT>    <a name="line.10"></a>
<FONT color="green">011</FONT>    public class Contact extends SkypeObject {<a name="line.11"></a>
<FONT color="green">012</FONT>    <a name="line.12"></a>
<FONT color="green">013</FONT>    <a name="line.13"></a>
<FONT color="green">014</FONT>            public interface ContactListener {<a name="line.14"></a>
<FONT color="green">015</FONT>                    /** This event gets called when there are changes to Contact properties defined in Contact.PROPERTY  */<a name="line.15"></a>
<FONT color="green">016</FONT>                    public void OnPropertyChange(SkypeObject obj, PROPERTY prop, Object value);<a name="line.16"></a>
<FONT color="green">017</FONT>                    <a name="line.17"></a>
<FONT color="green">018</FONT>            }<a name="line.18"></a>
<FONT color="green">019</FONT>            <a name="line.19"></a>
<FONT color="green">020</FONT>            public Contact(int oid, Skype skype) {<a name="line.20"></a>
<FONT color="green">021</FONT>                    super(oid,skype);<a name="line.21"></a>
<FONT color="green">022</FONT>                    /**get default properties for this module **/<a name="line.22"></a>
<FONT color="green">023</FONT>                    GetDefaultProps();<a name="line.23"></a>
<FONT color="green">024</FONT>            }<a name="line.24"></a>
<FONT color="green">025</FONT>            <a name="line.25"></a>
<FONT color="green">026</FONT>            private static final int MODULE_ID = 2;<a name="line.26"></a>
<FONT color="green">027</FONT>            <a name="line.27"></a>
<FONT color="green">028</FONT>            public static final int moduleID() {<a name="line.28"></a>
<FONT color="green">029</FONT>                    return MODULE_ID;<a name="line.29"></a>
<FONT color="green">030</FONT>            }<a name="line.30"></a>
<FONT color="green">031</FONT>            <a name="line.31"></a>
<FONT color="green">032</FONT>            /** Properties of the Contact class */<a name="line.32"></a>
<FONT color="green">033</FONT>            public enum PROPERTY {<a name="line.33"></a>
<FONT color="green">034</FONT>            <a name="line.34"></a>
<FONT color="green">035</FONT>                    /** type: Contact.TYPE */<a name="line.35"></a>
<FONT color="green">036</FONT>                    type(202),<a name="line.36"></a>
<FONT color="green">037</FONT>                    <a name="line.37"></a>
<FONT color="green">038</FONT>                    /** defined if it is a SKYPE contact, type: String */<a name="line.38"></a>
<FONT color="green">039</FONT>                    skypename(4),<a name="line.39"></a>
<FONT color="green">040</FONT>                    <a name="line.40"></a>
<FONT color="green">041</FONT>                    /** type: String */<a name="line.41"></a>
<FONT color="green">042</FONT>                    pstnnumber(6),<a name="line.42"></a>
<FONT color="green">043</FONT>                    <a name="line.43"></a>
<FONT color="green">044</FONT>                    /** type: String */<a name="line.44"></a>
<FONT color="green">045</FONT>                    fullname(5),<a name="line.45"></a>
<FONT color="green">046</FONT>                    <a name="line.46"></a>
<FONT color="green">047</FONT>                    /** integer of YYYYMMDD format, type: int */<a name="line.47"></a>
<FONT color="green">048</FONT>                    birthday(7),<a name="line.48"></a>
<FONT color="green">049</FONT>                    <a name="line.49"></a>
<FONT color="green">050</FONT>                    /** 1-male, 2-female, type: int */<a name="line.50"></a>
<FONT color="green">051</FONT>                    gender(8),<a name="line.51"></a>
<FONT color="green">052</FONT>                    <a name="line.52"></a>
<FONT color="green">053</FONT>                    /** ISO language code list, space separated, type: String */<a name="line.53"></a>
<FONT color="green">054</FONT>                    languages(9),<a name="line.54"></a>
<FONT color="green">055</FONT>                    <a name="line.55"></a>
<FONT color="green">056</FONT>                    /** ISO country code, type: String */<a name="line.56"></a>
<FONT color="green">057</FONT>                    country(10),<a name="line.57"></a>
<FONT color="green">058</FONT>                    <a name="line.58"></a>
<FONT color="green">059</FONT>                    /** type: String */<a name="line.59"></a>
<FONT color="green">060</FONT>                    province(11),<a name="line.60"></a>
<FONT color="green">061</FONT>                    <a name="line.61"></a>
<FONT color="green">062</FONT>                    /** type: String */<a name="line.62"></a>
<FONT color="green">063</FONT>                    city(12),<a name="line.63"></a>
<FONT color="green">064</FONT>                    <a name="line.64"></a>
<FONT color="green">065</FONT>                    /** This corresponds to the Account.P_PHONE_HOME property. The value is set by the remote user in Account profile. As Contact property, this is read-only. &lt;br&gt;, type: String */<a name="line.65"></a>
<FONT color="green">066</FONT>                    phone_home(13),<a name="line.66"></a>
<FONT color="green">067</FONT>                    <a name="line.67"></a>
<FONT color="green">068</FONT>                    /** This corresponds to the Account.P_PHONE_OFFICE property. The value is set by the remote user in Account profile. As Contact property, this is read-only. If the Contact has not populated his Account profile with sufficient phone numbers, the UI should implement locally adding additional phone numbers to Contact P_ASSIGNED_PHONE1 .. P_ASSIGNED_PHONE3 properties (and corresponding labels). See Contact.SetPhoneNumber method for more information. &lt;br&gt;, type: String */<a name="line.68"></a>
<FONT color="green">069</FONT>                    phone_office(14),<a name="line.69"></a>
<FONT color="green">070</FONT>                    <a name="line.70"></a>
<FONT color="green">071</FONT>                    /** This corresponds to the Account.P_PHONE_MOBILE property. The value is set by the remote user in Account profile. As Contact property, this is read-only. &lt;br&gt;, type: String */<a name="line.71"></a>
<FONT color="green">072</FONT>                    phone_mobile(15),<a name="line.72"></a>
<FONT color="green">073</FONT>                    <a name="line.73"></a>
<FONT color="green">074</FONT>                    /** will be hashed before advertising/querying, space separated, type: String */<a name="line.74"></a>
<FONT color="green">075</FONT>                    emails(16),<a name="line.75"></a>
<FONT color="green">076</FONT>                    <a name="line.76"></a>
<FONT color="green">077</FONT>                    /** type: String */<a name="line.77"></a>
<FONT color="green">078</FONT>                    homepage(17),<a name="line.78"></a>
<FONT color="green">079</FONT>                    <a name="line.79"></a>
<FONT color="green">080</FONT>                    /** arbitrary introductory text, type: String */<a name="line.80"></a>
<FONT color="green">081</FONT>                    about(18),<a name="line.81"></a>
<FONT color="green">082</FONT>                    <a name="line.82"></a>
<FONT color="green">083</FONT>                    /** Contact avatar pictures are in JPG format. The original size of avatar pictures are in no more than 96 x 96 pixels in size. However, as they can be smaller, scaling the pictures up too much to fit your UI can lead to distorted images. &lt;br&gt;, type: byte[] */<a name="line.83"></a>
<FONT color="green">084</FONT>                    avatar_image(37),<a name="line.84"></a>
<FONT color="green">085</FONT>                    <a name="line.85"></a>
<FONT color="green">086</FONT>                    /** Personal mood message (visible to authorized users only).  &lt;br&gt;, type: String */<a name="line.86"></a>
<FONT color="green">087</FONT>                    mood_text(26),<a name="line.87"></a>
<FONT color="green">088</FONT>                    <a name="line.88"></a>
<FONT color="green">089</FONT>                    /** XML version of personal mood text, type: String */<a name="line.89"></a>
<FONT color="green">090</FONT>                    rich_mood_text(205),<a name="line.90"></a>
<FONT color="green">091</FONT>                    <a name="line.91"></a>
<FONT color="green">092</FONT>                    /** 24*3600+diff_to_UTC_in_seconds. NB! changes with DST &lt;br&gt;, type: int */<a name="line.92"></a>
<FONT color="green">093</FONT>                    timezone(27),<a name="line.93"></a>
<FONT color="green">094</FONT>                    <a name="line.94"></a>
<FONT color="green">095</FONT>                    /** binary tag that can be queried via Contact.HasCapability(), type: byte[] */<a name="line.95"></a>
<FONT color="green">096</FONT>                    capabilities(36),<a name="line.96"></a>
<FONT color="green">097</FONT>                    <a name="line.97"></a>
<FONT color="green">098</FONT>                    /** UNIX timestamp of last profile change, type: int */<a name="line.98"></a>
<FONT color="green">099</FONT>                    profile_timestamp(19),<a name="line.99"></a>
<FONT color="green">100</FONT>                    <a name="line.100"></a>
<FONT color="green">101</FONT>                    /** count of this user's authorized contacts &lt;br&gt;, type: int */<a name="line.101"></a>
<FONT color="green">102</FONT>                    nrof_authed_buddies(28),<a name="line.102"></a>
<FONT color="green">103</FONT>                    <a name="line.103"></a>
<FONT color="green">104</FONT>                    /** ISO country code assigned by the IP, type: String */<a name="line.104"></a>
<FONT color="green">105</FONT>                    ipcountry(29),<a name="line.105"></a>
<FONT color="green">106</FONT>                    <a name="line.106"></a>
<FONT color="green">107</FONT>                    /** UNIX timestamp of when current avatar was set, type: int */<a name="line.107"></a>
<FONT color="green">108</FONT>                    avatar_timestamp(182),<a name="line.108"></a>
<FONT color="green">109</FONT>                    <a name="line.109"></a>
<FONT color="green">110</FONT>                    /** NOT SET FOR CONTACTS. For Account object, UNIX timestamp of when current mood was set, type: int */<a name="line.110"></a>
<FONT color="green">111</FONT>                    mood_timestamp(183),<a name="line.111"></a>
<FONT color="green">112</FONT>                    <a name="line.112"></a>
<FONT color="green">113</FONT>                    /** set if the contact is waiting to be authorized. The value contains auth. request text &lt;br&gt;, type: String */<a name="line.113"></a>
<FONT color="green">114</FONT>                    received_authrequest(20),<a name="line.114"></a>
<FONT color="green">115</FONT>                    <a name="line.115"></a>
<FONT color="green">116</FONT>                    /** timestamp of last received auth-request, type: int */<a name="line.116"></a>
<FONT color="green">117</FONT>                    authreq_timestamp(25),<a name="line.117"></a>
<FONT color="green">118</FONT>                    <a name="line.118"></a>
<FONT color="green">119</FONT>                    /** X timestamp of last successful ping to that user, type: int */<a name="line.119"></a>
<FONT color="green">120</FONT>                    lastonline_timestamp(35),<a name="line.120"></a>
<FONT color="green">121</FONT>                    <a name="line.121"></a>
<FONT color="green">122</FONT>                    /** Contact.AVAILABILITY, type: AVAILABILITY */<a name="line.122"></a>
<FONT color="green">123</FONT>                    availability(34),<a name="line.123"></a>
<FONT color="green">124</FONT>                    <a name="line.124"></a>
<FONT color="green">125</FONT>                    /** always set (assigned by lib by looking at various fields), type: String */<a name="line.125"></a>
<FONT color="green">126</FONT>                    displayname(21),<a name="line.126"></a>
<FONT color="green">127</FONT>                    <a name="line.127"></a>
<FONT color="green">128</FONT>                    /** true if querying additional information from p2p or server &lt;br&gt;, type: boolean */<a name="line.128"></a>
<FONT color="green">129</FONT>                    refreshing(22),<a name="line.129"></a>
<FONT color="green">130</FONT>                    <a name="line.130"></a>
<FONT color="green">131</FONT>                    /** Contact.AUTHLEVEL, change via Contact.GiveAuthlevel(), type: AUTHLEVEL */<a name="line.131"></a>
<FONT color="green">132</FONT>                    given_authlevel(23),<a name="line.132"></a>
<FONT color="green">133</FONT>                    <a name="line.133"></a>
<FONT color="green">134</FONT>                    /** change via Contact.GiveDisplayname(), type: String */<a name="line.134"></a>
<FONT color="green">135</FONT>                    given_displayname(33),<a name="line.135"></a>
<FONT color="green">136</FONT>                    <a name="line.136"></a>
<FONT color="green">137</FONT>                    /** change via Contact.AssignComment(), type: String */<a name="line.137"></a>
<FONT color="green">138</FONT>                    assigned_comment(180),<a name="line.138"></a>
<FONT color="green">139</FONT>                    <a name="line.139"></a>
<FONT color="green">140</FONT>                    /** UNIX timestamp of last outbound session (call, chat, FT, etc), type: int */<a name="line.140"></a>
<FONT color="green">141</FONT>                    lastused_timestamp(39),<a name="line.141"></a>
<FONT color="green">142</FONT>                    <a name="line.142"></a>
<FONT color="green">143</FONT>                    /** for contacts that have CONTACT_RECEIVED_AUTHREQUEST, how many times in a row they have requested it without positive answer, type: int */<a name="line.143"></a>
<FONT color="green">144</FONT>                    authrequest_count(41),<a name="line.144"></a>
<FONT color="green">145</FONT>                    <a name="line.145"></a>
<FONT color="green">146</FONT>                    /** Office phone no. of the contact. This property should NOT be used for SkypeOut contacts &lt;br&gt;, type: String */<a name="line.146"></a>
<FONT color="green">147</FONT>                    assigned_phone1(184),<a name="line.147"></a>
<FONT color="green">148</FONT>                    <a name="line.148"></a>
<FONT color="green">149</FONT>                    /** Value "1" in this property will be translated as "Office" by Skype Windows desktop client, according to UI language settings &lt;br&gt;, type: String */<a name="line.149"></a>
<FONT color="green">150</FONT>                    assigned_phone1_label(185),<a name="line.150"></a>
<FONT color="green">151</FONT>                    <a name="line.151"></a>
<FONT color="green">152</FONT>                    /** Mobile phone no. of the contact &lt;br&gt;, type: String */<a name="line.152"></a>
<FONT color="green">153</FONT>                    assigned_phone2(186),<a name="line.153"></a>
<FONT color="green">154</FONT>                    <a name="line.154"></a>
<FONT color="green">155</FONT>                    /** Value "2" in this property will be translated as "Mobile" by Skype Windows desktop client, according to UI language settings &lt;br&gt;, type: String */<a name="line.155"></a>
<FONT color="green">156</FONT>                    assigned_phone2_label(187),<a name="line.156"></a>
<FONT color="green">157</FONT>                    <a name="line.157"></a>
<FONT color="green">158</FONT>                    /** "Other phone no. of the contact, type: String */<a name="line.158"></a>
<FONT color="green">159</FONT>                    assigned_phone3(188),<a name="line.159"></a>
<FONT color="green">160</FONT>                    <a name="line.160"></a>
<FONT color="green">161</FONT>                    /** Value "3" in this property will be translated as "Other" by Skype Windows desktop client, according to UI language settings &lt;br&gt;, type: String */<a name="line.161"></a>
<FONT color="green">162</FONT>                    assigned_phone3_label(189),<a name="line.162"></a>
<FONT color="green">163</FONT>                    <a name="line.163"></a>
<FONT color="green">164</FONT>                    /** Contact's order by presence popularity &lt;br&gt;, type: int */<a name="line.164"></a>
<FONT color="green">165</FONT>                    popularity_ord(42);<a name="line.165"></a>
<FONT color="green">166</FONT>                    <a name="line.166"></a>
<FONT color="green">167</FONT>                    private static final Map&lt;Integer,PROPERTY&gt; lookup = new HashMap&lt;Integer,PROPERTY&gt;();<a name="line.167"></a>
<FONT color="green">168</FONT>                    <a name="line.168"></a>
<FONT color="green">169</FONT>                    static {<a name="line.169"></a>
<FONT color="green">170</FONT>                            for(PROPERTY s : EnumSet.allOf(PROPERTY.class))<a name="line.170"></a>
<FONT color="green">171</FONT>                                    lookup.put(s.getId(), s);<a name="line.171"></a>
<FONT color="green">172</FONT>                    }<a name="line.172"></a>
<FONT color="green">173</FONT>                    <a name="line.173"></a>
<FONT color="green">174</FONT>                    private final int id;<a name="line.174"></a>
<FONT color="green">175</FONT>                    <a name="line.175"></a>
<FONT color="green">176</FONT>                    private PROPERTY(int value) {<a name="line.176"></a>
<FONT color="green">177</FONT>                            this.id = value;<a name="line.177"></a>
<FONT color="green">178</FONT>                    }<a name="line.178"></a>
<FONT color="green">179</FONT>                    <a name="line.179"></a>
<FONT color="green">180</FONT>                    public int getId() { return id; }<a name="line.180"></a>
<FONT color="green">181</FONT>                    <a name="line.181"></a>
<FONT color="green">182</FONT>                    public static PROPERTY get(int code) {<a name="line.182"></a>
<FONT color="green">183</FONT>                            return lookup.get(code);<a name="line.183"></a>
<FONT color="green">184</FONT>                    }<a name="line.184"></a>
<FONT color="green">185</FONT>                    <a name="line.185"></a>
<FONT color="green">186</FONT>                    public static PROPERTY fromString(String s) {<a name="line.186"></a>
<FONT color="green">187</FONT>                            for (PROPERTY p : lookup.values()) {<a name="line.187"></a>
<FONT color="green">188</FONT>                                    if (p.toString() == s) {<a name="line.188"></a>
<FONT color="green">189</FONT>                                            return p;<a name="line.189"></a>
<FONT color="green">190</FONT>                                    }<a name="line.190"></a>
<FONT color="green">191</FONT>                            }<a name="line.191"></a>
<FONT color="green">192</FONT>                            return null;<a name="line.192"></a>
<FONT color="green">193</FONT>                    }<a name="line.193"></a>
<FONT color="green">194</FONT>            }<a name="line.194"></a>
<FONT color="green">195</FONT>            <a name="line.195"></a>
<FONT color="green">196</FONT>            public Object GetPropertyAsEnum(int propid) {<a name="line.196"></a>
<FONT color="green">197</FONT>                    return PROPERTY.get(propid);<a name="line.197"></a>
<FONT color="green">198</FONT>            }<a name="line.198"></a>
<FONT color="green">199</FONT>            <a name="line.199"></a>
<FONT color="green">200</FONT>            public String GetStrProperty(PROPERTY prop) {<a name="line.200"></a>
<FONT color="green">201</FONT>                    //check in propcache if so then return<a name="line.201"></a>
<FONT color="green">202</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.202"></a>
<FONT color="green">203</FONT>                            String value =  (String)mPropCache.get(prop.id);<a name="line.203"></a>
<FONT color="green">204</FONT>                            if (value != null &amp;&amp; !(value.length() == 0) ){<a name="line.204"></a>
<FONT color="green">205</FONT>                                    return value;<a name="line.205"></a>
<FONT color="green">206</FONT>                            }<a name="line.206"></a>
<FONT color="green">207</FONT>                    }<a name="line.207"></a>
<FONT color="green">208</FONT>                    //else get from skypekit...<a name="line.208"></a>
<FONT color="green">209</FONT>                    GetPropertyRequest request = new GetPropertyRequest(2, mObjectId, prop.id);<a name="line.209"></a>
<FONT color="green">210</FONT>                    <a name="line.210"></a>
<FONT color="green">211</FONT>                    String string = null;<a name="line.211"></a>
<FONT color="green">212</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.212"></a>
<FONT color="green">213</FONT>                    if (r != null){<a name="line.213"></a>
<FONT color="green">214</FONT>                            string = r.GetAsString();<a name="line.214"></a>
<FONT color="green">215</FONT>                    }<a name="line.215"></a>
<FONT color="green">216</FONT>                    <a name="line.216"></a>
<FONT color="green">217</FONT>                    if (string != null)<a name="line.217"></a>
<FONT color="green">218</FONT>                    {<a name="line.218"></a>
<FONT color="green">219</FONT>                            mPropCache.put(new Integer(prop.id), string);<a name="line.219"></a>
<FONT color="green">220</FONT>                    }<a name="line.220"></a>
<FONT color="green">221</FONT>                    return string;<a name="line.221"></a>
<FONT color="green">222</FONT>            }<a name="line.222"></a>
<FONT color="green">223</FONT>            <a name="line.223"></a>
<FONT color="green">224</FONT>            public int GetIntProperty(PROPERTY prop) {<a name="line.224"></a>
<FONT color="green">225</FONT>                    //check in propcache if so then return<a name="line.225"></a>
<FONT color="green">226</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.226"></a>
<FONT color="green">227</FONT>                            int value = ((Integer)mPropCache.get(prop.id)).intValue();<a name="line.227"></a>
<FONT color="green">228</FONT>                            if (value != 0){<a name="line.228"></a>
<FONT color="green">229</FONT>                                    return value;<a name="line.229"></a>
<FONT color="green">230</FONT>                            }<a name="line.230"></a>
<FONT color="green">231</FONT>                    }<a name="line.231"></a>
<FONT color="green">232</FONT>                    //else get from skypekit...<a name="line.232"></a>
<FONT color="green">233</FONT>                    GetPropertyRequest request = new GetPropertyRequest(moduleID(), mObjectId, prop.id);<a name="line.233"></a>
<FONT color="green">234</FONT>                    <a name="line.234"></a>
<FONT color="green">235</FONT>                    Integer integer = null;<a name="line.235"></a>
<FONT color="green">236</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.236"></a>
<FONT color="green">237</FONT>                    if (r != null){<a name="line.237"></a>
<FONT color="green">238</FONT>                            integer  = r.GetAsInt();<a name="line.238"></a>
<FONT color="green">239</FONT>                    }<a name="line.239"></a>
<FONT color="green">240</FONT>                    <a name="line.240"></a>
<FONT color="green">241</FONT>                    if (integer != null)<a name="line.241"></a>
<FONT color="green">242</FONT>                    {<a name="line.242"></a>
<FONT color="green">243</FONT>                            mPropCache.put(new Integer(prop.id), integer);<a name="line.243"></a>
<FONT color="green">244</FONT>                            return integer.intValue();<a name="line.244"></a>
<FONT color="green">245</FONT>                    }<a name="line.245"></a>
<FONT color="green">246</FONT>                    else<a name="line.246"></a>
<FONT color="green">247</FONT>                    {<a name="line.247"></a>
<FONT color="green">248</FONT>                            return 0;<a name="line.248"></a>
<FONT color="green">249</FONT>                    }<a name="line.249"></a>
<FONT color="green">250</FONT>            }<a name="line.250"></a>
<FONT color="green">251</FONT>            <a name="line.251"></a>
<FONT color="green">252</FONT>            public boolean GetBooleanProperty(PROPERTY prop) {<a name="line.252"></a>
<FONT color="green">253</FONT>                    //check in propcache if so then return<a name="line.253"></a>
<FONT color="green">254</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.254"></a>
<FONT color="green">255</FONT>                            return ((Boolean)mPropCache.get(prop.id)).booleanValue();<a name="line.255"></a>
<FONT color="green">256</FONT>                    }<a name="line.256"></a>
<FONT color="green">257</FONT>                    //else get from skypekit...<a name="line.257"></a>
<FONT color="green">258</FONT>                    GetPropertyRequest request = new GetPropertyRequest(moduleID(), mObjectId, prop.id);<a name="line.258"></a>
<FONT color="green">259</FONT>                    <a name="line.259"></a>
<FONT color="green">260</FONT>                    Boolean boolResp = null;<a name="line.260"></a>
<FONT color="green">261</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.261"></a>
<FONT color="green">262</FONT>                    if (r != null){<a name="line.262"></a>
<FONT color="green">263</FONT>                            boolResp  = r.GetAsBoolean();<a name="line.263"></a>
<FONT color="green">264</FONT>                    }<a name="line.264"></a>
<FONT color="green">265</FONT>                    <a name="line.265"></a>
<FONT color="green">266</FONT>                    if (boolResp != null)<a name="line.266"></a>
<FONT color="green">267</FONT>                    {<a name="line.267"></a>
<FONT color="green">268</FONT>                            mPropCache.put(new Integer(prop.id), boolResp);<a name="line.268"></a>
<FONT color="green">269</FONT>                            return boolResp.booleanValue();<a name="line.269"></a>
<FONT color="green">270</FONT>                    }<a name="line.270"></a>
<FONT color="green">271</FONT>                    else<a name="line.271"></a>
<FONT color="green">272</FONT>                    {<a name="line.272"></a>
<FONT color="green">273</FONT>                            return false;<a name="line.273"></a>
<FONT color="green">274</FONT>                    }<a name="line.274"></a>
<FONT color="green">275</FONT>            }<a name="line.275"></a>
<FONT color="green">276</FONT>            <a name="line.276"></a>
<FONT color="green">277</FONT>            public byte [] GetBinProperty(PROPERTY prop) {<a name="line.277"></a>
<FONT color="green">278</FONT>                    //get from skypekit...<a name="line.278"></a>
<FONT color="green">279</FONT>                    GetPropertyRequest request = new GetPropertyRequest(2, mObjectId, prop.id);<a name="line.279"></a>
<FONT color="green">280</FONT>                    <a name="line.280"></a>
<FONT color="green">281</FONT>                    byte [] data = null;<a name="line.281"></a>
<FONT color="green">282</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.282"></a>
<FONT color="green">283</FONT>                    if (r != null) {<a name="line.283"></a>
<FONT color="green">284</FONT>                            data = r.GetAsBinary();<a name="line.284"></a>
<FONT color="green">285</FONT>                    }<a name="line.285"></a>
<FONT color="green">286</FONT>                    return data;<a name="line.286"></a>
<FONT color="green">287</FONT>            }<a name="line.287"></a>
<FONT color="green">288</FONT>            <a name="line.288"></a>
<FONT color="green">289</FONT>            /**default array of Contact Properties that get fetched &amp; cached upon class construction*/<a name="line.289"></a>
<FONT color="green">290</FONT>            private static PROPERTY [] defaultProperties = { PROPERTY.type, PROPERTY.skypename, PROPERTY.fullname, PROPERTY.displayname, PROPERTY.mood_text, PROPERTY.pstnnumber, PROPERTY.availability, PROPERTY.given_displayname};<a name="line.290"></a>
<FONT color="green">291</FONT>            <a name="line.291"></a>
<FONT color="green">292</FONT>            private void GetDefaultProps() {<a name="line.292"></a>
<FONT color="green">293</FONT>                    MultiGetPropertyRequest request = null;<a name="line.293"></a>
<FONT color="green">294</FONT>                    ArrayList&lt;Integer&gt; proparray = null;<a name="line.294"></a>
<FONT color="green">295</FONT>                            /**Add the single oid into array*/<a name="line.295"></a>
<FONT color="green">296</FONT>                            ArrayList&lt;Integer&gt; oidarray=new ArrayList&lt;Integer&gt;();<a name="line.296"></a>
<FONT color="green">297</FONT>                            oidarray.add(mObjectId);<a name="line.297"></a>
<FONT color="green">298</FONT>                            <a name="line.298"></a>
<FONT color="green">299</FONT>                            /**Add all requested propids into array*/<a name="line.299"></a>
<FONT color="green">300</FONT>                            proparray=new ArrayList&lt;Integer&gt;();<a name="line.300"></a>
<FONT color="green">301</FONT>                            for (PROPERTY defaultProp : defaultProperties) {<a name="line.301"></a>
<FONT color="green">302</FONT>                                    proparray.add(defaultProp.getId());<a name="line.302"></a>
<FONT color="green">303</FONT>                            }<a name="line.303"></a>
<FONT color="green">304</FONT>                            /**Generate the request*/<a name="line.304"></a>
<FONT color="green">305</FONT>                            request = new MultiGetPropertyRequest(moduleID(), oidarray,proparray);<a name="line.305"></a>
<FONT color="green">306</FONT>                            <a name="line.306"></a>
<FONT color="green">307</FONT>                            /** Make Multi Get call*/<a name="line.307"></a>
<FONT color="green">308</FONT>                            GetPropertyResponse r=skype.MultiGetProperty(request);<a name="line.308"></a>
<FONT color="green">309</FONT>                            /**Verify that it is a proper multiresponse*/<a name="line.309"></a>
<FONT color="green">310</FONT>                            if(!r.isMultiresponse())<a name="line.310"></a>
<FONT color="green">311</FONT>                            {<a name="line.311"></a>
<FONT color="green">312</FONT>                                    return;<a name="line.312"></a>
<FONT color="green">313</FONT>                            }<a name="line.313"></a>
<FONT color="green">314</FONT>                            /**update property cache with results*/<a name="line.314"></a>
<FONT color="green">315</FONT>                            mPropCache.putAll(r.GetAsMap(mObjectId, proparray));<a name="line.315"></a>
<FONT color="green">316</FONT>                    }<a name="line.316"></a>
<FONT color="green">317</FONT>                    <a name="line.317"></a>
<FONT color="green">318</FONT>                    /**<a name="line.318"></a>
<FONT color="green">319</FONT>                    Same as with CAPABILITY, enumerator is used by both Contact and Account objects. &lt;br&gt; */<a name="line.319"></a>
<FONT color="green">320</FONT>                    public enum TYPE {<a name="line.320"></a>
<FONT color="green">321</FONT>                    <a name="line.321"></a>
<FONT color="green">322</FONT>                            /** Contact/account has no pre-identified type. This type is reported by default for SkypeKit clients. &lt;br&gt;*/<a name="line.322"></a>
<FONT color="green">323</FONT>                            UNRECOGNIZED(0),<a name="line.323"></a>
<FONT color="green">324</FONT>                            <a name="line.324"></a>
<FONT color="green">325</FONT>                            /** Normal Skype contact. &lt;br&gt;*/<a name="line.325"></a>
<FONT color="green">326</FONT>                            SKYPE(1),<a name="line.326"></a>
<FONT color="green">327</FONT>                            <a name="line.327"></a>
<FONT color="green">328</FONT>                            /** Normal PSTN contact. &lt;br&gt;*/<a name="line.328"></a>
<FONT color="green">329</FONT>                            PSTN(2),<a name="line.329"></a>
<FONT color="green">330</FONT>                            <a name="line.330"></a>
<FONT color="green">331</FONT>                            /** Emergency number (i.e. 911). &lt;br&gt;*/<a name="line.331"></a>
<FONT color="green">332</FONT>                            EMERGENCY_PSTN(3),<a name="line.332"></a>
<FONT color="green">333</FONT>                            <a name="line.333"></a>
<FONT color="green">334</FONT>                            /** */<a name="line.334"></a>
<FONT color="green">335</FONT>                            FREE_PSTN(4),<a name="line.335"></a>
<FONT color="green">336</FONT>                            <a name="line.336"></a>
<FONT color="green">337</FONT>                            /** Undisclosed PSTN number. &lt;br&gt;*/<a name="line.337"></a>
<FONT color="green">338</FONT>                            UNDISCLOSED_PSTN(5),<a name="line.338"></a>
<FONT color="green">339</FONT>                            <a name="line.339"></a>
<FONT color="green">340</FONT>                            /** This type is currently used by Windows desktop clients for contacts imported from Outlook. &lt;br&gt;*/<a name="line.340"></a>
<FONT color="green">341</FONT>                            EXTERNAL(6);<a name="line.341"></a>
<FONT color="green">342</FONT>                            <a name="line.342"></a>
<FONT color="green">343</FONT>                            private static final Map&lt;Integer,TYPE&gt; lookup = new HashMap&lt;Integer,TYPE&gt;();<a name="line.343"></a>
<FONT color="green">344</FONT>                            <a name="line.344"></a>
<FONT color="green">345</FONT>                            static {<a name="line.345"></a>
<FONT color="green">346</FONT>                                    for(TYPE s : EnumSet.allOf(TYPE.class))<a name="line.346"></a>
<FONT color="green">347</FONT>                                            lookup.put(s.getId(), s);<a name="line.347"></a>
<FONT color="green">348</FONT>                            }<a name="line.348"></a>
<FONT color="green">349</FONT>                            <a name="line.349"></a>
<FONT color="green">350</FONT>                            private final int id;<a name="line.350"></a>
<FONT color="green">351</FONT>                            <a name="line.351"></a>
<FONT color="green">352</FONT>                            private TYPE(int value) {<a name="line.352"></a>
<FONT color="green">353</FONT>                                    this.id = value;<a name="line.353"></a>
<FONT color="green">354</FONT>                            }<a name="line.354"></a>
<FONT color="green">355</FONT>                            <a name="line.355"></a>
<FONT color="green">356</FONT>                            public int getId() { return id; }<a name="line.356"></a>
<FONT color="green">357</FONT>                            <a name="line.357"></a>
<FONT color="green">358</FONT>                            public static TYPE get(int code) {<a name="line.358"></a>
<FONT color="green">359</FONT>                                    return lookup.get(code);<a name="line.359"></a>
<FONT color="green">360</FONT>                            }<a name="line.360"></a>
<FONT color="green">361</FONT>                            <a name="line.361"></a>
<FONT color="green">362</FONT>                            public static TYPE fromString(String s) {<a name="line.362"></a>
<FONT color="green">363</FONT>                                    for (TYPE p : lookup.values()) {<a name="line.363"></a>
<FONT color="green">364</FONT>                                            if (p.toString() == s) {<a name="line.364"></a>
<FONT color="green">365</FONT>                                                    return p;<a name="line.365"></a>
<FONT color="green">366</FONT>                                            }<a name="line.366"></a>
<FONT color="green">367</FONT>                                    }<a name="line.367"></a>
<FONT color="green">368</FONT>                                    return null;<a name="line.368"></a>
<FONT color="green">369</FONT>                            }<a name="line.369"></a>
<FONT color="green">370</FONT>                    }<a name="line.370"></a>
<FONT color="green">371</FONT>                    <a name="line.371"></a>
<FONT color="green">372</FONT>                    /**<a name="line.372"></a>
<FONT color="green">373</FONT>                     *Getter method for the TYPE property. &lt;br&gt;<a name="line.373"></a>
<FONT color="green">374</FONT>                     * @return type<a name="line.374"></a>
<FONT color="green">375</FONT>                     */<a name="line.375"></a>
<FONT color="green">376</FONT>                    public TYPE GetType() {<a name="line.376"></a>
<FONT color="green">377</FONT>                    <a name="line.377"></a>
<FONT color="green">378</FONT>                            Request request = null;<a name="line.378"></a>
<FONT color="green">379</FONT>                            try {<a name="line.379"></a>
<FONT color="green">380</FONT>                                    request = new XCallRequest(2,1);<a name="line.380"></a>
<FONT color="green">381</FONT>                            } catch (IOException e) {<a name="line.381"></a>
<FONT color="green">382</FONT>                                    e.printStackTrace();<a name="line.382"></a>
<FONT color="green">383</FONT>                                    if (skype.errorListener != null)<a name="line.383"></a>
<FONT color="green">384</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.384"></a>
<FONT color="green">385</FONT>                            }<a name="line.385"></a>
<FONT color="green">386</FONT>                            request.addParm('O',0,mObjectId);<a name="line.386"></a>
<FONT color="green">387</FONT>                            <a name="line.387"></a>
<FONT color="green">388</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.388"></a>
<FONT color="green">389</FONT>                            <a name="line.389"></a>
<FONT color="green">390</FONT>                            if (r.isErrCall())<a name="line.390"></a>
<FONT color="green">391</FONT>                                    return null;<a name="line.391"></a>
<FONT color="green">392</FONT>                                    <a name="line.392"></a>
<FONT color="green">393</FONT>                            TYPE type = null;<a name="line.393"></a>
<FONT color="green">394</FONT>                            type = TYPE.get(r.GetAsInt(1));<a name="line.394"></a>
<FONT color="green">395</FONT>                            return type;<a name="line.395"></a>
<FONT color="green">396</FONT>                    }<a name="line.396"></a>
<FONT color="green">397</FONT>                    <a name="line.397"></a>
<FONT color="green">398</FONT>                    /**<a name="line.398"></a>
<FONT color="green">399</FONT>                    Describes the recognized relational states between a local account and a remote contact. &lt;br&gt; */<a name="line.399"></a>
<FONT color="green">400</FONT>                    public enum AUTHLEVEL {<a name="line.400"></a>
<FONT color="green">401</FONT>                    <a name="line.401"></a>
<FONT color="green">402</FONT>                            /** Authorization request is either ignored or pending. In this state several functionalities may be blocked, depending on settings. For example, accounts may only allow seeing online presence to be viewable or only receive calls from authorized contacts. &lt;br&gt;*/<a name="line.402"></a>
<FONT color="green">403</FONT>                            NONE(0),<a name="line.403"></a>
<FONT color="green">404</FONT>                            <a name="line.404"></a>
<FONT color="green">405</FONT>                            /** Contact has been authorized by the local account. &lt;br&gt;*/<a name="line.405"></a>
<FONT color="green">406</FONT>                            AUTHORIZED_BY_ME(1),<a name="line.406"></a>
<FONT color="green">407</FONT>                            <a name="line.407"></a>
<FONT color="green">408</FONT>                            /** Contact has been blocked by the local account. This prevents incoming calls, chat messages, additional authorization requests etc. &lt;br&gt;*/<a name="line.408"></a>
<FONT color="green">409</FONT>                            BLOCKED_BY_ME(2);<a name="line.409"></a>
<FONT color="green">410</FONT>                            <a name="line.410"></a>
<FONT color="green">411</FONT>                            private static final Map&lt;Integer,AUTHLEVEL&gt; lookup = new HashMap&lt;Integer,AUTHLEVEL&gt;();<a name="line.411"></a>
<FONT color="green">412</FONT>                            <a name="line.412"></a>
<FONT color="green">413</FONT>                            static {<a name="line.413"></a>
<FONT color="green">414</FONT>                                    for(AUTHLEVEL s : EnumSet.allOf(AUTHLEVEL.class))<a name="line.414"></a>
<FONT color="green">415</FONT>                                            lookup.put(s.getId(), s);<a name="line.415"></a>
<FONT color="green">416</FONT>                            }<a name="line.416"></a>
<FONT color="green">417</FONT>                            <a name="line.417"></a>
<FONT color="green">418</FONT>                            private final int id;<a name="line.418"></a>
<FONT color="green">419</FONT>                            <a name="line.419"></a>
<FONT color="green">420</FONT>                            private AUTHLEVEL(int value) {<a name="line.420"></a>
<FONT color="green">421</FONT>                                    this.id = value;<a name="line.421"></a>
<FONT color="green">422</FONT>                            }<a name="line.422"></a>
<FONT color="green">423</FONT>                            <a name="line.423"></a>
<FONT color="green">424</FONT>                            public int getId() { return id; }<a name="line.424"></a>
<FONT color="green">425</FONT>                            <a name="line.425"></a>
<FONT color="green">426</FONT>                            public static AUTHLEVEL get(int code) {<a name="line.426"></a>
<FONT color="green">427</FONT>                                    return lookup.get(code);<a name="line.427"></a>
<FONT color="green">428</FONT>                            }<a name="line.428"></a>
<FONT color="green">429</FONT>                            <a name="line.429"></a>
<FONT color="green">430</FONT>                            public static AUTHLEVEL fromString(String s) {<a name="line.430"></a>
<FONT color="green">431</FONT>                                    for (AUTHLEVEL p : lookup.values()) {<a name="line.431"></a>
<FONT color="green">432</FONT>                                            if (p.toString() == s) {<a name="line.432"></a>
<FONT color="green">433</FONT>                                                    return p;<a name="line.433"></a>
<FONT color="green">434</FONT>                                            }<a name="line.434"></a>
<FONT color="green">435</FONT>                                    }<a name="line.435"></a>
<FONT color="green">436</FONT>                                    return null;<a name="line.436"></a>
<FONT color="green">437</FONT>                            }<a name="line.437"></a>
<FONT color="green">438</FONT>                    }<a name="line.438"></a>
<FONT color="green">439</FONT>                    <a name="line.439"></a>
<FONT color="green">440</FONT>                    /**<a name="line.440"></a>
<FONT color="green">441</FONT>                    Describes the superset list of possible Account and Contact online statuses. In case of Account they apply to local user, in case of Contact they apply to remote contacts. &lt;br&gt; */<a name="line.441"></a>
<FONT color="green">442</FONT>                    public enum AVAILABILITY {<a name="line.442"></a>
<FONT color="green">443</FONT>                    <a name="line.443"></a>
<FONT color="green">444</FONT>                            /** Contact online status cannot be determined. This availability state should not normally reach the SkypeKit UI level. &lt;br&gt;*/<a name="line.444"></a>
<FONT color="green">445</FONT>                            UNKNOWN(0),<a name="line.445"></a>
<FONT color="green">446</FONT>                            <a name="line.446"></a>
<FONT color="green">447</FONT>                            /** Seeing Contact online status is blocked because authorization between contact and local account has not taken place. &lt;br&gt;*/<a name="line.447"></a>
<FONT color="green">448</FONT>                            PENDINGAUTH(8),<a name="line.448"></a>
<FONT color="green">449</FONT>                            <a name="line.449"></a>
<FONT color="green">450</FONT>                            /** Remote contact has been blocked by local account. This applies to online accounts. &lt;br&gt;*/<a name="line.450"></a>
<FONT color="green">451</FONT>                            BLOCKED(9),<a name="line.451"></a>
<FONT color="green">452</FONT>                            <a name="line.452"></a>
<FONT color="green">453</FONT>                            /** Remote SkypeOut contact has been blocked by local account. &lt;br&gt;*/<a name="line.453"></a>
<FONT color="green">454</FONT>                            BLOCKED_SKYPEOUT(11),<a name="line.454"></a>
<FONT color="green">455</FONT>                            <a name="line.455"></a>
<FONT color="green">456</FONT>                            /** Contact does not have an online status because he is a PSTN contact. &lt;br&gt;*/<a name="line.456"></a>
<FONT color="green">457</FONT>                            SKYPEOUT(10),<a name="line.457"></a>
<FONT color="green">458</FONT>                            <a name="line.458"></a>
<FONT color="green">459</FONT>                            /** Contact appears to be offline. &lt;br&gt;*/<a name="line.459"></a>
<FONT color="green">460</FONT>                            OFFLINE(1),<a name="line.460"></a>
<FONT color="green">461</FONT>                            <a name="line.461"></a>
<FONT color="green">462</FONT>                            /** Contact appears to be offline but has voicemail enabled. &lt;br&gt;*/<a name="line.462"></a>
<FONT color="green">463</FONT>                            OFFLINE_BUT_VM_ABLE(12),<a name="line.463"></a>
<FONT color="green">464</FONT>                            <a name="line.464"></a>
<FONT color="green">465</FONT>                            /** Contact appears to be offline but has enabled call forwarding, so calls may actually get through to him. &lt;br&gt;*/<a name="line.465"></a>
<FONT color="green">466</FONT>                            OFFLINE_BUT_CF_ABLE(13),<a name="line.466"></a>
<FONT color="green">467</FONT>                            <a name="line.467"></a>
<FONT color="green">468</FONT>                            /** Contact / Account is online &lt;br&gt;*/<a name="line.468"></a>
<FONT color="green">469</FONT>                            ONLINE(2),<a name="line.469"></a>
<FONT color="green">470</FONT>                            <a name="line.470"></a>
<FONT color="green">471</FONT>                            /** Contact / Account is online but away from keyboard. This can be either turned on manually or by automatic timer. In Windows desktop client, the timer can be configured with minute precision. &lt;br&gt;*/<a name="line.471"></a>
<FONT color="green">472</FONT>                            AWAY(3),<a name="line.472"></a>
<FONT color="green">473</FONT>                            <a name="line.473"></a>
<FONT color="green">474</FONT>                            /** This online status is marked as deprecated. If a remote contact indicates its status as NOT_AVAILABLE, the UI should handle this as equivalent of AWAY status. &lt;br&gt;*/<a name="line.474"></a>
<FONT color="green">475</FONT>                            NOT_AVAILABLE(4),<a name="line.475"></a>
<FONT color="green">476</FONT>                            <a name="line.476"></a>
<FONT color="green">477</FONT>                            /** Contact / Account is online but does not wish to be disturbed. This status supersedes AWAY status when the account is DO_NOT_DISTURB the AWAY timer should not modify the status. &lt;br&gt;*/<a name="line.477"></a>
<FONT color="green">478</FONT>                            DO_NOT_DISTURB(5),<a name="line.478"></a>
<FONT color="green">479</FONT>                            <a name="line.479"></a>
<FONT color="green">480</FONT>                            /** This online status is marked as deprecated. If a remote contact indicates its status as SKYPE_ME, the UI should handle this as equivalent of ONLINE status. &lt;br&gt;*/<a name="line.480"></a>
<FONT color="green">481</FONT>                            SKYPE_ME(7),<a name="line.481"></a>
<FONT color="green">482</FONT>                            <a name="line.482"></a>
<FONT color="green">483</FONT>                            /** Account status is set to INVISIBLE. This status in not applicable to remote Contacts. When the remote contact has set his availability to INVISIBLE, he will appear as OFFLINE to others. &lt;br&gt;*/<a name="line.483"></a>
<FONT color="green">484</FONT>                            INVISIBLE(6),<a name="line.484"></a>
<FONT color="green">485</FONT>                            <a name="line.485"></a>
<FONT color="green">486</FONT>                            /** only possible for local user/account*/<a name="line.486"></a>
<FONT color="green">487</FONT>                            CONNECTING(14),<a name="line.487"></a>
<FONT color="green">488</FONT>                            <a name="line.488"></a>
<FONT color="green">489</FONT>                            /** */<a name="line.489"></a>
<FONT color="green">490</FONT>                            ONLINE_FROM_MOBILE(15),<a name="line.490"></a>
<FONT color="green">491</FONT>                            <a name="line.491"></a>
<FONT color="green">492</FONT>                            /** *_FROM_MOBILE only possible for remote user*/<a name="line.492"></a>
<FONT color="green">493</FONT>                            AWAY_FROM_MOBILE(16),<a name="line.493"></a>
<FONT color="green">494</FONT>                            <a name="line.494"></a>
<FONT color="green">495</FONT>                            /** */<a name="line.495"></a>
<FONT color="green">496</FONT>                            NOT_AVAILABLE_FROM_MOBILE(17),<a name="line.496"></a>
<FONT color="green">497</FONT>                            <a name="line.497"></a>
<FONT color="green">498</FONT>                            /** */<a name="line.498"></a>
<FONT color="green">499</FONT>                            DO_NOT_DISTURB_FROM_MOBILE(18),<a name="line.499"></a>
<FONT color="green">500</FONT>                            <a name="line.500"></a>
<FONT color="green">501</FONT>                            /** */<a name="line.501"></a>
<FONT color="green">502</FONT>                            SKYPE_ME_FROM_MOBILE(20);<a name="line.502"></a>
<FONT color="green">503</FONT>                            <a name="line.503"></a>
<FONT color="green">504</FONT>                            private static final Map&lt;Integer,AVAILABILITY&gt; lookup = new HashMap&lt;Integer,AVAILABILITY&gt;();<a name="line.504"></a>
<FONT color="green">505</FONT>                            <a name="line.505"></a>
<FONT color="green">506</FONT>                            static {<a name="line.506"></a>
<FONT color="green">507</FONT>                                    for(AVAILABILITY s : EnumSet.allOf(AVAILABILITY.class))<a name="line.507"></a>
<FONT color="green">508</FONT>                                            lookup.put(s.getId(), s);<a name="line.508"></a>
<FONT color="green">509</FONT>                            }<a name="line.509"></a>
<FONT color="green">510</FONT>                            <a name="line.510"></a>
<FONT color="green">511</FONT>                            private final int id;<a name="line.511"></a>
<FONT color="green">512</FONT>                            <a name="line.512"></a>
<FONT color="green">513</FONT>                            private AVAILABILITY(int value) {<a name="line.513"></a>
<FONT color="green">514</FONT>                                    this.id = value;<a name="line.514"></a>
<FONT color="green">515</FONT>                            }<a name="line.515"></a>
<FONT color="green">516</FONT>                            <a name="line.516"></a>
<FONT color="green">517</FONT>                            public int getId() { return id; }<a name="line.517"></a>
<FONT color="green">518</FONT>                            <a name="line.518"></a>
<FONT color="green">519</FONT>                            public static AVAILABILITY get(int code) {<a name="line.519"></a>
<FONT color="green">520</FONT>                                    return lookup.get(code);<a name="line.520"></a>
<FONT color="green">521</FONT>                            }<a name="line.521"></a>
<FONT color="green">522</FONT>                            <a name="line.522"></a>
<FONT color="green">523</FONT>                            public static AVAILABILITY fromString(String s) {<a name="line.523"></a>
<FONT color="green">524</FONT>                                    for (AVAILABILITY p : lookup.values()) {<a name="line.524"></a>
<FONT color="green">525</FONT>                                            if (p.toString() == s) {<a name="line.525"></a>
<FONT color="green">526</FONT>                                                    return p;<a name="line.526"></a>
<FONT color="green">527</FONT>                                            }<a name="line.527"></a>
<FONT color="green">528</FONT>                                    }<a name="line.528"></a>
<FONT color="green">529</FONT>                                    return null;<a name="line.529"></a>
<FONT color="green">530</FONT>                            }<a name="line.530"></a>
<FONT color="green">531</FONT>                    }<a name="line.531"></a>
<FONT color="green">532</FONT>                    <a name="line.532"></a>
<FONT color="green">533</FONT>                    /**<a name="line.533"></a>
<FONT color="green">534</FONT>                     * @return identity returns CONTACT_SKYPENAME or CONTACT_PSTNNUMBER value<a name="line.534"></a>
<FONT color="green">535</FONT>                     */<a name="line.535"></a>
<FONT color="green">536</FONT>                    public String GetIdentity() {<a name="line.536"></a>
<FONT color="green">537</FONT>                    <a name="line.537"></a>
<FONT color="green">538</FONT>                            Request request = null;<a name="line.538"></a>
<FONT color="green">539</FONT>                            try {<a name="line.539"></a>
<FONT color="green">540</FONT>                                    request = new XCallRequest(2,2);<a name="line.540"></a>
<FONT color="green">541</FONT>                            } catch (IOException e) {<a name="line.541"></a>
<FONT color="green">542</FONT>                                    e.printStackTrace();<a name="line.542"></a>
<FONT color="green">543</FONT>                                    if (skype.errorListener != null)<a name="line.543"></a>
<FONT color="green">544</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.544"></a>
<FONT color="green">545</FONT>                            }<a name="line.545"></a>
<FONT color="green">546</FONT>                            request.addParm('O',0,mObjectId);<a name="line.546"></a>
<FONT color="green">547</FONT>                            <a name="line.547"></a>
<FONT color="green">548</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.548"></a>
<FONT color="green">549</FONT>                            <a name="line.549"></a>
<FONT color="green">550</FONT>                            if (r.isErrCall())<a name="line.550"></a>
<FONT color="green">551</FONT>                                    return null;<a name="line.551"></a>
<FONT color="green">552</FONT>                                    <a name="line.552"></a>
<FONT color="green">553</FONT>                            String identity = null;<a name="line.553"></a>
<FONT color="green">554</FONT>                            identity = r.GetAsString(1);<a name="line.554"></a>
<FONT color="green">555</FONT>                            return identity;<a name="line.555"></a>
<FONT color="green">556</FONT>                    }<a name="line.556"></a>
<FONT color="green">557</FONT>                    <a name="line.557"></a>
<FONT color="green">558</FONT>                    /**<a name="line.558"></a>
<FONT color="green">559</FONT>                     *Returns Conrtact's avatar image (JPG). &lt;br&gt;<a name="line.559"></a>
<FONT color="green">560</FONT>                     * @return GetAvatarResult<a name="line.560"></a>
<FONT color="green">561</FONT>                     */<a name="line.561"></a>
<FONT color="green">562</FONT>                    public GetAvatarResult GetAvatar() {<a name="line.562"></a>
<FONT color="green">563</FONT>                    <a name="line.563"></a>
<FONT color="green">564</FONT>                            Request request = null;<a name="line.564"></a>
<FONT color="green">565</FONT>                            try {<a name="line.565"></a>
<FONT color="green">566</FONT>                                    request = new XCallRequest(2,4);<a name="line.566"></a>
<FONT color="green">567</FONT>                            } catch (IOException e) {<a name="line.567"></a>
<FONT color="green">568</FONT>                                    e.printStackTrace();<a name="line.568"></a>
<FONT color="green">569</FONT>                                    if (skype.errorListener != null)<a name="line.569"></a>
<FONT color="green">570</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.570"></a>
<FONT color="green">571</FONT>                            }<a name="line.571"></a>
<FONT color="green">572</FONT>                            request.addParm('O',0,mObjectId);<a name="line.572"></a>
<FONT color="green">573</FONT>                            <a name="line.573"></a>
<FONT color="green">574</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.574"></a>
<FONT color="green">575</FONT>                            <a name="line.575"></a>
<FONT color="green">576</FONT>                            if (r.isErrCall())<a name="line.576"></a>
<FONT color="green">577</FONT>                                    return null;<a name="line.577"></a>
<FONT color="green">578</FONT>                                    <a name="line.578"></a>
<FONT color="green">579</FONT>                            GetAvatarResult result = new GetAvatarResult();<a name="line.579"></a>
<FONT color="green">580</FONT>                            <a name="line.580"></a>
<FONT color="green">581</FONT>                            boolean present = false;<a name="line.581"></a>
<FONT color="green">582</FONT>                            present = r.GetAsBoolean(1);<a name="line.582"></a>
<FONT color="green">583</FONT>                            result.present = present;<a name="line.583"></a>
<FONT color="green">584</FONT>                            <a name="line.584"></a>
<FONT color="green">585</FONT>                            byte[] avatar = null;<a name="line.585"></a>
<FONT color="green">586</FONT>                            avatar = r.GetAsBinary(2);<a name="line.586"></a>
<FONT color="green">587</FONT>                            result.avatar = avatar;<a name="line.587"></a>
<FONT color="green">588</FONT>                            <a name="line.588"></a>
<FONT color="green">589</FONT>                            return result;<a name="line.589"></a>
<FONT color="green">590</FONT>                    }<a name="line.590"></a>
<FONT color="green">591</FONT>                    <a name="line.591"></a>
<FONT color="green">592</FONT>                    public class GetAvatarResult {<a name="line.592"></a>
<FONT color="green">593</FONT>                            public boolean present; /** &lt;br&gt; - true: the Contact has a custom avatar image &lt;br&gt; - false: the Contact does not have a custom avatar image &lt;br&gt; */<a name="line.593"></a>
<FONT color="green">594</FONT>                            public byte[] avatar; /** The avatar image data (JPG). If present is false, this will be the Skype-assigned default avatar &lt;br&gt; */<a name="line.594"></a>
<FONT color="green">595</FONT>                    }<a name="line.595"></a>
<FONT color="green">596</FONT>                    <a name="line.596"></a>
<FONT color="green">597</FONT>                    /**<a name="line.597"></a>
<FONT color="green">598</FONT>                     *returns verified-by-Skype e-mail for this contact if exists and verifiable<a name="line.598"></a>
<FONT color="green">599</FONT>                     * @return email<a name="line.599"></a>
<FONT color="green">600</FONT>                     */<a name="line.600"></a>
<FONT color="green">601</FONT>                    public String GetVerifiedEmail() {<a name="line.601"></a>
<FONT color="green">602</FONT>                    <a name="line.602"></a>
<FONT color="green">603</FONT>                            Request request = null;<a name="line.603"></a>
<FONT color="green">604</FONT>                            try {<a name="line.604"></a>
<FONT color="green">605</FONT>                                    request = new XCallRequest(2,3);<a name="line.605"></a>
<FONT color="green">606</FONT>                            } catch (IOException e) {<a name="line.606"></a>
<FONT color="green">607</FONT>                                    e.printStackTrace();<a name="line.607"></a>
<FONT color="green">608</FONT>                                    if (skype.errorListener != null)<a name="line.608"></a>
<FONT color="green">609</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.609"></a>
<FONT color="green">610</FONT>                            }<a name="line.610"></a>
<FONT color="green">611</FONT>                            request.addParm('O',0,mObjectId);<a name="line.611"></a>
<FONT color="green">612</FONT>                            <a name="line.612"></a>
<FONT color="green">613</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.613"></a>
<FONT color="green">614</FONT>                            <a name="line.614"></a>
<FONT color="green">615</FONT>                            if (r.isErrCall())<a name="line.615"></a>
<FONT color="green">616</FONT>                                    return null;<a name="line.616"></a>
<FONT color="green">617</FONT>                                    <a name="line.617"></a>
<FONT color="green">618</FONT>                            String email = null;<a name="line.618"></a>
<FONT color="green">619</FONT>                            email = r.GetAsString(1);<a name="line.619"></a>
<FONT color="green">620</FONT>                            return email;<a name="line.620"></a>
<FONT color="green">621</FONT>                    }<a name="line.621"></a>
<FONT color="green">622</FONT>                    <a name="line.622"></a>
<FONT color="green">623</FONT>                    /**<a name="line.623"></a>
<FONT color="green">624</FONT>                     *returns verified-by-Skype company for this contact if exists and verifiable<a name="line.624"></a>
<FONT color="green">625</FONT>                     * @return company<a name="line.625"></a>
<FONT color="green">626</FONT>                     */<a name="line.626"></a>
<FONT color="green">627</FONT>                    public String GetVerifiedCompany() {<a name="line.627"></a>
<FONT color="green">628</FONT>                    <a name="line.628"></a>
<FONT color="green">629</FONT>                            Request request = null;<a name="line.629"></a>
<FONT color="green">630</FONT>                            try {<a name="line.630"></a>
<FONT color="green">631</FONT>                                    request = new XCallRequest(2,8);<a name="line.631"></a>
<FONT color="green">632</FONT>                            } catch (IOException e) {<a name="line.632"></a>
<FONT color="green">633</FONT>                                    e.printStackTrace();<a name="line.633"></a>
<FONT color="green">634</FONT>                                    if (skype.errorListener != null)<a name="line.634"></a>
<FONT color="green">635</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.635"></a>
<FONT color="green">636</FONT>                            }<a name="line.636"></a>
<FONT color="green">637</FONT>                            request.addParm('O',0,mObjectId);<a name="line.637"></a>
<FONT color="green">638</FONT>                            <a name="line.638"></a>
<FONT color="green">639</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.639"></a>
<FONT color="green">640</FONT>                            <a name="line.640"></a>
<FONT color="green">641</FONT>                            if (r.isErrCall())<a name="line.641"></a>
<FONT color="green">642</FONT>                                    return null;<a name="line.642"></a>
<FONT color="green">643</FONT>                                    <a name="line.643"></a>
<FONT color="green">644</FONT>                            String company = null;<a name="line.644"></a>
<FONT color="green">645</FONT>                            company = r.GetAsString(1);<a name="line.645"></a>
<FONT color="green">646</FONT>                            return company;<a name="line.646"></a>
<FONT color="green">647</FONT>                    }<a name="line.647"></a>
<FONT color="green">648</FONT>                    <a name="line.648"></a>
<FONT color="green">649</FONT>                    /**<a name="line.649"></a>
<FONT color="green">650</FONT>                     *Checks whether the contact is member of a contact group given in group reference argument. &lt;br&gt;<a name="line.650"></a>
<FONT color="green">651</FONT>                     * @param group The target contact group &lt;br&gt;<a name="line.651"></a>
<FONT color="green">652</FONT>                     * @return result &lt;br&gt; - true: the Contact is a member of the target contact group &lt;br&gt; - false: the Contact is not a member of the target contact group &lt;br&gt;<a name="line.652"></a>
<FONT color="green">653</FONT>                     */<a name="line.653"></a>
<FONT color="green">654</FONT>                    public boolean IsMemberOf( ContactGroup group) {<a name="line.654"></a>
<FONT color="green">655</FONT>                    <a name="line.655"></a>
<FONT color="green">656</FONT>                            Request request = null;<a name="line.656"></a>
<FONT color="green">657</FONT>                            try {<a name="line.657"></a>
<FONT color="green">658</FONT>                                    request = new XCallRequest(2,6);<a name="line.658"></a>
<FONT color="green">659</FONT>                            } catch (IOException e) {<a name="line.659"></a>
<FONT color="green">660</FONT>                                    e.printStackTrace();<a name="line.660"></a>
<FONT color="green">661</FONT>                                    if (skype.errorListener != null)<a name="line.661"></a>
<FONT color="green">662</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.662"></a>
<FONT color="green">663</FONT>                            }<a name="line.663"></a>
<FONT color="green">664</FONT>                            request.addParm('O',0,mObjectId);<a name="line.664"></a>
<FONT color="green">665</FONT>                            request.addParm('O',1,group.getOid());<a name="line.665"></a>
<FONT color="green">666</FONT>                            <a name="line.666"></a>
<FONT color="green">667</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.667"></a>
<FONT color="green">668</FONT>                            <a name="line.668"></a>
<FONT color="green">669</FONT>                            if (r.isErrCall())<a name="line.669"></a>
<FONT color="green">670</FONT>                                    return false;<a name="line.670"></a>
<FONT color="green">671</FONT>                                    <a name="line.671"></a>
<FONT color="green">672</FONT>                            boolean result = false;<a name="line.672"></a>
<FONT color="green">673</FONT>                            result = r.GetAsBoolean(1);<a name="line.673"></a>
<FONT color="green">674</FONT>                            return result;<a name="line.674"></a>
<FONT color="green">675</FONT>                    }<a name="line.675"></a>
<FONT color="green">676</FONT>                    <a name="line.676"></a>
<FONT color="green">677</FONT>                    /**<a name="line.677"></a>
<FONT color="green">678</FONT>                     *Checks whether the contact is member of a pre-defined contact group given in the TYPE argument (type for this property comes from the ContactGroup class). &lt;br&gt;<a name="line.678"></a>
<FONT color="green">679</FONT>                     * @param groupType The type designator of the target pre-defined contact group. For example, specify this parameter as ContactGroup.TYPE.RECENTLY_CONTACTED_CONTACTS to determine if you've had a recent conversation with this Contact. &lt;br&gt;<a name="line.679"></a>
<FONT color="green">680</FONT>                     * @return result &lt;br&gt; - true: the Contact is a member of the target contact group &lt;br&gt; - false: the Contact is not a member of the target contact group &lt;br&gt;<a name="line.680"></a>
<FONT color="green">681</FONT>                     */<a name="line.681"></a>
<FONT color="green">682</FONT>                    public boolean IsMemberOfHardwiredGroup( ContactGroup.TYPE groupType) {<a name="line.682"></a>
<FONT color="green">683</FONT>                    <a name="line.683"></a>
<FONT color="green">684</FONT>                            Request request = null;<a name="line.684"></a>
<FONT color="green">685</FONT>                            try {<a name="line.685"></a>
<FONT color="green">686</FONT>                                    request = new XCallRequest(2,7);<a name="line.686"></a>
<FONT color="green">687</FONT>                            } catch (IOException e) {<a name="line.687"></a>
<FONT color="green">688</FONT>                                    e.printStackTrace();<a name="line.688"></a>
<FONT color="green">689</FONT>                                    if (skype.errorListener != null)<a name="line.689"></a>
<FONT color="green">690</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.690"></a>
<FONT color="green">691</FONT>                            }<a name="line.691"></a>
<FONT color="green">692</FONT>                            request.addParm('O',0,mObjectId);<a name="line.692"></a>
<FONT color="green">693</FONT>                            request.addParm('e',1,groupType.getId());<a name="line.693"></a>
<FONT color="green">694</FONT>                            <a name="line.694"></a>
<FONT color="green">695</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.695"></a>
<FONT color="green">696</FONT>                            <a name="line.696"></a>
<FONT color="green">697</FONT>                            if (r.isErrCall())<a name="line.697"></a>
<FONT color="green">698</FONT>                                    return false;<a name="line.698"></a>
<FONT color="green">699</FONT>                                    <a name="line.699"></a>
<FONT color="green">700</FONT>                            boolean result = false;<a name="line.700"></a>
<FONT color="green">701</FONT>                            result = r.GetAsBoolean(1);<a name="line.701"></a>
<FONT color="green">702</FONT>                            return result;<a name="line.702"></a>
<FONT color="green">703</FONT>                    }<a name="line.703"></a>
<FONT color="green">704</FONT>                    <a name="line.704"></a>
<FONT color="green">705</FONT>                    /**<a name="line.705"></a>
<FONT color="green">706</FONT>                     *Blocks or unblocks any further incoming communication attempts from this contact. &lt;br&gt;<a name="line.706"></a>
<FONT color="green">707</FONT>                     * @param blocked &lt;br&gt; - true: block this contact &lt;br&gt; - false: unblock this contact &lt;br&gt;<a name="line.707"></a>
<FONT color="green">708</FONT>                     * @param abuse Optional parameter to report abuse by this Skype user when blocking this Contact. Note that you can specifiy this parameter as true only when blocking a Contact. Defaults to false if omitted. &lt;br&gt;<a name="line.708"></a>
<FONT color="green">709</FONT>                     */<a name="line.709"></a>
<FONT color="green">710</FONT>                    public void SetBlocked( boolean blocked, boolean abuse) {<a name="line.710"></a>
<FONT color="green">711</FONT>                    <a name="line.711"></a>
<FONT color="green">712</FONT>                            Request request = null;<a name="line.712"></a>
<FONT color="green">713</FONT>                            try {<a name="line.713"></a>
<FONT color="green">714</FONT>                                    request = new XCallRequest(2,22);<a name="line.714"></a>
<FONT color="green">715</FONT>                            } catch (IOException e) {<a name="line.715"></a>
<FONT color="green">716</FONT>                                    e.printStackTrace();<a name="line.716"></a>
<FONT color="green">717</FONT>                                    if (skype.errorListener != null)<a name="line.717"></a>
<FONT color="green">718</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.718"></a>
<FONT color="green">719</FONT>                            }<a name="line.719"></a>
<FONT color="green">720</FONT>                            request.addParm('O',0,mObjectId);<a name="line.720"></a>
<FONT color="green">721</FONT>                            request.addParm('b',1,blocked);<a name="line.721"></a>
<FONT color="green">722</FONT>                            request.addParm('b',2,abuse);<a name="line.722"></a>
<FONT color="green">723</FONT>                            <a name="line.723"></a>
<FONT color="green">724</FONT>                            skype.XCall((XCallRequest)request);<a name="line.724"></a>
<FONT color="green">725</FONT>                    }<a name="line.725"></a>
<FONT color="green">726</FONT>                    <a name="line.726"></a>
<FONT color="green">727</FONT>                    /**<a name="line.727"></a>
<FONT color="green">728</FONT>                     *Rejects and removes a pending authorization request from this Contact. &lt;br&gt;<a name="line.728"></a>
<FONT color="green">729</FONT>                     */<a name="line.729"></a>
<FONT color="green">730</FONT>                    public void IgnoreAuthRequest() {<a name="line.730"></a>
<FONT color="green">731</FONT>                    <a name="line.731"></a>
<FONT color="green">732</FONT>                            Request request = null;<a name="line.732"></a>
<FONT color="green">733</FONT>                            try {<a name="line.733"></a>
<FONT color="green">734</FONT>                                    request = new XCallRequest(2,21);<a name="line.734"></a>
<FONT color="green">735</FONT>                            } catch (IOException e) {<a name="line.735"></a>
<FONT color="green">736</FONT>                                    e.printStackTrace();<a name="line.736"></a>
<FONT color="green">737</FONT>                                    if (skype.errorListener != null)<a name="line.737"></a>
<FONT color="green">738</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.738"></a>
<FONT color="green">739</FONT>                            }<a name="line.739"></a>
<FONT color="green">740</FONT>                            request.addParm('O',0,mObjectId);<a name="line.740"></a>
<FONT color="green">741</FONT>                            <a name="line.741"></a>
<FONT color="green">742</FONT>                            skype.XCall((XCallRequest)request);<a name="line.742"></a>
<FONT color="green">743</FONT>                    }<a name="line.743"></a>
<FONT color="green">744</FONT>                    <a name="line.744"></a>
<FONT color="green">745</FONT>                    /**<a name="line.745"></a>
<FONT color="green">746</FONT>                     *sets CONTACT_GIVEN_DISPLAYNAME. clears if size(name)==0<a name="line.746"></a>
<FONT color="green">747</FONT>                     * @param name<a name="line.747"></a>
<FONT color="green">748</FONT>                     */<a name="line.748"></a>
<FONT color="green">749</FONT>                    public void GiveDisplayName( String name) {<a name="line.749"></a>
<FONT color="green">750</FONT>                    <a name="line.750"></a>
<FONT color="green">751</FONT>                            Request request = null;<a name="line.751"></a>
<FONT color="green">752</FONT>                            try {<a name="line.752"></a>
<FONT color="green">753</FONT>                                    request = new XCallRequest(2,10);<a name="line.753"></a>
<FONT color="green">754</FONT>                            } catch (IOException e) {<a name="line.754"></a>
<FONT color="green">755</FONT>                                    e.printStackTrace();<a name="line.755"></a>
<FONT color="green">756</FONT>                                    if (skype.errorListener != null)<a name="line.756"></a>
<FONT color="green">757</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.757"></a>
<FONT color="green">758</FONT>                            }<a name="line.758"></a>
<FONT color="green">759</FONT>                            request.addParm('O',0,mObjectId);<a name="line.759"></a>
<FONT color="green">760</FONT>                            request.addParm('S',1,name);<a name="line.760"></a>
<FONT color="green">761</FONT>                            <a name="line.761"></a>
<FONT color="green">762</FONT>                            skype.XCall((XCallRequest)request);<a name="line.762"></a>
<FONT color="green">763</FONT>                    }<a name="line.763"></a>
<FONT color="green">764</FONT>                    <a name="line.764"></a>
<FONT color="green">765</FONT>                    /**<a name="line.765"></a>
<FONT color="green">766</FONT>                     *Adds or removes this Contact from the ALL_BUDDIES hardwired group. &lt;br&gt;<a name="line.766"></a>
<FONT color="green">767</FONT>                     * @param isMyBuddy &lt;br&gt; - true: add this contact to the ALL_BUDDIES group &lt;br&gt; - false: delete contact from the ALL_BUDDIES group &lt;br&gt;<a name="line.767"></a>
<FONT color="green">768</FONT>                     * @param syncAuth This argument is deprecated and should not be used. &lt;br&gt;<a name="line.768"></a>
<FONT color="green">769</FONT>                     */<a name="line.769"></a>
<FONT color="green">770</FONT>                    public void SetBuddyStatus( boolean isMyBuddy, boolean syncAuth) {<a name="line.770"></a>
<FONT color="green">771</FONT>                    <a name="line.771"></a>
<FONT color="green">772</FONT>                            Request request = null;<a name="line.772"></a>
<FONT color="green">773</FONT>                            try {<a name="line.773"></a>
<FONT color="green">774</FONT>                                    request = new XCallRequest(2,12);<a name="line.774"></a>
<FONT color="green">775</FONT>                            } catch (IOException e) {<a name="line.775"></a>
<FONT color="green">776</FONT>                                    e.printStackTrace();<a name="line.776"></a>
<FONT color="green">777</FONT>                                    if (skype.errorListener != null)<a name="line.777"></a>
<FONT color="green">778</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.778"></a>
<FONT color="green">779</FONT>                            }<a name="line.779"></a>
<FONT color="green">780</FONT>                            request.addParm('O',0,mObjectId);<a name="line.780"></a>
<FONT color="green">781</FONT>                            request.addParm('b',1,isMyBuddy);<a name="line.781"></a>
<FONT color="green">782</FONT>                            request.addParm('b',2,syncAuth);<a name="line.782"></a>
<FONT color="green">783</FONT>                            <a name="line.783"></a>
<FONT color="green">784</FONT>                            skype.XCall((XCallRequest)request);<a name="line.784"></a>
<FONT color="green">785</FONT>                    }<a name="line.785"></a>
<FONT color="green">786</FONT>                    <a name="line.786"></a>
<FONT color="green">787</FONT>                    /**<a name="line.787"></a>
<FONT color="green">788</FONT>                     */<a name="line.788"></a>
<FONT color="green">789</FONT>                    public enum EXTRA_AUTHREQ_FIELDS {<a name="line.789"></a>
<FONT color="green">790</FONT>                    <a name="line.790"></a>
<FONT color="green">791</FONT>                            /** send verified e-mail blob with this auth request*/<a name="line.791"></a>
<FONT color="green">792</FONT>                            SEND_VERIFIED_EMAIL(1),<a name="line.792"></a>
<FONT color="green">793</FONT>                            <a name="line.793"></a>
<FONT color="green">794</FONT>                            /** send verified company blob with this auth request*/<a name="line.794"></a>
<FONT color="green">795</FONT>                            SEND_VERIFIED_COMPANY(2);<a name="line.795"></a>
<FONT color="green">796</FONT>                            <a name="line.796"></a>
<FONT color="green">797</FONT>                            private static final Map&lt;Integer,EXTRA_AUTHREQ_FIELDS&gt; lookup = new HashMap&lt;Integer,EXTRA_AUTHREQ_FIELDS&gt;();<a name="line.797"></a>
<FONT color="green">798</FONT>                            <a name="line.798"></a>
<FONT color="green">799</FONT>                            static {<a name="line.799"></a>
<FONT color="green">800</FONT>                                    for(EXTRA_AUTHREQ_FIELDS s : EnumSet.allOf(EXTRA_AUTHREQ_FIELDS.class))<a name="line.800"></a>
<FONT color="green">801</FONT>                                            lookup.put(s.getId(), s);<a name="line.801"></a>
<FONT color="green">802</FONT>                            }<a name="line.802"></a>
<FONT color="green">803</FONT>                            <a name="line.803"></a>
<FONT color="green">804</FONT>                            private final int id;<a name="line.804"></a>
<FONT color="green">805</FONT>                            <a name="line.805"></a>
<FONT color="green">806</FONT>                            private EXTRA_AUTHREQ_FIELDS(int value) {<a name="line.806"></a>
<FONT color="green">807</FONT>                                    this.id = value;<a name="line.807"></a>
<FONT color="green">808</FONT>                            }<a name="line.808"></a>
<FONT color="green">809</FONT>                            <a name="line.809"></a>
<FONT color="green">810</FONT>                            public int getId() { return id; }<a name="line.810"></a>
<FONT color="green">811</FONT>                            <a name="line.811"></a>
<FONT color="green">812</FONT>                            public static EXTRA_AUTHREQ_FIELDS get(int code) {<a name="line.812"></a>
<FONT color="green">813</FONT>                                    return lookup.get(code);<a name="line.813"></a>
<FONT color="green">814</FONT>                            }<a name="line.814"></a>
<FONT color="green">815</FONT>                            <a name="line.815"></a>
<FONT color="green">816</FONT>                            public static EXTRA_AUTHREQ_FIELDS fromString(String s) {<a name="line.816"></a>
<FONT color="green">817</FONT>                                    for (EXTRA_AUTHREQ_FIELDS p : lookup.values()) {<a name="line.817"></a>
<FONT color="green">818</FONT>                                            if (p.toString() == s) {<a name="line.818"></a>
<FONT color="green">819</FONT>                                                    return p;<a name="line.819"></a>
<FONT color="green">820</FONT>                                            }<a name="line.820"></a>
<FONT color="green">821</FONT>                                    }<a name="line.821"></a>
<FONT color="green">822</FONT>                                    return null;<a name="line.822"></a>
<FONT color="green">823</FONT>                            }<a name="line.823"></a>
<FONT color="green">824</FONT>                    }<a name="line.824"></a>
<FONT color="green">825</FONT>                    <a name="line.825"></a>
<FONT color="green">826</FONT>                    /**<a name="line.826"></a>
<FONT color="green">827</FONT>                     *Sends a contact authorization request to this user. &lt;br&gt;<a name="line.827"></a>
<FONT color="green">828</FONT>                     * @param message Text that typically introduces the requesting user and details the reason for the authorization request. This text will be set as Message.P_BODY_XML property of the notification Message the remote user will receive upon getting the authortization request. While this can be the empty string, it cannot be null. &lt;br&gt;<a name="line.828"></a>
<FONT color="green">829</FONT>                     * @param extras_bitmask Indicates additional information to include with this authorization request: &lt;br&gt; - 0 (zero): do not include any additional information &lt;br&gt; - SEND_VERIFIED_EMAIL: include the requestor's verified e-mail address &lt;br&gt; - SEND_VERIFIED_COMPANY: include verified information regarding the requestor's company &lt;br&gt; - SEND_VERIFIED_EMAIL + SEND_VERIFIED_COMPANY: include both e-mail and company information &lt;br&gt;<a name="line.829"></a>
<FONT color="green">830</FONT>                     */<a name="line.830"></a>
<FONT color="green">831</FONT>                    public void SendAuthRequest( String message, int extras_bitmask) {<a name="line.831"></a>
<FONT color="green">832</FONT>                    <a name="line.832"></a>
<FONT color="green">833</FONT>                            Request request = null;<a name="line.833"></a>
<FONT color="green">834</FONT>                            try {<a name="line.834"></a>
<FONT color="green">835</FONT>                                    request = new XCallRequest(2,13);<a name="line.835"></a>
<FONT color="green">836</FONT>                            } catch (IOException e) {<a name="line.836"></a>
<FONT color="green">837</FONT>                                    e.printStackTrace();<a name="line.837"></a>
<FONT color="green">838</FONT>                                    if (skype.errorListener != null)<a name="line.838"></a>
<FONT color="green">839</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.839"></a>
<FONT color="green">840</FONT>                            }<a name="line.840"></a>
<FONT color="green">841</FONT>                            request.addParm('O',0,mObjectId);<a name="line.841"></a>
<FONT color="green">842</FONT>                            request.addParm('S',1,message);<a name="line.842"></a>
<FONT color="green">843</FONT>                            request.addParm('u',2,extras_bitmask);<a name="line.843"></a>
<FONT color="green">844</FONT>                            <a name="line.844"></a>
<FONT color="green">845</FONT>                            skype.XCall((XCallRequest)request);<a name="line.845"></a>
<FONT color="green">846</FONT>                    }<a name="line.846"></a>
<FONT color="green">847</FONT>                    <a name="line.847"></a>
<FONT color="green">848</FONT>                    /**<a name="line.848"></a>
<FONT color="green">849</FONT>                     *the contact has accepted my auth request<a name="line.849"></a>
<FONT color="green">850</FONT>                     * @return result<a name="line.850"></a>
<FONT color="green">851</FONT>                     */<a name="line.851"></a>
<FONT color="green">852</FONT>                    public boolean HasAuthorizedMe() {<a name="line.852"></a>
<FONT color="green">853</FONT>                    <a name="line.853"></a>
<FONT color="green">854</FONT>                            Request request = null;<a name="line.854"></a>
<FONT color="green">855</FONT>                            try {<a name="line.855"></a>
<FONT color="green">856</FONT>                                    request = new XCallRequest(2,14);<a name="line.856"></a>
<FONT color="green">857</FONT>                            } catch (IOException e) {<a name="line.857"></a>
<FONT color="green">858</FONT>                                    e.printStackTrace();<a name="line.858"></a>
<FONT color="green">859</FONT>                                    if (skype.errorListener != null)<a name="line.859"></a>
<FONT color="green">860</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.860"></a>
<FONT color="green">861</FONT>                            }<a name="line.861"></a>
<FONT color="green">862</FONT>                            request.addParm('O',0,mObjectId);<a name="line.862"></a>
<FONT color="green">863</FONT>                            <a name="line.863"></a>
<FONT color="green">864</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.864"></a>
<FONT color="green">865</FONT>                            <a name="line.865"></a>
<FONT color="green">866</FONT>                            if (r.isErrCall())<a name="line.866"></a>
<FONT color="green">867</FONT>                                    return false;<a name="line.867"></a>
<FONT color="green">868</FONT>                                    <a name="line.868"></a>
<FONT color="green">869</FONT>                            boolean result = false;<a name="line.869"></a>
<FONT color="green">870</FONT>                            result = r.GetAsBoolean(1);<a name="line.870"></a>
<FONT color="green">871</FONT>                            return result;<a name="line.871"></a>
<FONT color="green">872</FONT>                    }<a name="line.872"></a>
<FONT color="green">873</FONT>                    <a name="line.873"></a>
<FONT color="green">874</FONT>                    /**<a name="line.874"></a>
<FONT color="green">875</FONT>                     *Sets the three P_ASSIGNED_PHONEx and P_ASSIGNED_PHONEx_LABEL properties, where x reflects the value of num.  &lt;br&gt;&lt;br&gt;The Skype Windows desktop client uses the following conventions when interpreting and assigning values to these properties. While your solution can assign arbitrary values to these properties, we strongly recommend using these conventions to ensure interoperability with the Skype Windows desktop client. Keep in mind that the "number" of these property pairs has no relationship to how the Skype Windows client interprets their label property value strings. For example, the Skype Windows client will interpret P_ASSIGNED_PHONE3_LABEL as "Home" if its value is the string "0".  &lt;br&gt;&lt;br&gt;Label strings: &lt;br&gt;&lt;br&gt;Populate the label properties with string representations of the numbers "0" through "3", rather than descriptive strings like "Home", "Mobile", and so forth. The Skype desktop clients interpret the numeric string values as: &lt;br&gt; - "0" (zero) - "Home" &lt;br&gt; - "1" (one) - "Office" &lt;br&gt; - "2" - "Mobile" &lt;br&gt; - "3" - "Other" &lt;br&gt;&lt;br&gt;Keep in mind that the "number" of a property pair has no relationship to its label string. For example, the Skype Windows client will interpret P_ASSIGNED_PHONE3_LABEL as "Home" if its value is the string "0". &lt;br&gt;&lt;br&gt;Phone number strings: &lt;br&gt;&lt;br&gt;The Skype Windows desktop client has distinct conventions for Skype Contacts and PSTN (SkypeOut) Contacts: any or all of the property pairs can be used for Skype Contacts; P_ASSIGNED_PHONE1 cannot be used for PSTN Contacts and P_ASSIGNED_PHONE1_LABEL has special meaning for PSTN Contacts. &lt;br&gt;Specifically, the Skype desktop clients use P_ASSIGNED_PHONE1_LABEL as the label for a PSTN Contact's primary number (regardless of whether it's home, mobile, or office), and use P_PSTNNUMBER to hold the actual number. &lt;br&gt;&lt;br&gt;<a name="line.875"></a>
<FONT color="green">876</FONT>                     * @param num The property pair being set, which must be in the range 0..3 &lt;br&gt;<a name="line.876"></a>
<FONT color="green">877</FONT>                     * @param label The label text for the property being set &lt;br&gt;<a name="line.877"></a>
<FONT color="green">878</FONT>                     * @param number The phone number for the property being set &lt;br&gt;<a name="line.878"></a>
<FONT color="green">879</FONT>                     */<a name="line.879"></a>
<FONT color="green">880</FONT>                    public void SetPhoneNumber( int num, String label, String number) {<a name="line.880"></a>
<FONT color="green">881</FONT>                    <a name="line.881"></a>
<FONT color="green">882</FONT>                            Request request = null;<a name="line.882"></a>
<FONT color="green">883</FONT>                            try {<a name="line.883"></a>
<FONT color="green">884</FONT>                                    request = new XCallRequest(2,15);<a name="line.884"></a>
<FONT color="green">885</FONT>                            } catch (IOException e) {<a name="line.885"></a>
<FONT color="green">886</FONT>                                    e.printStackTrace();<a name="line.886"></a>
<FONT color="green">887</FONT>                                    if (skype.errorListener != null)<a name="line.887"></a>
<FONT color="green">888</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.888"></a>
<FONT color="green">889</FONT>                            }<a name="line.889"></a>
<FONT color="green">890</FONT>                            request.addParm('O',0,mObjectId);<a name="line.890"></a>
<FONT color="green">891</FONT>                            request.addParm('u',1,num);<a name="line.891"></a>
<FONT color="green">892</FONT>                            request.addParm('S',2,label);<a name="line.892"></a>
<FONT color="green">893</FONT>                            request.addParm('S',3,number);<a name="line.893"></a>
<FONT color="green">894</FONT>                            <a name="line.894"></a>
<FONT color="green">895</FONT>                            skype.XCall((XCallRequest)request);<a name="line.895"></a>
<FONT color="green">896</FONT>                    }<a name="line.896"></a>
<FONT color="green">897</FONT>                    <a name="line.897"></a>
<FONT color="green">898</FONT>                    /**<a name="line.898"></a>
<FONT color="green">899</FONT>                     *Retrieves a dialog conversation with the Contact. &lt;br&gt;<a name="line.899"></a>
<FONT color="green">900</FONT>                     * @return conversation Retrieved dialog. &lt;br&gt;<a name="line.900"></a>
<FONT color="green">901</FONT>                     */<a name="line.901"></a>
<FONT color="green">902</FONT>                    public Conversation OpenConversation() {<a name="line.902"></a>
<FONT color="green">903</FONT>                    <a name="line.903"></a>
<FONT color="green">904</FONT>                            Request request = null;<a name="line.904"></a>
<FONT color="green">905</FONT>                            try {<a name="line.905"></a>
<FONT color="green">906</FONT>                                    request = new XCallRequest(2,17);<a name="line.906"></a>
<FONT color="green">907</FONT>                            } catch (IOException e) {<a name="line.907"></a>
<FONT color="green">908</FONT>                                    e.printStackTrace();<a name="line.908"></a>
<FONT color="green">909</FONT>                                    if (skype.errorListener != null)<a name="line.909"></a>
<FONT color="green">910</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.910"></a>
<FONT color="green">911</FONT>                            }<a name="line.911"></a>
<FONT color="green">912</FONT>                            request.addParm('O',0,mObjectId);<a name="line.912"></a>
<FONT color="green">913</FONT>                            <a name="line.913"></a>
<FONT color="green">914</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.914"></a>
<FONT color="green">915</FONT>                            <a name="line.915"></a>
<FONT color="green">916</FONT>                            if (r.isErrCall())<a name="line.916"></a>
<FONT color="green">917</FONT>                                    return null;<a name="line.917"></a>
<FONT color="green">918</FONT>                                    <a name="line.918"></a>
<FONT color="green">919</FONT>                            int oid = 0;<a name="line.919"></a>
<FONT color="green">920</FONT>                            Conversation conversation = null;<a name="line.920"></a>
<FONT color="green">921</FONT>                            oid = r.GetOid(1);<a name="line.921"></a>
<FONT color="green">922</FONT>                            if (oid != AbstractDecoder.NULL_VALUE) {<a name="line.922"></a>
<FONT color="green">923</FONT>                                    conversation = (Conversation)skype.factory(Conversation.moduleID(), oid, skype);<a name="line.923"></a>
<FONT color="green">924</FONT>                            }<a name="line.924"></a>
<FONT color="green">925</FONT>                            return conversation;<a name="line.925"></a>
<FONT color="green">926</FONT>                    }<a name="line.926"></a>
<FONT color="green">927</FONT>                    <a name="line.927"></a>
<FONT color="green">928</FONT>                    /**<a name="line.928"></a>
<FONT color="green">929</FONT>                    This enumerator is used by both Contact and Account objects. Thus the items here can have slightly different meaning, depending on which context you will examine their values. In case of Contact, the values apply to a user - across all the instances that user has logged in with Skype. In case of Account, the capability is that of a local, currently logged in instance of Skype client. &lt;br&gt;&lt;br&gt;The values that CAPABILITY items can have are also dependant on class context. In context of Contact, a capability can be CAPABILITY_MIXED. Which in case of CAPABILITY_VIDEO, for example, would mean that the remote use has logged in with different clients, some of which support video calls and some of which don't. In context of Account - there are no mixed result. Currently logged in Skype instance either supports video or it doesn't. &lt;br&gt; */<a name="line.929"></a>
<FONT color="green">930</FONT>                    public enum CAPABILITY {<a name="line.930"></a>
<FONT color="green">931</FONT>                    <a name="line.931"></a>
<FONT color="green">932</FONT>                            /** For Account object, this is the same as CAPABILITY_CAN_BE_SENT_VM - it indicates that the currently logged in Skype instance supports voicemails. For Contact objects, it means that their remote system supports sending voicemails - there is no technical method for Skype to detect whether they are capable of receiving voicemails, so the assumption is that they can. &lt;br&gt;*/<a name="line.932"></a>
<FONT color="green">933</FONT>                            CAPABILITY_VOICEMAIL(0),<a name="line.933"></a>
<FONT color="green">934</FONT>                            <a name="line.934"></a>
<FONT color="green">935</FONT>                            /** Indicates that the contact/account has SkypeOut and is thus capable of making PSTN calls. &lt;br&gt;*/<a name="line.935"></a>
<FONT color="green">936</FONT>                            CAPABILITY_SKYPEOUT(1),<a name="line.936"></a>
<FONT color="green">937</FONT>                            <a name="line.937"></a>
<FONT color="green">938</FONT>                            /** Indicates that the contact/account has SkypeIn and is thus capable of answering PSTN calls. &lt;br&gt;*/<a name="line.938"></a>
<FONT color="green">939</FONT>                            CAPABILITY_SKYPEIN(2),<a name="line.939"></a>
<FONT color="green">940</FONT>                            <a name="line.940"></a>
<FONT color="green">941</FONT>                            /** For contacts, this is a combination of CAPABILITY_VOICEMAIL for local account (local Skype client supports sending voicemails) and CAPABILITY_VOICEMAIL of the Contact - if the contact supports sending voicemails then hopefully they can also receive them. &lt;br&gt;*/<a name="line.941"></a>
<FONT color="green">942</FONT>                            CAPABILITY_CAN_BE_SENT_VM(3),<a name="line.942"></a>
<FONT color="green">943</FONT>                            <a name="line.943"></a>
<FONT color="green">944</FONT>                            /** Indicates that Account/Contact supports call forwarding. &lt;br&gt;*/<a name="line.944"></a>
<FONT color="green">945</FONT>                            CAPABILITY_CALL_FORWARD(4),<a name="line.945"></a>
<FONT color="green">946</FONT>                            <a name="line.946"></a>
<FONT color="green">947</FONT>                            /** Indicates that Account/Contact supports call video calls. &lt;br&gt;*/<a name="line.947"></a>
<FONT color="green">948</FONT>                            CAPABILITY_VIDEO(5),<a name="line.948"></a>
<FONT color="green">949</FONT>                            <a name="line.949"></a>
<FONT color="green">950</FONT>                            /** In context of Contact, this indicates that the user is noticed running at least one Skype implementation that supports text messaging. Basically, it applies to a user. When applied to Account, the meaning is slightly different. In that case it indicates that currently running Skype implementation supports chat messaging. So, for Account objects, this is a node (rather than user) capability. &lt;br&gt;*/<a name="line.950"></a>
<FONT color="green">951</FONT>                            CAPABILITY_TEXT(6),<a name="line.951"></a>
<FONT color="green">952</FONT>                            <a name="line.952"></a>
<FONT color="green">953</FONT>                            /** Indicates that the contact/account is flagged as SkypePrime service provider. This is linked to Account class SERVICE_PROVIDER_INFO property. &lt;br&gt;*/<a name="line.953"></a>
<FONT color="green">954</FONT>                            CAPABILITY_SERVICE_PROVIDER(7),<a name="line.954"></a>
<FONT color="green">955</FONT>                            <a name="line.955"></a>
<FONT color="green">956</FONT>                            /** This is a legacy item, from the old times when conference calls with more than 5 people were limited to SkypePro accounts. In other words, this item is no longer relevant and will likely be removed at some point in future. &lt;br&gt;*/<a name="line.956"></a>
<FONT color="green">957</FONT>                            CAPABILITY_LARGE_CONFERENCE(8),<a name="line.957"></a>
<FONT color="green">958</FONT>                            <a name="line.958"></a>
<FONT color="green">959</FONT>                            /** */<a name="line.959"></a>
<FONT color="green">960</FONT>                            CAPABILITY_COMMERCIAL_CONTACT(9),<a name="line.960"></a>
<FONT color="green">961</FONT>                            <a name="line.961"></a>
<FONT color="green">962</FONT>                            /** Indicates that Account/Contact supports call transfers to PSTN numbers. &lt;br&gt;*/<a name="line.962"></a>
<FONT color="green">963</FONT>                            CAPABILITY_PSTN_TRANSFER(10),<a name="line.963"></a>
<FONT color="green">964</FONT>                            <a name="line.964"></a>
<FONT color="green">965</FONT>                            /** Indicates that the user has had his chat capability removed by Skype. Basically, this means that the user is reported as spammer too many times. This applies for both Contact and Account objects - which means your client can check locally, if the currently logged in user has been marked as a spammer. &lt;br&gt;*/<a name="line.965"></a>
<FONT color="green">966</FONT>                            CAPABILITY_TEXT_EVER(11),<a name="line.966"></a>
<FONT color="green">967</FONT>                            <a name="line.967"></a>
<FONT color="green">968</FONT>                            /** Indicates that the user (Account or Contact) has had his voice call capability removed by Skype. &lt;br&gt;*/<a name="line.968"></a>
<FONT color="green">969</FONT>                            CAPABILITY_VOICE_EVER(12),<a name="line.969"></a>
<FONT color="green">970</FONT>                            <a name="line.970"></a>
<FONT color="green">971</FONT>                            /** Indicates that the instance of Skype client Account/Contact is or in Contact's case has at least occasionally been flagged as a mobile device. &lt;br&gt;*/<a name="line.971"></a>
<FONT color="green">972</FONT>                            CAPABILITY_MOBILE_DEVICE(13),<a name="line.972"></a>
<FONT color="green">973</FONT>                            <a name="line.973"></a>
<FONT color="green">974</FONT>                            /** */<a name="line.974"></a>
<FONT color="green">975</FONT>                            CAPABILITY_PUBLIC_CONTACT(14);<a name="line.975"></a>
<FONT color="green">976</FONT>                            <a name="line.976"></a>
<FONT color="green">977</FONT>                            private static final Map&lt;Integer,CAPABILITY&gt; lookup = new HashMap&lt;Integer,CAPABILITY&gt;();<a name="line.977"></a>
<FONT color="green">978</FONT>                            <a name="line.978"></a>
<FONT color="green">979</FONT>                            static {<a name="line.979"></a>
<FONT color="green">980</FONT>                                    for(CAPABILITY s : EnumSet.allOf(CAPABILITY.class))<a name="line.980"></a>
<FONT color="green">981</FONT>                                            lookup.put(s.getId(), s);<a name="line.981"></a>
<FONT color="green">982</FONT>                            }<a name="line.982"></a>
<FONT color="green">983</FONT>                            <a name="line.983"></a>
<FONT color="green">984</FONT>                            private final int id;<a name="line.984"></a>
<FONT color="green">985</FONT>                            <a name="line.985"></a>
<FONT color="green">986</FONT>                            private CAPABILITY(int value) {<a name="line.986"></a>
<FONT color="green">987</FONT>                                    this.id = value;<a name="line.987"></a>
<FONT color="green">988</FONT>                            }<a name="line.988"></a>
<FONT color="green">989</FONT>                            <a name="line.989"></a>
<FONT color="green">990</FONT>                            public int getId() { return id; }<a name="line.990"></a>
<FONT color="green">991</FONT>                            <a name="line.991"></a>
<FONT color="green">992</FONT>                            public static CAPABILITY get(int code) {<a name="line.992"></a>
<FONT color="green">993</FONT>                                    return lookup.get(code);<a name="line.993"></a>
<FONT color="green">994</FONT>                            }<a name="line.994"></a>
<FONT color="green">995</FONT>                            <a name="line.995"></a>
<FONT color="green">996</FONT>                            public static CAPABILITY fromString(String s) {<a name="line.996"></a>
<FONT color="green">997</FONT>                                    for (CAPABILITY p : lookup.values()) {<a name="line.997"></a>
<FONT color="green">998</FONT>                                            if (p.toString() == s) {<a name="line.998"></a>
<FONT color="green">999</FONT>                                                    return p;<a name="line.999"></a>
<FONT color="green">1000</FONT>                                            }<a name="line.1000"></a>
<FONT color="green">1001</FONT>                                    }<a name="line.1001"></a>
<FONT color="green">1002</FONT>                                    return null;<a name="line.1002"></a>
<FONT color="green">1003</FONT>                            }<a name="line.1003"></a>
<FONT color="green">1004</FONT>                    }<a name="line.1004"></a>
<FONT color="green">1005</FONT>                    <a name="line.1005"></a>
<FONT color="green">1006</FONT>                    /**<a name="line.1006"></a>
<FONT color="green">1007</FONT>                    List of possible states of each of the Contact class CAPABILITY items. &lt;br&gt; */<a name="line.1007"></a>
<FONT color="green">1008</FONT>                    public enum CAPABILITYSTATUS {<a name="line.1008"></a>
<FONT color="green">1009</FONT>                    <a name="line.1009"></a>
<FONT color="green">1010</FONT>                            /** Contact does not have the capability &lt;br&gt;*/<a name="line.1010"></a>
<FONT color="green">1011</FONT>                            NO_CAPABILITY(0),<a name="line.1011"></a>
<FONT color="green">1012</FONT>                            <a name="line.1012"></a>
<FONT color="green">1013</FONT>                            /** Contact has occasionally logged in with Skype client that supports the capability. For example, a contact may have Skype client on several machines, only some of which have webcam - in which case CAPABILITY_VIDEO would have its value set as CAPABILITY_MIXED. &lt;br&gt;*/<a name="line.1013"></a>
<FONT color="green">1014</FONT>                            CAPABILITY_MIXED(1),<a name="line.1014"></a>
<FONT color="green">1015</FONT>                            <a name="line.1015"></a>
<FONT color="green">1016</FONT>                            /** Contact has the capability &lt;br&gt;*/<a name="line.1016"></a>
<FONT color="green">1017</FONT>                            CAPABILITY_EXISTS(2);<a name="line.1017"></a>
<FONT color="green">1018</FONT>                            <a name="line.1018"></a>
<FONT color="green">1019</FONT>                            private static final Map&lt;Integer,CAPABILITYSTATUS&gt; lookup = new HashMap&lt;Integer,CAPABILITYSTATUS&gt;();<a name="line.1019"></a>
<FONT color="green">1020</FONT>                            <a name="line.1020"></a>
<FONT color="green">1021</FONT>                            static {<a name="line.1021"></a>
<FONT color="green">1022</FONT>                                    for(CAPABILITYSTATUS s : EnumSet.allOf(CAPABILITYSTATUS.class))<a name="line.1022"></a>
<FONT color="green">1023</FONT>                                            lookup.put(s.getId(), s);<a name="line.1023"></a>
<FONT color="green">1024</FONT>                            }<a name="line.1024"></a>
<FONT color="green">1025</FONT>                            <a name="line.1025"></a>
<FONT color="green">1026</FONT>                            private final int id;<a name="line.1026"></a>
<FONT color="green">1027</FONT>                            <a name="line.1027"></a>
<FONT color="green">1028</FONT>                            private CAPABILITYSTATUS(int value) {<a name="line.1028"></a>
<FONT color="green">1029</FONT>                                    this.id = value;<a name="line.1029"></a>
<FONT color="green">1030</FONT>                            }<a name="line.1030"></a>
<FONT color="green">1031</FONT>                            <a name="line.1031"></a>
<FONT color="green">1032</FONT>                            public int getId() { return id; }<a name="line.1032"></a>
<FONT color="green">1033</FONT>                            <a name="line.1033"></a>
<FONT color="green">1034</FONT>                            public static CAPABILITYSTATUS get(int code) {<a name="line.1034"></a>
<FONT color="green">1035</FONT>                                    return lookup.get(code);<a name="line.1035"></a>
<FONT color="green">1036</FONT>                            }<a name="line.1036"></a>
<FONT color="green">1037</FONT>                            <a name="line.1037"></a>
<FONT color="green">1038</FONT>                            public static CAPABILITYSTATUS fromString(String s) {<a name="line.1038"></a>
<FONT color="green">1039</FONT>                                    for (CAPABILITYSTATUS p : lookup.values()) {<a name="line.1039"></a>
<FONT color="green">1040</FONT>                                            if (p.toString() == s) {<a name="line.1040"></a>
<FONT color="green">1041</FONT>                                                    return p;<a name="line.1041"></a>
<FONT color="green">1042</FONT>                                            }<a name="line.1042"></a>
<FONT color="green">1043</FONT>                                    }<a name="line.1043"></a>
<FONT color="green">1044</FONT>                                    return null;<a name="line.1044"></a>
<FONT color="green">1045</FONT>                            }<a name="line.1045"></a>
<FONT color="green">1046</FONT>                    }<a name="line.1046"></a>
<FONT color="green">1047</FONT>                    <a name="line.1047"></a>
<FONT color="green">1048</FONT>                    /**<a name="line.1048"></a>
<FONT color="green">1049</FONT>                     *Retrieves a Contact.Capability value. Sets P_REFRESHING to true while querying from server. This method is functionally the same as Contact.GetCapabilityStatus except that it returns a bool value rather than Contact.CAPABILITYSTATUS &lt;br&gt;<a name="line.1049"></a>
<FONT color="green">1050</FONT>                     * @param capability The target capability &lt;br&gt;<a name="line.1050"></a>
<FONT color="green">1051</FONT>                     * @param queryServer &lt;br&gt; - true: obtains the data from the p2p network/server, and sets P_REFRESHING to true for the duration  &lt;br&gt; - false: obtains the data from the local client &lt;br&gt;<a name="line.1051"></a>
<FONT color="green">1052</FONT>                     * @return result &lt;br&gt; - true: the Contact has the target capability through at least one of the Skype clients they have logged into. Corresponds to CAPABILITY_MIXED and CAPABILITY_EXISTS &lt;br&gt; - false: the Contact does not have the target capability. Corresponds to NO_CAPABILITY &lt;br&gt;<a name="line.1052"></a>
<FONT color="green">1053</FONT>                     */<a name="line.1053"></a>
<FONT color="green">1054</FONT>                    public boolean HasCapability( CAPABILITY capability, boolean queryServer) {<a name="line.1054"></a>
<FONT color="green">1055</FONT>                    <a name="line.1055"></a>
<FONT color="green">1056</FONT>                            Request request = null;<a name="line.1056"></a>
<FONT color="green">1057</FONT>                            try {<a name="line.1057"></a>
<FONT color="green">1058</FONT>                                    request = new XCallRequest(2,18);<a name="line.1058"></a>
<FONT color="green">1059</FONT>                            } catch (IOException e) {<a name="line.1059"></a>
<FONT color="green">1060</FONT>                                    e.printStackTrace();<a name="line.1060"></a>
<FONT color="green">1061</FONT>                                    if (skype.errorListener != null)<a name="line.1061"></a>
<FONT color="green">1062</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.1062"></a>
<FONT color="green">1063</FONT>                            }<a name="line.1063"></a>
<FONT color="green">1064</FONT>                            request.addParm('O',0,mObjectId);<a name="line.1064"></a>
<FONT color="green">1065</FONT>                            request.addParm('e',1,capability.getId());<a name="line.1065"></a>
<FONT color="green">1066</FONT>                            request.addParm('b',2,queryServer);<a name="line.1066"></a>
<FONT color="green">1067</FONT>                            <a name="line.1067"></a>
<FONT color="green">1068</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.1068"></a>
<FONT color="green">1069</FONT>                            <a name="line.1069"></a>
<FONT color="green">1070</FONT>                            if (r.isErrCall())<a name="line.1070"></a>
<FONT color="green">1071</FONT>                                    return false;<a name="line.1071"></a>
<FONT color="green">1072</FONT>                                    <a name="line.1072"></a>
<FONT color="green">1073</FONT>                            boolean result = false;<a name="line.1073"></a>
<FONT color="green">1074</FONT>                            result = r.GetAsBoolean(1);<a name="line.1074"></a>
<FONT color="green">1075</FONT>                            return result;<a name="line.1075"></a>
<FONT color="green">1076</FONT>                    }<a name="line.1076"></a>
<FONT color="green">1077</FONT>                    <a name="line.1077"></a>
<FONT color="green">1078</FONT>                    /**<a name="line.1078"></a>
<FONT color="green">1079</FONT>                     *Retrieves a Contact.Capability value. Sets P_REFRESHING to true while querying from server. &lt;br&gt;<a name="line.1079"></a>
<FONT color="green">1080</FONT>                     * @param capability The target capability, see Contact.Capability enumerator. &lt;br&gt;<a name="line.1080"></a>
<FONT color="green">1081</FONT>                     * @param queryServer &lt;br&gt; - true: obtains the data from the p2p network/server, and sets P_REFRESHING to true for the duration  &lt;br&gt; - false: obtains the data from the local client &lt;br&gt;<a name="line.1081"></a>
<FONT color="green">1082</FONT>                     * @return status Status of the target capability. &lt;br&gt;<a name="line.1082"></a>
<FONT color="green">1083</FONT>                     */<a name="line.1083"></a>
<FONT color="green">1084</FONT>                    public CAPABILITYSTATUS GetCapabilityStatus( CAPABILITY capability, boolean queryServer) {<a name="line.1084"></a>
<FONT color="green">1085</FONT>                    <a name="line.1085"></a>
<FONT color="green">1086</FONT>                            Request request = null;<a name="line.1086"></a>
<FONT color="green">1087</FONT>                            try {<a name="line.1087"></a>
<FONT color="green">1088</FONT>                                    request = new XCallRequest(2,19);<a name="line.1088"></a>
<FONT color="green">1089</FONT>                            } catch (IOException e) {<a name="line.1089"></a>
<FONT color="green">1090</FONT>                                    e.printStackTrace();<a name="line.1090"></a>
<FONT color="green">1091</FONT>                                    if (skype.errorListener != null)<a name="line.1091"></a>
<FONT color="green">1092</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.1092"></a>
<FONT color="green">1093</FONT>                            }<a name="line.1093"></a>
<FONT color="green">1094</FONT>                            request.addParm('O',0,mObjectId);<a name="line.1094"></a>
<FONT color="green">1095</FONT>                            request.addParm('e',1,capability.getId());<a name="line.1095"></a>
<FONT color="green">1096</FONT>                            request.addParm('b',2,queryServer);<a name="line.1096"></a>
<FONT color="green">1097</FONT>                            <a name="line.1097"></a>
<FONT color="green">1098</FONT>                            Response r = skype.XCall((XCallRequest)request);<a name="line.1098"></a>
<FONT color="green">1099</FONT>                            <a name="line.1099"></a>
<FONT color="green">1100</FONT>                            if (r.isErrCall())<a name="line.1100"></a>
<FONT color="green">1101</FONT>                                    return null;<a name="line.1101"></a>
<FONT color="green">1102</FONT>                                    <a name="line.1102"></a>
<FONT color="green">1103</FONT>                            CAPABILITYSTATUS capabilitystatus = null;<a name="line.1103"></a>
<FONT color="green">1104</FONT>                            capabilitystatus = CAPABILITYSTATUS.get(r.GetAsInt(1));<a name="line.1104"></a>
<FONT color="green">1105</FONT>                            return capabilitystatus;<a name="line.1105"></a>
<FONT color="green">1106</FONT>                    }<a name="line.1106"></a>
<FONT color="green">1107</FONT>                    <a name="line.1107"></a>
<FONT color="green">1108</FONT>                    /**<a name="line.1108"></a>
<FONT color="green">1109</FONT>                     *Refreshes all properties, capabilities, and statuses associated with this Contact from p2p/CBL, and sets P_REFRESHING to true for the duration. &lt;br&gt;<a name="line.1109"></a>
<FONT color="green">1110</FONT>                     */<a name="line.1110"></a>
<FONT color="green">1111</FONT>                    public void RefreshProfile() {<a name="line.1111"></a>
<FONT color="green">1112</FONT>                    <a name="line.1112"></a>
<FONT color="green">1113</FONT>                            Request request = null;<a name="line.1113"></a>
<FONT color="green">1114</FONT>                            try {<a name="line.1114"></a>
<FONT color="green">1115</FONT>                                    request = new XCallRequest(2,20);<a name="line.1115"></a>
<FONT color="green">1116</FONT>                            } catch (IOException e) {<a name="line.1116"></a>
<FONT color="green">1117</FONT>                                    e.printStackTrace();<a name="line.1117"></a>
<FONT color="green">1118</FONT>                                    if (skype.errorListener != null)<a name="line.1118"></a>
<FONT color="green">1119</FONT>                                            skype.errorListener.OnSkypeKitFatalError();<a name="line.1119"></a>
<FONT color="green">1120</FONT>                            }<a name="line.1120"></a>
<FONT color="green">1121</FONT>                            request.addParm('O',0,mObjectId);<a name="line.1121"></a>
<FONT color="green">1122</FONT>                            <a name="line.1122"></a>
<FONT color="green">1123</FONT>                            skype.XCall((XCallRequest)request);<a name="line.1123"></a>
<FONT color="green">1124</FONT>                    }<a name="line.1124"></a>
<FONT color="green">1125</FONT>                    <a name="line.1125"></a>
<FONT color="green">1126</FONT>            <a name="line.1126"></a>
<FONT color="green">1127</FONT>            }<a name="line.1127"></a>




























































</PRE>
</BODY>
</HTML>
