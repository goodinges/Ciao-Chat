<HTML>
<BODY BGCOLOR="white">
<PRE>
<FONT color="green">001</FONT>    package com.skype.api;<a name="line.1"></a>
<FONT color="green">002</FONT>    <a name="line.2"></a>
<FONT color="green">003</FONT>    import java.io.IOException;<a name="line.3"></a>
<FONT color="green">004</FONT>    import java.util.*;<a name="line.4"></a>
<FONT color="green">005</FONT>    import com.skype.ipc.*;<a name="line.5"></a>
<FONT color="green">006</FONT>    /**<a name="line.6"></a>
<FONT color="green">007</FONT>     * This class encapsulates functionality for looking up contacts on the Skype network. Contacts can be searched by portion of their name, e-mail address, language preferences, etc. &lt;br&gt;&lt;br&gt;Contact search is asynchronous. ContactSearch.Submit is a non-blocking function that initiates the search. Upon finding a matching contact, ContactSearch.OnNewResult event gets fired, that gives you the reference to the discovered contact. You can get up to 100 matching contacts per search. Note that you will need to keep a live reference of the ContactSearch object while the search is doing its work.  &lt;br&gt;&lt;br&gt;So, to perform a contact search:  &lt;br&gt; - create a contact search object &lt;br&gt; - specify search terms and conditions &lt;br&gt; - submit search &lt;br&gt; - in ContactSearch.OnNewResult callback, update your UI &lt;br&gt; - in ContactSearch.OnChange, check for terminal values of P_CONTACT_SEARCH_STATUS and update the UI accordingly. &lt;br&gt;&lt;br&gt;When the search has done its job, the ContactSearch.P_CONTACT_SEARCH_STATUS property will go to one of the terminal values. &lt;br&gt;&lt;br&gt;The terminal values are: &lt;br&gt; - FINISHED - the search has stopped. Note that this does not mean any matches were actually found. &lt;br&gt; - FAILED - the search has failed. &lt;br&gt; - EXTENDABLE - this state should be considered the same as FINISHED. The feature of extending long search results is about to be deprecated. It is still possible for search objects to occasionally reach that state, so it should be handled in the UI (as FINISHED), but the extending feature itself should not be implemented in your UI. &lt;br&gt;&lt;br&gt;There are three methods to create the ContactSearch objects. &lt;br&gt;&lt;br&gt;A) Skype.CreateIdentitySearch &lt;br&gt;&lt;br&gt;This method takes a string argument and looks for exact matches against Contact.P_SKYPENAME property. So for example, identity search for "echo" will return 0 results and search for "echo123" will return exactly one.  &lt;br&gt;&lt;br&gt;Identity in this case means skypename - contact search does not work with PSTN type contacts. However, it does work for SKYPE type contacts that have supplied P_PHONE_HOME, P_PHONE_OFFICE or P_PHONE_MOBILE values in their account data. To search for those, you will need to use complex search (see below). &lt;br&gt;&lt;br&gt;Note that you should always check for boolean return value of the CreateIdentitySearch method. If the user submits a string that is not a valid skypename, the method will return false and the ContactSearchRef argument will return as NULL. &lt;br&gt;&lt;br&gt;B) Skype.CreateBasicContactSearch &lt;br&gt;&lt;br&gt;This method takes a string argument and looks for non-exact matches against both P_SKYPENAME and P_FULLNAME properties of the contact. If you intend to implement a simple, one-input search feature - this is the best method for you. The non-exact matching operates similarly to the SQL LIKE condition. &lt;br&gt;&lt;br&gt;C) Skype.CreateContactSearch &lt;br&gt;&lt;br&gt;This method enables you to implement advanced contact search, matching against multiple seach criteria. It takes no input arguments and expects search criteria to be added to the already constructed search object. &lt;br&gt;&lt;br&gt;Criteria can be added with ContactSearch.AddStrTerm and ContactSearch.AddIntTerm methods. &lt;br&gt;&lt;br&gt;These methods take Contact class porperty ID, condition, and the match pattern as inputs. &lt;br&gt;&lt;br&gt;Only the following Contact properties can be used for search: &lt;br&gt; - P_SKYPENAME  &lt;br&gt; - P_FULLNAME &lt;br&gt; - P_BIRTHDAY (uint) &lt;br&gt; - P_GENDER (uint: 1-male, 2-female) &lt;br&gt; - P_LANGUAGES &lt;br&gt; - P_COUNTRY &lt;br&gt; - P_PROVINCE &lt;br&gt; - P_CITY &lt;br&gt; - P_PHONE_HOME &lt;br&gt; - P_PHONE_OFFICE &lt;br&gt; - P_PHONE_MOBILE &lt;br&gt; - P_EMAILS &lt;br&gt; - P_HOMEPAGE &lt;br&gt; - P_ABOUT &lt;br&gt;&lt;br&gt;String searches are case insensitive, i.e. search for echo123 also matches ECHO123 &lt;br&gt;&lt;br&gt;When adding multiple criteria, default behaviour is that the criterions are additive. I.e. a term skypename == "joe" followed by term country == "us" will result in intersection between all joes and everybody in US. &lt;br&gt;&lt;br&gt;You can explicitly add an "OR" instead of "AND" between conditions, using the AddOr method. &lt;br&gt;&lt;br&gt;By default, AND criteria are grouped together, before OR's, so that: &lt;br&gt;&lt;br&gt;AddTerm(condition1) &lt;br&gt;AddTerm(condition2) &lt;br&gt;AddOr() &lt;br&gt;AddTerm(condition3) &lt;br&gt;AddTerm(condition4) &lt;br&gt;&lt;br&gt;will result in the following logical statement: &lt;br&gt;(condition1 AND condition2) OR (condition3 AND condition4) &lt;br&gt;&lt;br&gt;However, you can add "global" critera, by using the add_to_subs argument of the AddXX methods. &lt;br&gt;&lt;br&gt;AddTerm(condition1) &lt;br&gt;AddTerm(condition2) &lt;br&gt;AddOr() &lt;br&gt;AddTerm(condition3) &lt;br&gt;AddTerm(condition4, add_to_subs=true) &lt;br&gt;&lt;br&gt;which would result in: &lt;br&gt;(condition1 AND condition2 AND condition4) OR (condition3 AND condition4) &lt;br&gt;&lt;br&gt;&lt;br&gt;Every one of the contact properties can only be used once, per search. For example, you cannot create a search for two different P_FULLNAME patterns. The &amp;valid argument will still return tue if you do this, but the last criteria for any given property will override all previous ones. So, a search like this: &lt;br&gt;&lt;br&gt;cs-&gt;AddStrTerm(Contact.P_FULLNAME, ContactSearch.EQ, "John Smith", isValid); &lt;br&gt;cs-&gt;AddOr(); &lt;br&gt;cs-&gt;AddStrTerm(Contact.P_FULLNAME, ContactSearch.EQ, "Ivan Sidorov", isValid); &lt;br&gt;&lt;br&gt;will only return matches for "Ivan Sidorov" and none for "John Smith". &lt;br&gt;&lt;br&gt;Some of the contact properties are automatically combined for purposes of search. &lt;br&gt;&lt;br&gt;A search for P_SKYPENAME also returns matches from the P_FULLNAME property and vice versa. &lt;br&gt;&lt;br&gt;So that this: &lt;br&gt;cs-&gt;AddStrTerm(Contact.P_SKYPENAME, ContactSearch.EQ, "john.smith", isValid); &lt;br&gt;&lt;br&gt;..and this: &lt;br&gt;cs-&gt;AddStrTerm(Contact.P_FULLNAME, ContactSearch.EQ, "John Smith", isValid); &lt;br&gt;&lt;br&gt;..and this: &lt;br&gt;cs-&gt;AddStrTerm(Contact.P_SKYPENAME, ContactSearch.EQ, "john.smith", isValid); &lt;br&gt;cs-&gt;AddOr(); &lt;br&gt;cs-&gt;AddStrTerm(Contact.P_FULLNAME, ContactSearch.EQ, "John Smith", isValid); &lt;br&gt;&lt;br&gt;..all search from both the P_FULLNAME and P_SKYPENAME fields. &lt;br&gt;&lt;br&gt;&lt;br&gt;Before using ContactGroup.Submit to start the search, you should always check whether the search criteria ended up being valid. This you can do with ContactSearch.IsValid method. &lt;br&gt;&lt;br&gt;As you probably noticed, each of the AddXX methods also return a validity check boolean. However, it is a better practice to do the overall check as well, even if all the individual search criteria ended up looking Ok. &lt;br&gt;&lt;br&gt;For example, lets take a search for contact's e-mail. This can be done with two different methods. Firstly we can use the ContactSearch.AddEmailTerm method. This method will actually validate whether the input is a valid e-mail address: &lt;br&gt;&lt;br&gt;cs-&gt;AddEmailTerm ("test@test@test", isValid);  &lt;br&gt;will return the isValid argument as false. &lt;br&gt;&lt;br&gt;However, you can also add the e-mail search criterion as a simple string, like this: &lt;br&gt;&lt;br&gt;cs-&gt;AddStrTerm(Contact.P_EMAILS, ContactSearch.EQ, "test@test@test@", isValid); &lt;br&gt;in which case the isValid will return true. &lt;br&gt;&lt;br&gt;However, if you then check entire search object with:  &lt;br&gt;&lt;br&gt;cs-&gt;IsValid(isValid); &lt;br&gt;&lt;br&gt;the isValid will correctly return false. &lt;br&gt;<a name="line.7"></a>
<FONT color="green">008</FONT>     */<a name="line.8"></a>
<FONT color="green">009</FONT>    <a name="line.9"></a>
<FONT color="green">010</FONT>    <a name="line.10"></a>
<FONT color="green">011</FONT>    public class ContactSearch extends SkypeObject {<a name="line.11"></a>
<FONT color="green">012</FONT>    <a name="line.12"></a>
<FONT color="green">013</FONT>    <a name="line.13"></a>
<FONT color="green">014</FONT>            public interface ContactSearchListener {<a name="line.14"></a>
<FONT color="green">015</FONT>                    /** This event gets called when there are changes to ContactSearch properties defined in ContactSearch.PROPERTY  */<a name="line.15"></a>
<FONT color="green">016</FONT>                    public void OnPropertyChange(SkypeObject obj, PROPERTY prop, Object value);<a name="line.16"></a>
<FONT color="green">017</FONT>                    <a name="line.17"></a>
<FONT color="green">018</FONT>                    /**This callback is fired when a new matching contact has been found during the search. &lt;br&gt;*/<a name="line.18"></a>
<FONT color="green">019</FONT>                    public void OnNewResult(SkypeObject obj, Contact contact, int rankValue);<a name="line.19"></a>
<FONT color="green">020</FONT>                    <a name="line.20"></a>
<FONT color="green">021</FONT>            }<a name="line.21"></a>
<FONT color="green">022</FONT>            <a name="line.22"></a>
<FONT color="green">023</FONT>            public ContactSearch(int oid, Skype skype) {<a name="line.23"></a>
<FONT color="green">024</FONT>                    super(oid,skype);<a name="line.24"></a>
<FONT color="green">025</FONT>            }<a name="line.25"></a>
<FONT color="green">026</FONT>            <a name="line.26"></a>
<FONT color="green">027</FONT>            private static final int MODULE_ID = 1;<a name="line.27"></a>
<FONT color="green">028</FONT>            <a name="line.28"></a>
<FONT color="green">029</FONT>            public static final int moduleID() {<a name="line.29"></a>
<FONT color="green">030</FONT>                    return MODULE_ID;<a name="line.30"></a>
<FONT color="green">031</FONT>            }<a name="line.31"></a>
<FONT color="green">032</FONT>            <a name="line.32"></a>
<FONT color="green">033</FONT>            /** Properties of the ContactSearch class */<a name="line.33"></a>
<FONT color="green">034</FONT>            public enum PROPERTY {<a name="line.34"></a>
<FONT color="green">035</FONT>            <a name="line.35"></a>
<FONT color="green">036</FONT>                    /** type: STATUS */<a name="line.36"></a>
<FONT color="green">037</FONT>                    contact_search_status(200);<a name="line.37"></a>
<FONT color="green">038</FONT>                    <a name="line.38"></a>
<FONT color="green">039</FONT>                    private static final Map&lt;Integer,PROPERTY&gt; lookup = new HashMap&lt;Integer,PROPERTY&gt;();<a name="line.39"></a>
<FONT color="green">040</FONT>                    <a name="line.40"></a>
<FONT color="green">041</FONT>                    static {<a name="line.41"></a>
<FONT color="green">042</FONT>                            for(PROPERTY s : EnumSet.allOf(PROPERTY.class))<a name="line.42"></a>
<FONT color="green">043</FONT>                                    lookup.put(s.getId(), s);<a name="line.43"></a>
<FONT color="green">044</FONT>                    }<a name="line.44"></a>
<FONT color="green">045</FONT>                    <a name="line.45"></a>
<FONT color="green">046</FONT>                    private final int id;<a name="line.46"></a>
<FONT color="green">047</FONT>                    <a name="line.47"></a>
<FONT color="green">048</FONT>                    private PROPERTY(int value) {<a name="line.48"></a>
<FONT color="green">049</FONT>                            this.id = value;<a name="line.49"></a>
<FONT color="green">050</FONT>                    }<a name="line.50"></a>
<FONT color="green">051</FONT>                    <a name="line.51"></a>
<FONT color="green">052</FONT>                    public int getId() { return id; }<a name="line.52"></a>
<FONT color="green">053</FONT>                    <a name="line.53"></a>
<FONT color="green">054</FONT>                    public static PROPERTY get(int code) {<a name="line.54"></a>
<FONT color="green">055</FONT>                            return lookup.get(code);<a name="line.55"></a>
<FONT color="green">056</FONT>                    }<a name="line.56"></a>
<FONT color="green">057</FONT>                    <a name="line.57"></a>
<FONT color="green">058</FONT>                    public static PROPERTY fromString(String s) {<a name="line.58"></a>
<FONT color="green">059</FONT>                            for (PROPERTY p : lookup.values()) {<a name="line.59"></a>
<FONT color="green">060</FONT>                                    if (p.toString() == s) {<a name="line.60"></a>
<FONT color="green">061</FONT>                                            return p;<a name="line.61"></a>
<FONT color="green">062</FONT>                                    }<a name="line.62"></a>
<FONT color="green">063</FONT>                            }<a name="line.63"></a>
<FONT color="green">064</FONT>                            return null;<a name="line.64"></a>
<FONT color="green">065</FONT>                    }<a name="line.65"></a>
<FONT color="green">066</FONT>            }<a name="line.66"></a>
<FONT color="green">067</FONT>            <a name="line.67"></a>
<FONT color="green">068</FONT>            public Object GetPropertyAsEnum(int propid) {<a name="line.68"></a>
<FONT color="green">069</FONT>                    return PROPERTY.get(propid);<a name="line.69"></a>
<FONT color="green">070</FONT>            }<a name="line.70"></a>
<FONT color="green">071</FONT>            <a name="line.71"></a>
<FONT color="green">072</FONT>            public String GetStrProperty(PROPERTY prop) {<a name="line.72"></a>
<FONT color="green">073</FONT>                    //check in propcache if so then return<a name="line.73"></a>
<FONT color="green">074</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.74"></a>
<FONT color="green">075</FONT>                            String value =  (String)mPropCache.get(prop.id);<a name="line.75"></a>
<FONT color="green">076</FONT>                            if (value != null &amp;&amp; !(value.length() == 0) ){<a name="line.76"></a>
<FONT color="green">077</FONT>                                    return value;<a name="line.77"></a>
<FONT color="green">078</FONT>                            }<a name="line.78"></a>
<FONT color="green">079</FONT>                    }<a name="line.79"></a>
<FONT color="green">080</FONT>                    //else get from skypekit...<a name="line.80"></a>
<FONT color="green">081</FONT>                    GetPropertyRequest request = new GetPropertyRequest(1, mObjectId, prop.id);<a name="line.81"></a>
<FONT color="green">082</FONT>                    <a name="line.82"></a>
<FONT color="green">083</FONT>                    String string = null;<a name="line.83"></a>
<FONT color="green">084</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.84"></a>
<FONT color="green">085</FONT>                    if (r != null){<a name="line.85"></a>
<FONT color="green">086</FONT>                            string = r.GetAsString();<a name="line.86"></a>
<FONT color="green">087</FONT>                    }<a name="line.87"></a>
<FONT color="green">088</FONT>                    <a name="line.88"></a>
<FONT color="green">089</FONT>                    if (string != null)<a name="line.89"></a>
<FONT color="green">090</FONT>                    {<a name="line.90"></a>
<FONT color="green">091</FONT>                            mPropCache.put(new Integer(prop.id), string);<a name="line.91"></a>
<FONT color="green">092</FONT>                    }<a name="line.92"></a>
<FONT color="green">093</FONT>                    return string;<a name="line.93"></a>
<FONT color="green">094</FONT>            }<a name="line.94"></a>
<FONT color="green">095</FONT>            <a name="line.95"></a>
<FONT color="green">096</FONT>            public int GetIntProperty(PROPERTY prop) {<a name="line.96"></a>
<FONT color="green">097</FONT>                    //check in propcache if so then return<a name="line.97"></a>
<FONT color="green">098</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.98"></a>
<FONT color="green">099</FONT>                            int value = ((Integer)mPropCache.get(prop.id)).intValue();<a name="line.99"></a>
<FONT color="green">100</FONT>                            if (value != 0){<a name="line.100"></a>
<FONT color="green">101</FONT>                                    return value;<a name="line.101"></a>
<FONT color="green">102</FONT>                            }<a name="line.102"></a>
<FONT color="green">103</FONT>                    }<a name="line.103"></a>
<FONT color="green">104</FONT>                    //else get from skypekit...<a name="line.104"></a>
<FONT color="green">105</FONT>                    GetPropertyRequest request = new GetPropertyRequest(moduleID(), mObjectId, prop.id);<a name="line.105"></a>
<FONT color="green">106</FONT>                    <a name="line.106"></a>
<FONT color="green">107</FONT>                    Integer integer = null;<a name="line.107"></a>
<FONT color="green">108</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.108"></a>
<FONT color="green">109</FONT>                    if (r != null){<a name="line.109"></a>
<FONT color="green">110</FONT>                            integer  = r.GetAsInt();<a name="line.110"></a>
<FONT color="green">111</FONT>                    }<a name="line.111"></a>
<FONT color="green">112</FONT>                    <a name="line.112"></a>
<FONT color="green">113</FONT>                    if (integer != null)<a name="line.113"></a>
<FONT color="green">114</FONT>                    {<a name="line.114"></a>
<FONT color="green">115</FONT>                            mPropCache.put(new Integer(prop.id), integer);<a name="line.115"></a>
<FONT color="green">116</FONT>                            return integer.intValue();<a name="line.116"></a>
<FONT color="green">117</FONT>                    }<a name="line.117"></a>
<FONT color="green">118</FONT>                    else<a name="line.118"></a>
<FONT color="green">119</FONT>                    {<a name="line.119"></a>
<FONT color="green">120</FONT>                            return 0;<a name="line.120"></a>
<FONT color="green">121</FONT>                    }<a name="line.121"></a>
<FONT color="green">122</FONT>            }<a name="line.122"></a>
<FONT color="green">123</FONT>            <a name="line.123"></a>
<FONT color="green">124</FONT>            public boolean GetBooleanProperty(PROPERTY prop) {<a name="line.124"></a>
<FONT color="green">125</FONT>                    //check in propcache if so then return<a name="line.125"></a>
<FONT color="green">126</FONT>                    if (mPropCache.containsKey(new Integer(prop.id))){<a name="line.126"></a>
<FONT color="green">127</FONT>                            return ((Boolean)mPropCache.get(prop.id)).booleanValue();<a name="line.127"></a>
<FONT color="green">128</FONT>                    }<a name="line.128"></a>
<FONT color="green">129</FONT>                    //else get from skypekit...<a name="line.129"></a>
<FONT color="green">130</FONT>                    GetPropertyRequest request = new GetPropertyRequest(moduleID(), mObjectId, prop.id);<a name="line.130"></a>
<FONT color="green">131</FONT>                    <a name="line.131"></a>
<FONT color="green">132</FONT>                    Boolean boolResp = null;<a name="line.132"></a>
<FONT color="green">133</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.133"></a>
<FONT color="green">134</FONT>                    if (r != null){<a name="line.134"></a>
<FONT color="green">135</FONT>                            boolResp  = r.GetAsBoolean();<a name="line.135"></a>
<FONT color="green">136</FONT>                    }<a name="line.136"></a>
<FONT color="green">137</FONT>                    <a name="line.137"></a>
<FONT color="green">138</FONT>                    if (boolResp != null)<a name="line.138"></a>
<FONT color="green">139</FONT>                    {<a name="line.139"></a>
<FONT color="green">140</FONT>                            mPropCache.put(new Integer(prop.id), boolResp);<a name="line.140"></a>
<FONT color="green">141</FONT>                            return boolResp.booleanValue();<a name="line.141"></a>
<FONT color="green">142</FONT>                    }<a name="line.142"></a>
<FONT color="green">143</FONT>                    else<a name="line.143"></a>
<FONT color="green">144</FONT>                    {<a name="line.144"></a>
<FONT color="green">145</FONT>                            return false;<a name="line.145"></a>
<FONT color="green">146</FONT>                    }<a name="line.146"></a>
<FONT color="green">147</FONT>            }<a name="line.147"></a>
<FONT color="green">148</FONT>            <a name="line.148"></a>
<FONT color="green">149</FONT>            public byte [] GetBinProperty(PROPERTY prop) {<a name="line.149"></a>
<FONT color="green">150</FONT>                    //get from skypekit...<a name="line.150"></a>
<FONT color="green">151</FONT>                    GetPropertyRequest request = new GetPropertyRequest(1, mObjectId, prop.id);<a name="line.151"></a>
<FONT color="green">152</FONT>                    <a name="line.152"></a>
<FONT color="green">153</FONT>                    byte [] data = null;<a name="line.153"></a>
<FONT color="green">154</FONT>                    GetPropertyResponse r = skype.GetProperty(request);<a name="line.154"></a>
<FONT color="green">155</FONT>                    if (r != null) {<a name="line.155"></a>
<FONT color="green">156</FONT>                            data = r.GetAsBinary();<a name="line.156"></a>
<FONT color="green">157</FONT>                    }<a name="line.157"></a>
<FONT color="green">158</FONT>                    return data;<a name="line.158"></a>
<FONT color="green">159</FONT>            }<a name="line.159"></a>
<FONT color="green">160</FONT>            <a name="line.160"></a>
<FONT color="green">161</FONT>            /**<a name="line.161"></a>
<FONT color="green">162</FONT>            Possible values for the ContactSearch.P_STATUS property. &lt;br&gt; */<a name="line.162"></a>
<FONT color="green">163</FONT>            public enum STATUS {<a name="line.163"></a>
<FONT color="green">164</FONT>            <a name="line.164"></a>
<FONT color="green">165</FONT>                    /** Transient state, obtained after submission and actually initiating the search on the network. &lt;br&gt;*/<a name="line.165"></a>
<FONT color="green">166</FONT>                    CONSTRUCTION(1),<a name="line.166"></a>
<FONT color="green">167</FONT>                    <a name="line.167"></a>
<FONT color="green">168</FONT>                    /** Waiting for results to show up. This is a transient state. &lt;br&gt;*/<a name="line.168"></a>
<FONT color="green">169</FONT>                    PENDING(2),<a name="line.169"></a>
<FONT color="green">170</FONT>                    <a name="line.170"></a>
<FONT color="green">171</FONT>                    /** Enough matches are found. No more OnNewResult events will fire. The feature of extending long search results is about to be deprecated. It is still possible for search objects to occasionally reach that state, so it should be handled in the UI (as FINISHED), but the extending feature itself should not be implemented in your UI.  &lt;br&gt;*/<a name="line.171"></a>
<FONT color="green">172</FONT>                    EXTENDABLE(3),<a name="line.172"></a>
<FONT color="green">173</FONT>                    <a name="line.173"></a>
<FONT color="green">174</FONT>                    /** The search is finished. No more matches are expected. This is a terminal state. &lt;br&gt;*/<a name="line.174"></a>
<FONT color="green">175</FONT>                    FINISHED(4),<a name="line.175"></a>
<FONT color="green">176</FONT>                    <a name="line.176"></a>
<FONT color="green">177</FONT>                    /** ContactSearch failed. Better check if the search terms made any sense, with ContactSearch.IsValid. This is a terminal state. &lt;br&gt;*/<a name="line.177"></a>
<FONT color="green">178</FONT>                    FAILED(5);<a name="line.178"></a>
<FONT color="green">179</FONT>                    <a name="line.179"></a>
<FONT color="green">180</FONT>                    private static final Map&lt;Integer,STATUS&gt; lookup = new HashMap&lt;Integer,STATUS&gt;();<a name="line.180"></a>
<FONT color="green">181</FONT>                    <a name="line.181"></a>
<FONT color="green">182</FONT>                    static {<a name="line.182"></a>
<FONT color="green">183</FONT>                            for(STATUS s : EnumSet.allOf(STATUS.class))<a name="line.183"></a>
<FONT color="green">184</FONT>                                    lookup.put(s.getId(), s);<a name="line.184"></a>
<FONT color="green">185</FONT>                    }<a name="line.185"></a>
<FONT color="green">186</FONT>                    <a name="line.186"></a>
<FONT color="green">187</FONT>                    private final int id;<a name="line.187"></a>
<FONT color="green">188</FONT>                    <a name="line.188"></a>
<FONT color="green">189</FONT>                    private STATUS(int value) {<a name="line.189"></a>
<FONT color="green">190</FONT>                            this.id = value;<a name="line.190"></a>
<FONT color="green">191</FONT>                    }<a name="line.191"></a>
<FONT color="green">192</FONT>                    <a name="line.192"></a>
<FONT color="green">193</FONT>                    public int getId() { return id; }<a name="line.193"></a>
<FONT color="green">194</FONT>                    <a name="line.194"></a>
<FONT color="green">195</FONT>                    public static STATUS get(int code) {<a name="line.195"></a>
<FONT color="green">196</FONT>                            return lookup.get(code);<a name="line.196"></a>
<FONT color="green">197</FONT>                    }<a name="line.197"></a>
<FONT color="green">198</FONT>                    <a name="line.198"></a>
<FONT color="green">199</FONT>                    public static STATUS fromString(String s) {<a name="line.199"></a>
<FONT color="green">200</FONT>                            for (STATUS p : lookup.values()) {<a name="line.200"></a>
<FONT color="green">201</FONT>                                    if (p.toString() == s) {<a name="line.201"></a>
<FONT color="green">202</FONT>                                            return p;<a name="line.202"></a>
<FONT color="green">203</FONT>                                    }<a name="line.203"></a>
<FONT color="green">204</FONT>                            }<a name="line.204"></a>
<FONT color="green">205</FONT>                            return null;<a name="line.205"></a>
<FONT color="green">206</FONT>                    }<a name="line.206"></a>
<FONT color="green">207</FONT>            }<a name="line.207"></a>
<FONT color="green">208</FONT>            <a name="line.208"></a>
<FONT color="green">209</FONT>            /**<a name="line.209"></a>
<FONT color="green">210</FONT>             *construct CONTACT_BIRTHDAY term based on current time<a name="line.210"></a>
<FONT color="green">211</FONT>             * @param min_age_in_years<a name="line.211"></a>
<FONT color="green">212</FONT>             * @param add_to_subs<a name="line.212"></a>
<FONT color="green">213</FONT>             * @return valid<a name="line.213"></a>
<FONT color="green">214</FONT>             */<a name="line.214"></a>
<FONT color="green">215</FONT>            public boolean AddMinAgeTerm( int min_age_in_years, boolean add_to_subs) {<a name="line.215"></a>
<FONT color="green">216</FONT>            <a name="line.216"></a>
<FONT color="green">217</FONT>                    Request request = null;<a name="line.217"></a>
<FONT color="green">218</FONT>                    try {<a name="line.218"></a>
<FONT color="green">219</FONT>                            request = new XCallRequest(1,1);<a name="line.219"></a>
<FONT color="green">220</FONT>                    } catch (IOException e) {<a name="line.220"></a>
<FONT color="green">221</FONT>                            e.printStackTrace();<a name="line.221"></a>
<FONT color="green">222</FONT>                            if (skype.errorListener != null)<a name="line.222"></a>
<FONT color="green">223</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.223"></a>
<FONT color="green">224</FONT>                    }<a name="line.224"></a>
<FONT color="green">225</FONT>                    request.addParm('O',0,mObjectId);<a name="line.225"></a>
<FONT color="green">226</FONT>                    request.addParm('u',1,min_age_in_years);<a name="line.226"></a>
<FONT color="green">227</FONT>                    request.addParm('b',2,add_to_subs);<a name="line.227"></a>
<FONT color="green">228</FONT>                    <a name="line.228"></a>
<FONT color="green">229</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.229"></a>
<FONT color="green">230</FONT>                    <a name="line.230"></a>
<FONT color="green">231</FONT>                    if (r.isErrCall())<a name="line.231"></a>
<FONT color="green">232</FONT>                            return false;<a name="line.232"></a>
<FONT color="green">233</FONT>                            <a name="line.233"></a>
<FONT color="green">234</FONT>                    boolean valid = false;<a name="line.234"></a>
<FONT color="green">235</FONT>                    valid = r.GetAsBoolean(1);<a name="line.235"></a>
<FONT color="green">236</FONT>                    return valid;<a name="line.236"></a>
<FONT color="green">237</FONT>            }<a name="line.237"></a>
<FONT color="green">238</FONT>            <a name="line.238"></a>
<FONT color="green">239</FONT>            /**<a name="line.239"></a>
<FONT color="green">240</FONT>             *construct CONTACT_BIRTHDAY term based on current time<a name="line.240"></a>
<FONT color="green">241</FONT>             * @param max_age_in_years<a name="line.241"></a>
<FONT color="green">242</FONT>             * @param add_to_subs<a name="line.242"></a>
<FONT color="green">243</FONT>             * @return valid<a name="line.243"></a>
<FONT color="green">244</FONT>             */<a name="line.244"></a>
<FONT color="green">245</FONT>            public boolean AddMaxAgeTerm( int max_age_in_years, boolean add_to_subs) {<a name="line.245"></a>
<FONT color="green">246</FONT>            <a name="line.246"></a>
<FONT color="green">247</FONT>                    Request request = null;<a name="line.247"></a>
<FONT color="green">248</FONT>                    try {<a name="line.248"></a>
<FONT color="green">249</FONT>                            request = new XCallRequest(1,2);<a name="line.249"></a>
<FONT color="green">250</FONT>                    } catch (IOException e) {<a name="line.250"></a>
<FONT color="green">251</FONT>                            e.printStackTrace();<a name="line.251"></a>
<FONT color="green">252</FONT>                            if (skype.errorListener != null)<a name="line.252"></a>
<FONT color="green">253</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.253"></a>
<FONT color="green">254</FONT>                    }<a name="line.254"></a>
<FONT color="green">255</FONT>                    request.addParm('O',0,mObjectId);<a name="line.255"></a>
<FONT color="green">256</FONT>                    request.addParm('u',1,max_age_in_years);<a name="line.256"></a>
<FONT color="green">257</FONT>                    request.addParm('b',2,add_to_subs);<a name="line.257"></a>
<FONT color="green">258</FONT>                    <a name="line.258"></a>
<FONT color="green">259</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.259"></a>
<FONT color="green">260</FONT>                    <a name="line.260"></a>
<FONT color="green">261</FONT>                    if (r.isErrCall())<a name="line.261"></a>
<FONT color="green">262</FONT>                            return false;<a name="line.262"></a>
<FONT color="green">263</FONT>                            <a name="line.263"></a>
<FONT color="green">264</FONT>                    boolean valid = false;<a name="line.264"></a>
<FONT color="green">265</FONT>                    valid = r.GetAsBoolean(1);<a name="line.265"></a>
<FONT color="green">266</FONT>                    return valid;<a name="line.266"></a>
<FONT color="green">267</FONT>            }<a name="line.267"></a>
<FONT color="green">268</FONT>            <a name="line.268"></a>
<FONT color="green">269</FONT>            /**<a name="line.269"></a>
<FONT color="green">270</FONT>             *Adds a search term against Contact.P_EMAILS property and pre-validates the value given in the email argument. &lt;br&gt;<a name="line.270"></a>
<FONT color="green">271</FONT>             * @param email e-mail addres to search for. &lt;br&gt;<a name="line.271"></a>
<FONT color="green">272</FONT>             * @param add_to_subs This argument enables you to group conditions. See ContactSearch class details for more information. &lt;br&gt;<a name="line.272"></a>
<FONT color="green">273</FONT>             * @return valid Returns false if the value in email property did not look like a valid email address. &lt;br&gt;<a name="line.273"></a>
<FONT color="green">274</FONT>             */<a name="line.274"></a>
<FONT color="green">275</FONT>            public boolean AddEmailTerm( String email, boolean add_to_subs) {<a name="line.275"></a>
<FONT color="green">276</FONT>            <a name="line.276"></a>
<FONT color="green">277</FONT>                    Request request = null;<a name="line.277"></a>
<FONT color="green">278</FONT>                    try {<a name="line.278"></a>
<FONT color="green">279</FONT>                            request = new XCallRequest(1,3);<a name="line.279"></a>
<FONT color="green">280</FONT>                    } catch (IOException e) {<a name="line.280"></a>
<FONT color="green">281</FONT>                            e.printStackTrace();<a name="line.281"></a>
<FONT color="green">282</FONT>                            if (skype.errorListener != null)<a name="line.282"></a>
<FONT color="green">283</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.283"></a>
<FONT color="green">284</FONT>                    }<a name="line.284"></a>
<FONT color="green">285</FONT>                    request.addParm('O',0,mObjectId);<a name="line.285"></a>
<FONT color="green">286</FONT>                    request.addParm('S',1,email);<a name="line.286"></a>
<FONT color="green">287</FONT>                    request.addParm('b',2,add_to_subs);<a name="line.287"></a>
<FONT color="green">288</FONT>                    <a name="line.288"></a>
<FONT color="green">289</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.289"></a>
<FONT color="green">290</FONT>                    <a name="line.290"></a>
<FONT color="green">291</FONT>                    if (r.isErrCall())<a name="line.291"></a>
<FONT color="green">292</FONT>                            return false;<a name="line.292"></a>
<FONT color="green">293</FONT>                            <a name="line.293"></a>
<FONT color="green">294</FONT>                    boolean valid = false;<a name="line.294"></a>
<FONT color="green">295</FONT>                    valid = r.GetAsBoolean(1);<a name="line.295"></a>
<FONT color="green">296</FONT>                    return valid;<a name="line.296"></a>
<FONT color="green">297</FONT>            }<a name="line.297"></a>
<FONT color="green">298</FONT>            <a name="line.298"></a>
<FONT color="green">299</FONT>            /**<a name="line.299"></a>
<FONT color="green">300</FONT>             * @param language<a name="line.300"></a>
<FONT color="green">301</FONT>             * @param add_to_subs<a name="line.301"></a>
<FONT color="green">302</FONT>             * @return valid<a name="line.302"></a>
<FONT color="green">303</FONT>             */<a name="line.303"></a>
<FONT color="green">304</FONT>            public boolean AddLanguageTerm( String language, boolean add_to_subs) {<a name="line.304"></a>
<FONT color="green">305</FONT>            <a name="line.305"></a>
<FONT color="green">306</FONT>                    Request request = null;<a name="line.306"></a>
<FONT color="green">307</FONT>                    try {<a name="line.307"></a>
<FONT color="green">308</FONT>                            request = new XCallRequest(1,4);<a name="line.308"></a>
<FONT color="green">309</FONT>                    } catch (IOException e) {<a name="line.309"></a>
<FONT color="green">310</FONT>                            e.printStackTrace();<a name="line.310"></a>
<FONT color="green">311</FONT>                            if (skype.errorListener != null)<a name="line.311"></a>
<FONT color="green">312</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.312"></a>
<FONT color="green">313</FONT>                    }<a name="line.313"></a>
<FONT color="green">314</FONT>                    request.addParm('O',0,mObjectId);<a name="line.314"></a>
<FONT color="green">315</FONT>                    request.addParm('S',1,language);<a name="line.315"></a>
<FONT color="green">316</FONT>                    request.addParm('b',2,add_to_subs);<a name="line.316"></a>
<FONT color="green">317</FONT>                    <a name="line.317"></a>
<FONT color="green">318</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.318"></a>
<FONT color="green">319</FONT>                    <a name="line.319"></a>
<FONT color="green">320</FONT>                    if (r.isErrCall())<a name="line.320"></a>
<FONT color="green">321</FONT>                            return false;<a name="line.321"></a>
<FONT color="green">322</FONT>                            <a name="line.322"></a>
<FONT color="green">323</FONT>                    boolean valid = false;<a name="line.323"></a>
<FONT color="green">324</FONT>                    valid = r.GetAsBoolean(1);<a name="line.324"></a>
<FONT color="green">325</FONT>                    return valid;<a name="line.325"></a>
<FONT color="green">326</FONT>            }<a name="line.326"></a>
<FONT color="green">327</FONT>            <a name="line.327"></a>
<FONT color="green">328</FONT>            /**<a name="line.328"></a>
<FONT color="green">329</FONT>            List of available  matching conditions that can be used in AddTerm methods. &lt;br&gt; */<a name="line.329"></a>
<FONT color="green">330</FONT>            public enum CONDITION {<a name="line.330"></a>
<FONT color="green">331</FONT>            <a name="line.331"></a>
<FONT color="green">332</FONT>                    /** Equals &lt;br&gt;*/<a name="line.332"></a>
<FONT color="green">333</FONT>                    EQ(0),<a name="line.333"></a>
<FONT color="green">334</FONT>                    <a name="line.334"></a>
<FONT color="green">335</FONT>                    /** Is greater than &lt;br&gt;*/<a name="line.335"></a>
<FONT color="green">336</FONT>                    GT(1),<a name="line.336"></a>
<FONT color="green">337</FONT>                    <a name="line.337"></a>
<FONT color="green">338</FONT>                    /** Is greater or equal. &lt;br&gt;*/<a name="line.338"></a>
<FONT color="green">339</FONT>                    GE(2),<a name="line.339"></a>
<FONT color="green">340</FONT>                    <a name="line.340"></a>
<FONT color="green">341</FONT>                    /** Is less than &lt;br&gt;*/<a name="line.341"></a>
<FONT color="green">342</FONT>                    LT(3),<a name="line.342"></a>
<FONT color="green">343</FONT>                    <a name="line.343"></a>
<FONT color="green">344</FONT>                    /** Less or equal &lt;br&gt;*/<a name="line.344"></a>
<FONT color="green">345</FONT>                    LE(4),<a name="line.345"></a>
<FONT color="green">346</FONT>                    <a name="line.346"></a>
<FONT color="green">347</FONT>                    /** Start of a word macthes exactly (string properties only). &lt;br&gt;*/<a name="line.347"></a>
<FONT color="green">348</FONT>                    PREFIX_EQ(5),<a name="line.348"></a>
<FONT color="green">349</FONT>                    <a name="line.349"></a>
<FONT color="green">350</FONT>                    /** Start of a word is greater or equal (string properties only). &lt;br&gt;*/<a name="line.350"></a>
<FONT color="green">351</FONT>                    PREFIX_GE(6),<a name="line.351"></a>
<FONT color="green">352</FONT>                    <a name="line.352"></a>
<FONT color="green">353</FONT>                    /** Start of a word is less or equal (string properties only). &lt;br&gt;*/<a name="line.353"></a>
<FONT color="green">354</FONT>                    PREFIX_LE(7),<a name="line.354"></a>
<FONT color="green">355</FONT>                    <a name="line.355"></a>
<FONT color="green">356</FONT>                    /** Contains the word (string properties only). &lt;br&gt;*/<a name="line.356"></a>
<FONT color="green">357</FONT>                    CONTAINS_WORDS(8),<a name="line.357"></a>
<FONT color="green">358</FONT>                    <a name="line.358"></a>
<FONT color="green">359</FONT>                    /** One of the words starts with searched value (string properties only). &lt;br&gt;*/<a name="line.359"></a>
<FONT color="green">360</FONT>                    CONTAINS_WORD_PREFIXES(9);<a name="line.360"></a>
<FONT color="green">361</FONT>                    <a name="line.361"></a>
<FONT color="green">362</FONT>                    private static final Map&lt;Integer,CONDITION&gt; lookup = new HashMap&lt;Integer,CONDITION&gt;();<a name="line.362"></a>
<FONT color="green">363</FONT>                    <a name="line.363"></a>
<FONT color="green">364</FONT>                    static {<a name="line.364"></a>
<FONT color="green">365</FONT>                            for(CONDITION s : EnumSet.allOf(CONDITION.class))<a name="line.365"></a>
<FONT color="green">366</FONT>                                    lookup.put(s.getId(), s);<a name="line.366"></a>
<FONT color="green">367</FONT>                    }<a name="line.367"></a>
<FONT color="green">368</FONT>                    <a name="line.368"></a>
<FONT color="green">369</FONT>                    private final int id;<a name="line.369"></a>
<FONT color="green">370</FONT>                    <a name="line.370"></a>
<FONT color="green">371</FONT>                    private CONDITION(int value) {<a name="line.371"></a>
<FONT color="green">372</FONT>                            this.id = value;<a name="line.372"></a>
<FONT color="green">373</FONT>                    }<a name="line.373"></a>
<FONT color="green">374</FONT>                    <a name="line.374"></a>
<FONT color="green">375</FONT>                    public int getId() { return id; }<a name="line.375"></a>
<FONT color="green">376</FONT>                    <a name="line.376"></a>
<FONT color="green">377</FONT>                    public static CONDITION get(int code) {<a name="line.377"></a>
<FONT color="green">378</FONT>                            return lookup.get(code);<a name="line.378"></a>
<FONT color="green">379</FONT>                    }<a name="line.379"></a>
<FONT color="green">380</FONT>                    <a name="line.380"></a>
<FONT color="green">381</FONT>                    public static CONDITION fromString(String s) {<a name="line.381"></a>
<FONT color="green">382</FONT>                            for (CONDITION p : lookup.values()) {<a name="line.382"></a>
<FONT color="green">383</FONT>                                    if (p.toString() == s) {<a name="line.383"></a>
<FONT color="green">384</FONT>                                            return p;<a name="line.384"></a>
<FONT color="green">385</FONT>                                    }<a name="line.385"></a>
<FONT color="green">386</FONT>                            }<a name="line.386"></a>
<FONT color="green">387</FONT>                            return null;<a name="line.387"></a>
<FONT color="green">388</FONT>                    }<a name="line.388"></a>
<FONT color="green">389</FONT>            }<a name="line.389"></a>
<FONT color="green">390</FONT>            <a name="line.390"></a>
<FONT color="green">391</FONT>            /**<a name="line.391"></a>
<FONT color="green">392</FONT>             *Adds a string search term to a custom contact search object.  &lt;br&gt;<a name="line.392"></a>
<FONT color="green">393</FONT>             * @param prop Following Contact class string propkeys can be used for Contact search: &lt;br&gt; - Contact.P_SKYPENAME &lt;br&gt; - Contact.P_FULLNAME &lt;br&gt; - Contact.P_LANGUAGES &lt;br&gt; - Contact.P_COUNTRY &lt;br&gt; - Contact.P_PROVINCE &lt;br&gt; - Contact.P_CITY &lt;br&gt; - Contact.P_PHONE_HOME &lt;br&gt; - Contact.P_PHONE_OFFICE &lt;br&gt; - Contact.P_PHONE_MOBILE &lt;br&gt; - Contact.P_EMAILS &lt;br&gt; - Contact.P_HOMEPAGE &lt;br&gt; - Contact.P_ABOUT &lt;br&gt;Note that while Contact.P_EMAILS is technically a string and can be used in this method, it is recommended that you use ContactSearch.AddEmailTerm method instead. &lt;br&gt;<a name="line.393"></a>
<FONT color="green">394</FONT>             * @param cond Search condition (ContactSearch.CONDITION) &lt;br&gt;<a name="line.394"></a>
<FONT color="green">395</FONT>             * @param value Value to match against. &lt;br&gt;<a name="line.395"></a>
<FONT color="green">396</FONT>             * @param add_to_subs This argument enables you to group conditions. See ContactSearch class details for more information. &lt;br&gt;<a name="line.396"></a>
<FONT color="green">397</FONT>             * @return valid Returns true if the ContactSearch term-set remains valid after adding this term. &lt;br&gt;<a name="line.397"></a>
<FONT color="green">398</FONT>             */<a name="line.398"></a>
<FONT color="green">399</FONT>            public boolean AddStrTerm( int prop, CONDITION cond, String value, boolean add_to_subs) {<a name="line.399"></a>
<FONT color="green">400</FONT>            <a name="line.400"></a>
<FONT color="green">401</FONT>                    Request request = null;<a name="line.401"></a>
<FONT color="green">402</FONT>                    try {<a name="line.402"></a>
<FONT color="green">403</FONT>                            request = new XCallRequest(1,5);<a name="line.403"></a>
<FONT color="green">404</FONT>                    } catch (IOException e) {<a name="line.404"></a>
<FONT color="green">405</FONT>                            e.printStackTrace();<a name="line.405"></a>
<FONT color="green">406</FONT>                            if (skype.errorListener != null)<a name="line.406"></a>
<FONT color="green">407</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.407"></a>
<FONT color="green">408</FONT>                    }<a name="line.408"></a>
<FONT color="green">409</FONT>                    request.addParm('O',0,mObjectId);<a name="line.409"></a>
<FONT color="green">410</FONT>                    request.addParm('e',1,prop);<a name="line.410"></a>
<FONT color="green">411</FONT>                    request.addParm('e',2,cond.getId());<a name="line.411"></a>
<FONT color="green">412</FONT>                    request.addParm('S',3,value);<a name="line.412"></a>
<FONT color="green">413</FONT>                    request.addParm('b',4,add_to_subs);<a name="line.413"></a>
<FONT color="green">414</FONT>                    <a name="line.414"></a>
<FONT color="green">415</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.415"></a>
<FONT color="green">416</FONT>                    <a name="line.416"></a>
<FONT color="green">417</FONT>                    if (r.isErrCall())<a name="line.417"></a>
<FONT color="green">418</FONT>                            return false;<a name="line.418"></a>
<FONT color="green">419</FONT>                            <a name="line.419"></a>
<FONT color="green">420</FONT>                    boolean valid = false;<a name="line.420"></a>
<FONT color="green">421</FONT>                    valid = r.GetAsBoolean(1);<a name="line.421"></a>
<FONT color="green">422</FONT>                    return valid;<a name="line.422"></a>
<FONT color="green">423</FONT>            }<a name="line.423"></a>
<FONT color="green">424</FONT>            <a name="line.424"></a>
<FONT color="green">425</FONT>            /**<a name="line.425"></a>
<FONT color="green">426</FONT>             *Adds a search term to a custom contact search object. For now, there are only two searchable Contact properties that are integers, so this can oly be used for Contact.P_BIRTHDAY and Contact.P_GENDER. &lt;br&gt;<a name="line.426"></a>
<FONT color="green">427</FONT>             * @param prop Propkey to search for. Either Contact.P_BIRTHDAY or Contact.P_GENDER &lt;br&gt;<a name="line.427"></a>
<FONT color="green">428</FONT>             * @param cond Search condition (ContactSearch.CONDITION) &lt;br&gt;<a name="line.428"></a>
<FONT color="green">429</FONT>             * @param value Value to match against. &lt;br&gt;<a name="line.429"></a>
<FONT color="green">430</FONT>             * @param add_to_subs This argument enables you to group conditions. See ContactSearch class details for more information. &lt;br&gt;<a name="line.430"></a>
<FONT color="green">431</FONT>             * @return valid Returns true if the ContactSearch term-set remains valid after adding this term. &lt;br&gt;<a name="line.431"></a>
<FONT color="green">432</FONT>             */<a name="line.432"></a>
<FONT color="green">433</FONT>            public boolean AddIntTerm( int prop, CONDITION cond, int value, boolean add_to_subs) {<a name="line.433"></a>
<FONT color="green">434</FONT>            <a name="line.434"></a>
<FONT color="green">435</FONT>                    Request request = null;<a name="line.435"></a>
<FONT color="green">436</FONT>                    try {<a name="line.436"></a>
<FONT color="green">437</FONT>                            request = new XCallRequest(1,6);<a name="line.437"></a>
<FONT color="green">438</FONT>                    } catch (IOException e) {<a name="line.438"></a>
<FONT color="green">439</FONT>                            e.printStackTrace();<a name="line.439"></a>
<FONT color="green">440</FONT>                            if (skype.errorListener != null)<a name="line.440"></a>
<FONT color="green">441</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.441"></a>
<FONT color="green">442</FONT>                    }<a name="line.442"></a>
<FONT color="green">443</FONT>                    request.addParm('O',0,mObjectId);<a name="line.443"></a>
<FONT color="green">444</FONT>                    request.addParm('e',1,prop);<a name="line.444"></a>
<FONT color="green">445</FONT>                    request.addParm('e',2,cond.getId());<a name="line.445"></a>
<FONT color="green">446</FONT>                    request.addParm('u',3,value);<a name="line.446"></a>
<FONT color="green">447</FONT>                    request.addParm('b',4,add_to_subs);<a name="line.447"></a>
<FONT color="green">448</FONT>                    <a name="line.448"></a>
<FONT color="green">449</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.449"></a>
<FONT color="green">450</FONT>                    <a name="line.450"></a>
<FONT color="green">451</FONT>                    if (r.isErrCall())<a name="line.451"></a>
<FONT color="green">452</FONT>                            return false;<a name="line.452"></a>
<FONT color="green">453</FONT>                            <a name="line.453"></a>
<FONT color="green">454</FONT>                    boolean valid = false;<a name="line.454"></a>
<FONT color="green">455</FONT>                    valid = r.GetAsBoolean(1);<a name="line.455"></a>
<FONT color="green">456</FONT>                    return valid;<a name="line.456"></a>
<FONT color="green">457</FONT>            }<a name="line.457"></a>
<FONT color="green">458</FONT>            <a name="line.458"></a>
<FONT color="green">459</FONT>            /**<a name="line.459"></a>
<FONT color="green">460</FONT>             *used to group terms (AddTerm(1), AddTerm(2), Or(), AddTerm(3), AddTerm(4), etc)<a name="line.460"></a>
<FONT color="green">461</FONT>             */<a name="line.461"></a>
<FONT color="green">462</FONT>            public void AddOr() {<a name="line.462"></a>
<FONT color="green">463</FONT>            <a name="line.463"></a>
<FONT color="green">464</FONT>                    Request request = null;<a name="line.464"></a>
<FONT color="green">465</FONT>                    try {<a name="line.465"></a>
<FONT color="green">466</FONT>                            request = new XCallRequest(1,7);<a name="line.466"></a>
<FONT color="green">467</FONT>                    } catch (IOException e) {<a name="line.467"></a>
<FONT color="green">468</FONT>                            e.printStackTrace();<a name="line.468"></a>
<FONT color="green">469</FONT>                            if (skype.errorListener != null)<a name="line.469"></a>
<FONT color="green">470</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.470"></a>
<FONT color="green">471</FONT>                    }<a name="line.471"></a>
<FONT color="green">472</FONT>                    request.addParm('O',0,mObjectId);<a name="line.472"></a>
<FONT color="green">473</FONT>                    <a name="line.473"></a>
<FONT color="green">474</FONT>                    skype.XCall((XCallRequest)request);<a name="line.474"></a>
<FONT color="green">475</FONT>            }<a name="line.475"></a>
<FONT color="green">476</FONT>            <a name="line.476"></a>
<FONT color="green">477</FONT>            /**<a name="line.477"></a>
<FONT color="green">478</FONT>             *checks that terms list is non-empty and does not contain unsupported keys<a name="line.478"></a>
<FONT color="green">479</FONT>             * @return result<a name="line.479"></a>
<FONT color="green">480</FONT>             */<a name="line.480"></a>
<FONT color="green">481</FONT>            public boolean IsValid() {<a name="line.481"></a>
<FONT color="green">482</FONT>            <a name="line.482"></a>
<FONT color="green">483</FONT>                    Request request = null;<a name="line.483"></a>
<FONT color="green">484</FONT>                    try {<a name="line.484"></a>
<FONT color="green">485</FONT>                            request = new XCallRequest(1,8);<a name="line.485"></a>
<FONT color="green">486</FONT>                    } catch (IOException e) {<a name="line.486"></a>
<FONT color="green">487</FONT>                            e.printStackTrace();<a name="line.487"></a>
<FONT color="green">488</FONT>                            if (skype.errorListener != null)<a name="line.488"></a>
<FONT color="green">489</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.489"></a>
<FONT color="green">490</FONT>                    }<a name="line.490"></a>
<FONT color="green">491</FONT>                    request.addParm('O',0,mObjectId);<a name="line.491"></a>
<FONT color="green">492</FONT>                    <a name="line.492"></a>
<FONT color="green">493</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.493"></a>
<FONT color="green">494</FONT>                    <a name="line.494"></a>
<FONT color="green">495</FONT>                    if (r.isErrCall())<a name="line.495"></a>
<FONT color="green">496</FONT>                            return false;<a name="line.496"></a>
<FONT color="green">497</FONT>                            <a name="line.497"></a>
<FONT color="green">498</FONT>                    boolean result = false;<a name="line.498"></a>
<FONT color="green">499</FONT>                    result = r.GetAsBoolean(1);<a name="line.499"></a>
<FONT color="green">500</FONT>                    return result;<a name="line.500"></a>
<FONT color="green">501</FONT>            }<a name="line.501"></a>
<FONT color="green">502</FONT>            <a name="line.502"></a>
<FONT color="green">503</FONT>            /**<a name="line.503"></a>
<FONT color="green">504</FONT>             *launch search<a name="line.504"></a>
<FONT color="green">505</FONT>             */<a name="line.505"></a>
<FONT color="green">506</FONT>            public void Submit() {<a name="line.506"></a>
<FONT color="green">507</FONT>            <a name="line.507"></a>
<FONT color="green">508</FONT>                    Request request = null;<a name="line.508"></a>
<FONT color="green">509</FONT>                    try {<a name="line.509"></a>
<FONT color="green">510</FONT>                            request = new XCallRequest(1,9);<a name="line.510"></a>
<FONT color="green">511</FONT>                    } catch (IOException e) {<a name="line.511"></a>
<FONT color="green">512</FONT>                            e.printStackTrace();<a name="line.512"></a>
<FONT color="green">513</FONT>                            if (skype.errorListener != null)<a name="line.513"></a>
<FONT color="green">514</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.514"></a>
<FONT color="green">515</FONT>                    }<a name="line.515"></a>
<FONT color="green">516</FONT>                    request.addParm('O',0,mObjectId);<a name="line.516"></a>
<FONT color="green">517</FONT>                    <a name="line.517"></a>
<FONT color="green">518</FONT>                    skype.XCall((XCallRequest)request);<a name="line.518"></a>
<FONT color="green">519</FONT>            }<a name="line.519"></a>
<FONT color="green">520</FONT>            <a name="line.520"></a>
<FONT color="green">521</FONT>            /**<a name="line.521"></a>
<FONT color="green">522</FONT>             *extend if search is EXTENDABLE<a name="line.522"></a>
<FONT color="green">523</FONT>             */<a name="line.523"></a>
<FONT color="green">524</FONT>            public void Extend() {<a name="line.524"></a>
<FONT color="green">525</FONT>            <a name="line.525"></a>
<FONT color="green">526</FONT>                    Request request = null;<a name="line.526"></a>
<FONT color="green">527</FONT>                    try {<a name="line.527"></a>
<FONT color="green">528</FONT>                            request = new XCallRequest(1,10);<a name="line.528"></a>
<FONT color="green">529</FONT>                    } catch (IOException e) {<a name="line.529"></a>
<FONT color="green">530</FONT>                            e.printStackTrace();<a name="line.530"></a>
<FONT color="green">531</FONT>                            if (skype.errorListener != null)<a name="line.531"></a>
<FONT color="green">532</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.532"></a>
<FONT color="green">533</FONT>                    }<a name="line.533"></a>
<FONT color="green">534</FONT>                    request.addParm('O',0,mObjectId);<a name="line.534"></a>
<FONT color="green">535</FONT>                    <a name="line.535"></a>
<FONT color="green">536</FONT>                    skype.XCall((XCallRequest)request);<a name="line.536"></a>
<FONT color="green">537</FONT>            }<a name="line.537"></a>
<FONT color="green">538</FONT>            <a name="line.538"></a>
<FONT color="green">539</FONT>            /**<a name="line.539"></a>
<FONT color="green">540</FONT>             *releases results that are not referenced from elsewhere<a name="line.540"></a>
<FONT color="green">541</FONT>             */<a name="line.541"></a>
<FONT color="green">542</FONT>            public void Release() {<a name="line.542"></a>
<FONT color="green">543</FONT>            <a name="line.543"></a>
<FONT color="green">544</FONT>                    Request request = null;<a name="line.544"></a>
<FONT color="green">545</FONT>                    try {<a name="line.545"></a>
<FONT color="green">546</FONT>                            request = new XCallRequest(1,12);<a name="line.546"></a>
<FONT color="green">547</FONT>                    } catch (IOException e) {<a name="line.547"></a>
<FONT color="green">548</FONT>                            e.printStackTrace();<a name="line.548"></a>
<FONT color="green">549</FONT>                            if (skype.errorListener != null)<a name="line.549"></a>
<FONT color="green">550</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.550"></a>
<FONT color="green">551</FONT>                    }<a name="line.551"></a>
<FONT color="green">552</FONT>                    request.addParm('O',0,mObjectId);<a name="line.552"></a>
<FONT color="green">553</FONT>                    <a name="line.553"></a>
<FONT color="green">554</FONT>                    skype.XCall((XCallRequest)request);<a name="line.554"></a>
<FONT color="green">555</FONT>            }<a name="line.555"></a>
<FONT color="green">556</FONT>            <a name="line.556"></a>
<FONT color="green">557</FONT>            /**<a name="line.557"></a>
<FONT color="green">558</FONT>             *result list is dynamically updated<a name="line.558"></a>
<FONT color="green">559</FONT>             * @param from<a name="line.559"></a>
<FONT color="green">560</FONT>             * @param count<a name="line.560"></a>
<FONT color="green">561</FONT>             * @return contacts<a name="line.561"></a>
<FONT color="green">562</FONT>             */<a name="line.562"></a>
<FONT color="green">563</FONT>            public Contact [] GetResults( int from, int count) {<a name="line.563"></a>
<FONT color="green">564</FONT>            <a name="line.564"></a>
<FONT color="green">565</FONT>                    Request request = null;<a name="line.565"></a>
<FONT color="green">566</FONT>                    try {<a name="line.566"></a>
<FONT color="green">567</FONT>                            request = new XCallRequest(1,11);<a name="line.567"></a>
<FONT color="green">568</FONT>                    } catch (IOException e) {<a name="line.568"></a>
<FONT color="green">569</FONT>                            e.printStackTrace();<a name="line.569"></a>
<FONT color="green">570</FONT>                            if (skype.errorListener != null)<a name="line.570"></a>
<FONT color="green">571</FONT>                                    skype.errorListener.OnSkypeKitFatalError();<a name="line.571"></a>
<FONT color="green">572</FONT>                    }<a name="line.572"></a>
<FONT color="green">573</FONT>                    request.addParm('O',0,mObjectId);<a name="line.573"></a>
<FONT color="green">574</FONT>                    request.addParm('u',1,from);<a name="line.574"></a>
<FONT color="green">575</FONT>                    request.addParm('u',2,count);<a name="line.575"></a>
<FONT color="green">576</FONT>                    <a name="line.576"></a>
<FONT color="green">577</FONT>                    Response r = skype.XCall((XCallRequest)request);<a name="line.577"></a>
<FONT color="green">578</FONT>                    <a name="line.578"></a>
<FONT color="green">579</FONT>                    if (r.isErrCall())<a name="line.579"></a>
<FONT color="green">580</FONT>                            return null;<a name="line.580"></a>
<FONT color="green">581</FONT>                            <a name="line.581"></a>
<FONT color="green">582</FONT>                    Vector&lt;Contact&gt; contacts = new Vector&lt;Contact&gt;();<a name="line.582"></a>
<FONT color="green">583</FONT>                    while (r.HasMore(1))<a name="line.583"></a>
<FONT color="green">584</FONT>                    {<a name="line.584"></a>
<FONT color="green">585</FONT>                            int oid = 0;<a name="line.585"></a>
<FONT color="green">586</FONT>                            Contact contact = null;<a name="line.586"></a>
<FONT color="green">587</FONT>                            oid = r.GetOid(1);<a name="line.587"></a>
<FONT color="green">588</FONT>                            if (oid != AbstractDecoder.NULL_VALUE) { <a name="line.588"></a>
<FONT color="green">589</FONT>                                    contact = (Contact)skype.factory(Contact.moduleID(), oid, skype);<a name="line.589"></a>
<FONT color="green">590</FONT>                            }<a name="line.590"></a>
<FONT color="green">591</FONT>                            contacts.add(contact);<a name="line.591"></a>
<FONT color="green">592</FONT>                    }<a name="line.592"></a>
<FONT color="green">593</FONT>                    return contacts.toArray(new Contact[contacts.size()]);<a name="line.593"></a>
<FONT color="green">594</FONT>                    <a name="line.594"></a>
<FONT color="green">595</FONT>            }<a name="line.595"></a>
<FONT color="green">596</FONT>            <a name="line.596"></a>
<FONT color="green">597</FONT>    <a name="line.597"></a>
<FONT color="green">598</FONT>    }<a name="line.598"></a>




























































</PRE>
</BODY>
</HTML>
