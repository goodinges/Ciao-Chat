<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SkypeKit C++ Wrapper Reference: SkypeKit Class Events</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="islander3.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>SkypeKit Class Events </h1>  </div>
</div>
<div class="contents">
<p>Events are represented as virtual methods of the SkypeKit classes. To get events, you will need to derive a child class and override corresponding OnXXX event callbacks.</p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> MySkype::OnConversationListChange (
  <span class="keyword">const</span> <a class="code" href="class_conversation_ref.html" title="Reference to an Conversation class instance, equivalent to Conversation::Ref.">ConversationRef</a> &amp; conversation,
  <span class="keyword">const</span> <a class="code" href="class_conversation.html#a0eb196dd7006e1e37ba1c246c30d6183">Conversation::LIST_TYPE</a> &amp; type,
  <span class="keyword">const</span> <span class="keywordtype">bool</span> &amp; added)
{
    <span class="keywordflow">if</span> ((added) &amp;&amp; (type == <a class="code" href="class_conversation.html#a0eb196dd7006e1e37ba1c246c30d6183a63e387bb13cbc46e0724cbc568ed01aa">Conversation::ALL_CONVERSATIONS</a>))
    {
        <span class="comment">// new conversation has been created</span>
    };
};
</pre></div><p>Aside from events, you can monitor value changes of class properties. For this you need to override the OnChange(int prop) method. Note that the callback is per-class, not per-property, i.e. all property updates will land in this single callback.</p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> MyAccount::OnChange(<span class="keywordtype">int</span> prop)
{
    <span class="keywordflow">if</span> (prop == <a class="code" href="class_account.html#a0e7af48c2ba1d22690d83f5adbc071c5a61a8b512c81fd58cbcd6ea8f9e8d54af">Account::P_STATUS</a>)
    {
        <a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a> loginStatus;
        this-&gt;GetPropStatus(loginStatus);
        <span class="keywordflow">if</span> (loginStatus == <a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90dac2c5c7998621e577285e6c4517a897bd">Account::LOGGED_IN</a>)
        {
            <span class="comment">// Success!</span>
        };
    };
};
</pre></div><p>It is important to know that not everything that happens in the SkypeKit runtime gets propagated to the wrapper, as events. To minimize IPC traffic between runtime and wrapper, individual objects need to be "subscribed" to events (and property updates). To subscribe an object, you will need to either call a method of that particular object instance or access one of its properties. After that, you should start receiving events to that object.</p>
<p>Alternatively you can call SEObject::fetch() method, to make sure the object is subscribed.</p>
<p>For lists of objects, you can use the global fetch(SEObject::Refs) function to subscribe an entire list of references.</p>
<div class="fragment"><pre class="fragment"><a class="code" href="class_conversation_refs.html" title="list of references to Conversation class instances, equivalent to Conversation::Refs">Conversation::Refs</a> inbox;
skype-&gt;GetConversationList(inbox, <a class="code" href="class_conversation.html#a0eb196dd7006e1e37ba1c246c30d6183ae7c8d74ae98eacac61f4897b21096a68">Conversation::INBOX_CONVERSATIONS</a>);
fetch(inbox);
</pre></div><p><b>NB!</b> Because of wrapper memory management, you will need to keep alive at least one xxxRef reference, to every object that you wish to keep getting events for. Otherwise, garbage collection is likely to remove that object from the object cache and no more events will fire for that object.</p>
<p><br/>
 </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


<hr/>	
		<p><b>(c) Skype Technologies S.A. Confidential/Proprietary</b></p>		
		<p>Last updated: Fri Oct 7 2011</p>		
		</BODY>
</HTML>
