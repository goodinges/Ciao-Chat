<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SkypeKit C++ Wrapper Reference: SkypeKit Class Properties</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="islander3.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>SkypeKit Class Properties </h1>  </div>
</div>
<div class="contents">
<p>Each SkypeKit class has a special enumerator, named PROPERTY, that contains the list of property IDs for that class. All the PROPERTY items are prefixed with "P_".</p>
<p>While most SkypeKit class properties are read-only, read-write properties have a special class method for setting their value. For example, <a class="el" href="class_conversation.html#a1fccc07009257810420d23e2174cad77a1abdbcaf2ca0edc3487c74649e1eda6d">Conversation::P_META_TOPIC</a> property can be set with <a class="el" href="class_conversation.html#a4fde35c62508f53b83ba738848222f76">Conversation::SetTopic</a> method.</p>
<p>However, there is an exception to this - <a class="el" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a> class. Many <a class="el" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a> class properties are read-write and have two sets of type-specific setter methods. One set operates on server side properties that are synced to cloud immediately and the other set operates on account profile properties that are synced to cloud periodically using the CBL synchronization mechanism.</p>
<p>Class properties are cached in the wrapper. Once you have accessed an object property or it has received an update message from the runtime - no additional IPC traffic is generated and the property access should be rather fast. Once cached, that property will be kept up-to-date automatically.</p>
<p>Read access to class properties is provided in three different ways.</p>
<p><br/>
 </p>
<h2><a class="anchor" id="UsingGetProp"></a>
GetProp - get property as a string</h2>
<p>The most generic way to get a SkypeKit class property is GetProp method. It takes property ID as an argument and returns a <a class="el" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a>. If the actual property type is something else, for example int - the value is converted to <a class="el" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a> before passing it on to you.</p>
<div class="fragment"><pre class="fragment"><a class="code" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a> DisplayName;
DisplayName = SomeConversation-&gt;GetProp(<a class="code" href="class_conversation.html#a1fccc07009257810420d23e2174cad77a04c2a4717a2506f4f70feda5d62dfe8c">Conversation::P_DISPLAYNAME</a>);
</pre></div><p><b>NB!</b> In case of enum values, GetProp will not convert these into human readable names. Instead, the numeric enum value is returned as a string (1 -&gt; "1").</p>
<p><br/>
 </p>
<h2><a class="anchor" id="UsingTypedGetProp"></a>
GetPropPropName - strongly typed accessor</h2>
<p>Each class property also has a corresponding strongly typed accessor method. Those methods are prefixed with GetProp followed by the property name. </p>
<div class="fragment"><pre class="fragment"><a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a> LoginStatus;
GetPropStatus(LoginStatus);
</pre></div><p><br/>
 </p>
<h2><a class="anchor" id="UsingGetProps"></a>
GetProps - get multiple properties all at once</h2>
<p>If you need to access multiple properties, you can get those with GetProps method where you can pass in a list of property IDs and get back a dictionary with property IDs and their values (as SEStrings). While this is more code on your side, the advantage here is that the entire request/response goes through IPC more effectively, resulting in improved performance.</p>
<div class="fragment"><pre class="fragment"><a class="code" href="class_s_e_int_list.html" title="SEIntList represents a list of integers.">SEIntList</a> Props;
<a class="code" href="class_s_e_int_dict.html" title="SEIntDict is a dictionary class of integers associated to strings.">SEIntDict</a> Values;
Props.<a class="code" href="class_s_e_int_list.html#a3a1bc3c8f8112135fc13dd91464a1386">append</a>(<a class="code" href="class_conversation.html#a1fccc07009257810420d23e2174cad77a67d4382b1b471b00b967b2d5b863b816">Conversation::P_TYPE</a>);
Props.<a class="code" href="class_s_e_int_list.html#a3a1bc3c8f8112135fc13dd91464a1386">append</a>(<a class="code" href="class_conversation.html#a1fccc07009257810420d23e2174cad77a04c2a4717a2506f4f70feda5d62dfe8c">Conversation::P_DISPLAYNAME</a>);

<a class="code" href="class_conversation_refs.html" title="list of references to Conversation class instances, equivalent to Conversation::Refs">ConversationRefs</a> Inbox = <a class="code" href="class_conversation_refs.html" title="list of references to Conversation class instances, equivalent to Conversation::Refs">ConversationRefs</a>();
skype-&gt;GetConversationList(Inbox, <a class="code" href="class_conversation.html#a0eb196dd7006e1e37ba1c246c30d6183ae7c8d74ae98eacac61f4897b21096a68">Conversation::INBOX_CONVERSATIONS</a>);
<span class="keywordtype">int</span> InboxSize = Inbox.size();

<a class="code" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a>    Type        = <span class="stringliteral">&quot;&quot;</span>;
<a class="code" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a>    DisplayName = <span class="stringliteral">&quot;&quot;</span>;

printf(<span class="stringliteral">&quot;Conversations in Inbox : %d\n&quot;</span>, InboxSize);

<span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; InboxSize; i++)
{
    C = (<a class="code" href="class_conversation_ref.html" title="Reference to an Conversation class instance, equivalent to Conversation::Ref.">ConversationRef</a>)Inbox[i];
    Values      = C-&gt;GetProps(Props);
    Type        = Values.<a class="code" href="class_s_e_int_dict.html#aa5a4670142620a6ef3b5ff618ce8c57d">find</a>(<a class="code" href="class_conversation.html#a1fccc07009257810420d23e2174cad77a67d4382b1b471b00b967b2d5b863b816">Conversation::P_TYPE</a>);
    DisplayName = Values.<a class="code" href="class_s_e_int_dict.html#aa5a4670142620a6ef3b5ff618ce8c57d">find</a>(<a class="code" href="class_conversation.html#a1fccc07009257810420d23e2174cad77a04c2a4717a2506f4f70feda5d62dfe8c">Conversation::P_DISPLAYNAME</a>);
    printf(<span class="stringliteral">&quot;Type: %s  Name: %s \n&quot;</span>, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)Type, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)DisplayName);
};
</pre></div><p><br/>
 </p>
<h2><a class="anchor" id="UsingDebugStrings"></a>
Properties and debug output</h2>
<p>While developing and testing, you will often come accross situations where you want to log SkypeKit object properties in your debug output. The problem there is that most of those properties are typed as enumerated values. For example, if <a class="el" href="class_account.html#a0e7af48c2ba1d22690d83f5adbc071c5a61a8b512c81fd58cbcd6ea8f9e8d54af">Account::P_STATUS</a> becomes 1, your log would look prettier if that 1 is represented as "LOGGED_OUT".</p>
<p>So, what you will want to do is to convert those values to human readable strings. The GetProp method that returns a string is of no help - it only converts the value to a string (i.e. 1 will come out as "1"), it does not return you the appropriate enum item name, based on its type.</p>
<p>Luckily, there is not one but two ways of converting enumerator items into strings.</p>
<p>First the <b>tostring</b> function. It takes one argument - any SkypeKit enumerator value will do, and return a string, consisting of the class name, property name and property value label. The following way of logging <a class="el" href="class_account.html#a0e7af48c2ba1d22690d83f5adbc071c5a61a8b512c81fd58cbcd6ea8f9e8d54af">Account::P_STATUS</a> property:</p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> MyAccount::OnChange(<span class="keywordtype">int</span> prop)
{
  <span class="keywordflow">if</span> (prop == <a class="code" href="class_account.html#a0e7af48c2ba1d22690d83f5adbc071c5a61a8b512c81fd58cbcd6ea8f9e8d54af">Account::P_STATUS</a>)
  {
    <a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a> loginStatus;
    this-&gt;GetPropStatus(loginStatus);
    printf(<span class="stringliteral">&quot;%s\n&quot;</span>, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)tostring(loginStatus));
  };
};
</pre></div><p>..would (in case of successful login) produce this output:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a>.CONNECTING_TO_P2P
<a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a>.CONNECTING_TO_SERVER
<a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a>.LOGGING_IN
<a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a>.INITIALIZING
<a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a>.LOGGED_IN
</pre></div><p>Another way to do this is via <b>SEObject::getPropDebug</b> method. This method takes two arguments: property ID and property value as string and returns an <a class="el" href="class_s_e_string_list.html" title="SEStringList represents a list of strings (SEString objects).">SEStringList</a> with three items: class name, property name and property value.</p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> MyAccount::OnChange(<span class="keywordtype">int</span> prop)
{
  <span class="keywordflow">if</span> (prop == <a class="code" href="class_account.html#a0e7af48c2ba1d22690d83f5adbc071c5a61a8b512c81fd58cbcd6ea8f9e8d54af">Account::P_STATUS</a>)
  {
    <a class="code" href="class_s_e_string_list.html" title="SEStringList represents a list of strings (SEString objects).">SEStringList</a> dbg;
    <a class="code" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a> propStr = this-&gt;GetProp(prop);
    dbg = this-&gt;getPropDebug(prop, propStr);
    printf(<span class="stringliteral">&quot;%s object %s property is now %s \n&quot;</span>, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)dbg[0], (<span class="keyword">const</span> <span class="keywordtype">char</span>*)dbg[1], (<span class="keyword">const</span> <span class="keywordtype">char</span>*)dbg[2]);
  };
};
</pre></div><p>Would produce following output:</p>
<div class="fragment"><pre class="fragment">ACCOUNT <span class="keywordtype">object</span> STATUS <span class="keyword">property</span> is now CONNECTING_TO_P2P
ACCOUNT <span class="keywordtype">object</span> STATUS <span class="keyword">property</span> is now CONNECTING_TO_SERVER
ACCOUNT <span class="keywordtype">object</span> STATUS <span class="keyword">property</span> is now LOGGING_IN
ACCOUNT <span class="keywordtype">object</span> STATUS <span class="keyword">property</span> is now INITIALIZING
ACCOUNT <span class="keywordtype">object</span> STATUS <span class="keyword">property</span> is now LOGGED_IN
</pre></div><p>The advantage here is that you don't need to know what particular property you are dealing with. For tostring to work, you need to declare a typed local variable (like in these examples: <a class="el" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a> loginStatus) and fetch the value, to pass it to the tostring function. Because of that, in your OnChange callback method, you would need to have the debug output code separately for each property. The getPropDebug method is proprty-agnostic. You can have the above sample outside the if (prop == <a class="el" href="class_account.html#a0e7af48c2ba1d22690d83f5adbc071c5a61a8b512c81fd58cbcd6ea8f9e8d54af">Account::P_STATUS</a>) statement, in which case it would produce output for all <a class="el" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a> property changes.</p>
<p><br/>
 </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


<hr/>	
		<p><b>(c) Skype Technologies S.A. Confidential/Proprietary</b></p>		
		<p>Last updated: Fri Oct 7 2011</p>		
		</BODY>
</HTML>
