<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SkypeKit C++ Wrapper Reference: Overview of SkypeKit Classes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="islander3.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Overview of SkypeKit Classes </h1>  </div>
</div>
<div class="contents">
<p>All the wrapper classes roughly fall into 5 categories: </p>
<ul>
<li><a class="el" href="class_skype.html" title="The main class that exposes Skype-related functionality to your application. Currently the SDK only s...">Skype</a> class </li>
<li>Helper classes </li>
<li>SkypeKit classes </li>
<li>List classes </li>
<li>Reference classes</li>
</ul>
<p><br/>
 </p>
<h2><a class="anchor" id="HelperClasses"></a>
Helper Classes</h2>
<p>Helper classes are basically type primitives. Having our own primitives minimizes external dependencies and makes the SDK as platform-independent as possible. All helper class names start with the prefix SE - <a class="el" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a>, <a class="el" href="class_s_e_string_list.html" title="SEStringList represents a list of strings (SEString objects).">SEStringList</a>, <a class="el" href="class_s_e_int_list.html" title="SEIntList represents a list of integers.">SEIntList</a> etc. These classes should be self-explanatory. For example, <a class="el" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a> can be used in normal string operations by typecasting it like this: </p>
<div class="fragment"><pre class="fragment"><a class="code" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a> SomeString;
printf(<span class="stringliteral">&quot;%s&quot;</span>, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)SomeString);
</pre></div><p><br/>
 </p>
<h2><a class="anchor" id="SkypeClass"></a>
Skype Class</h2>
<p>This is the wrapper's main class. It provides access to Contacts, Conversations, audio-video related methods and more or less everything else. Initialisation and cleanup sequences of <a class="el" href="class_skype.html" title="The main class that exposes Skype-related functionality to your application. Currently the SDK only s...">Skype</a> class should look like this:</p>
<div class="fragment"><pre class="fragment"><span class="comment">// Initialisation</span>
skype-&gt;init(keyBuf, inetAddr, portNum, <span class="stringliteral">&quot;streamlog.txt&quot;</span>);
skype-&gt;start();
...
<span class="comment">// Finalisation</span>
skype-&gt;stop();
<span class="keyword">delete</span> skype;
</pre></div><p>The first argument of Skype::init - the keyBuf - a null-terminated character array containing a valid SkypeKit key pair, which you can get from developer.skype.com website. The inetAddr is normally 127.0.0.1 (localhost) and default port for communication with the runtime is 8963.</p>
<p><br/>
 </p>
<h2><a class="anchor" id="SkypeKitClasses"></a>
SkypeKit Classes</h2>
<p>SkypeKit classes represent objects in SkypeKit Runtime, such as <a class="el" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a>, <a class="el" href="class_conversation.html" title="The Conversation class encapsulates all types of communication possible with Skype client...">Conversation</a>, <a class="el" href="class_message.html" title="Events in a conversation context are expressed as Messages. It is therefore useful to think of Messag...">Message</a> etc.</p>
<p>All the SkypeKit class instances are reflections of corresponding objects in the SkypeKit Runtime. They are descended from the SEObject class, which implements basic property accessors, cache access and anything else that is common to all the SkypeKit objects. When the SkypeKit Runtime spawns an instance of some class, that instance may or may not be communicated to the wrapper. (Not all objects are sent over immediately, to conserve IPC bandwidth.) Thus, you do not normally construct SkypeKit objects (such as <a class="el" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a>, <a class="el" href="class_conversation.html" title="The Conversation class encapsulates all types of communication possible with Skype client...">Conversation</a>, or even <a class="el" href="class_message.html" title="Events in a conversation context are expressed as Messages. It is therefore useful to think of Messag...">Message</a> objects). All of those are constructed by the wrapper, as the corresponding objects are created in the SkypeKit Runtime. There is only one exception: your <a class="el" href="class_skype.html" title="The main class that exposes Skype-related functionality to your application. Currently the SDK only s...">Skype</a> object. All other SkypeKit class instances will be given to you, pre-constructed, as return arguments of some SkypeKit wrapper method or in event callbacks.</p>
<p><b>NB!</b> The object references can be returned as nulls if the method that was supposed to produce them failed to execute or if the object in question was deemed to be unnecessary by SkypeKit Runtime. You should never assume that an object you get back from a method call actually exists.</p>
<p>These objects are returned to you inside a class-specific reference container class (example: <a class="el" href="class_message_ref.html" title="Reference to an Message class instance, equivalent to Message::Ref.">MessageRef</a> for <a class="el" href="class_message.html" title="Events in a conversation context are expressed as Messages. It is therefore useful to think of Messag...">Message</a>). These reference containers can be thought of and used as pointers. For more information about reference classes, see below.</p>
<p>The SkypeKit classes are provided as parents to your own classes, even if just to implement the OnChange event callback, to get access to property change events. In anything more complicated than a quick test client, you should rarely use SkypeKit classes directly.</p>
<p>The <a class="el" href="class_skype.html" title="The main class that exposes Skype-related functionality to your application. Currently the SDK only s...">Skype</a> class owns the instantiation of the classes. To introduce your own behaviour into those classes you will need to inherit from them and override existing methods. In addition to declaring a new child class, you will also need to override its corresponding Skype::new&lt;Classname&gt; method, since objects are generated as responses to what happens in SkypeKit Runtime. You do not actually get to call constructors for your own classes. Those constructors are called by the wrapper, in response to events, runtime method calls and property update messages. For the wrapper to know what constructors to call, those (child) classes need to be registered. You register your own class with the wrapper when you override the new&lt;Classname&gt; methods by for example, telling <a class="el" href="class_skype.html#a826967e2997ffd7dc6800ab785a075b7">Skype::newMessage</a> to return as a MyMessage instance instead.</p>
<p>As the instances are only accessible through references to offload from memory management, you may need to downcast the Skypekit references to references to you own classes to access your own functions. Do this by using the pattern typedef DRef&lt;YourDerivedClass, SkypeKitClass&gt; Ref; inside your derived class definition.</p>
<p>Example: to detect whether your account login command actually worked, you would need to catch the <a class="el" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a> class OnChange event and insert your code into it. For this you will need to derive your own child class from <a class="el" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a> and override the Account::OnChange virtual method.</p>
<div class="fragment"><pre class="fragment"><span class="keyword">class </span>MyAccount : <span class="keyword">public</span> <a class="code" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a>
{
<span class="keyword">public</span>:
   <span class="keyword">typedef</span> DRef&lt;MyAccount, Account&gt; Ref;
   MyAccount(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oid, SERootObject* root);
   ~MyAccount() {};
   <span class="keywordtype">void</span> OnChange(<span class="keywordtype">int</span> prop);
};
</pre></div><p>The typedef in that declaration will make your MyAccount work with reference containers. Implementation part of the OnChange callback would look like this:</p>
<div class="fragment"><pre class="fragment"><span class="keywordtype">void</span> MyAccount::OnChange(<span class="keywordtype">int</span> prop)
{
    <span class="keywordflow">if</span> (prop == <a class="code" href="class_account.html#a0e7af48c2ba1d22690d83f5adbc071c5a61a8b512c81fd58cbcd6ea8f9e8d54af">Account::P_STATUS</a>)
    {
       <a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90d">Account::STATUS</a> LoginStatus;
       GetPropStatus(LoginStatus);
       <span class="keywordflow">if</span> (LoginStatus == <a class="code" href="class_account.html#ac2cd2fd3f85a302363a51db3ba97c90dac2c5c7998621e577285e6c4517a897bd">Account::LOGGED_IN</a>) 
        { 
            &gt; insert your code here &lt; 
        };
    };
};
</pre></div><p>The int argument in OnChange callback will give you the ID of the property that changed. Note that there are no individual callbacks for class property change events. Each class only has one OnChange event, in which you will need to have a switch, depending on the value of the prop argument. GetPropStatus will give you the current value of the property.</p>
<p>Now, to register your MyAccount class with <a class="el" href="class_skype.html" title="The main class that exposes Skype-related functionality to your application. Currently the SDK only s...">Skype</a>, you will also need to derive your own child class from <a class="el" href="class_skype.html" title="The main class that exposes Skype-related functionality to your application. Currently the SDK only s...">Skype</a>, with newAccount method now returning MyAccount rather than <a class="el" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a> instance.</p>
<div class="fragment"><pre class="fragment"><span class="keyword">class </span>MySkype : <span class="keyword">public</span> <a class="code" href="class_skype.html" title="The main class that exposes Skype-related functionality to your application. Currently the SDK only s...">Skype</a>
{
<span class="keyword">public</span>:
   MySkype() : <a class="code" href="class_skype.html" title="The main class that exposes Skype-related functionality to your application. Currently the SDK only s...">Skype</a>() {}
   ~MySkype() {}
   <a class="code" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a>* newAccount(<span class="keywordtype">int</span> oid) {<span class="keywordflow">return</span> <span class="keyword">new</span> MyAccount(oid, <span class="keyword">this</span>);}
};
</pre></div><p>Note on object lifecycle: as you are not constructing the objects, you are also not responsible of destructing them. Memory management of wrapper objects and properties is handled by the wrapper. The only object you should explicitly delete is your <a class="el" href="class_skype.html" title="The main class that exposes Skype-related functionality to your application. Currently the SDK only s...">Skype</a> object.</p>
<p><br/>
 </p>
<h2><a class="anchor" id="ListClasses"></a>
List Classes</h2>
<p>List classes - collect either SkypeKit objects or helper primitives. SE* list classes do not need to be explicitly constructed before passing them into SkypeKit methods. The item count in these lists can be accessed via .size() function. A basic loop across a list looks like this:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="class_s_e_string_list.html" title="SEStringList represents a list of strings (SEString objects).">SEStringList</a> ExistingAccounts;
skype-&gt;GetExistingAccounts(ExistingAccounts);
<span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ExistingAccounts.<a class="code" href="class_s_e_string_list.html#a0f86fa4676e6bea28f9923955a503360">size</a>(); i++)
{
    printf(<span class="stringliteral">&quot;%d. %s\n&quot;</span>, i, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)ExistingAccounts[i]);
};
</pre></div><p><br/>
 </p>
<h2><a class="anchor" id="ReferenceClasses"></a>
Reference Classes</h2>
<p>Each SkypeKit class and list class whose items are SkypeKit class instances, have corresponding reference classes. <a class="el" href="class_contact.html" title="Address book entry. Encapsulates methods like GetType, GetIdentity, GetAvatar, SendAuthRequest, OpenConversation etc. Single contact can have additional phone numbers attached to it (ASSIGNED_PHONE1 .. ASSIGNED_PHONE3). Note that in the context of a conversation, Contacts are represented by Participant objects.">Contact</a> class, for example, has a corresponding reference class named <a class="el" href="class_contact_ref.html" title="Reference to an Contact class instance, equivalent to Contact::Ref.">ContactRef</a>. There is also another class - <a class="el" href="class_contact_refs.html" title="list of references to Contact class instances, equivalent to Contact::Refs">ContactRefs</a> that is basically a list of <a class="el" href="class_contact_ref.html" title="Reference to an Contact class instance, equivalent to Contact::Ref.">ContactRef</a> items. All the *Ref classes can be treated as pointers to objects of corresponding SkypeKit class.</p>
<p>Reference classes enable us to keep track of objects in the wrapper via reference counting and remove unreferenced objects from the wrapper's object cache.</p>
<p>So, all the wrapper objects are returned to your UI code in reference containers. For example, <a class="el" href="class_skype.html#ae0bdf1ed6341fc4702b0cf94d801e345">Skype::GetAccount</a> method does not return an <a class="el" href="class_account.html" title="Represents a local account. Encapsulates methods for Skype account creation, login and logout as well...">Account</a> object. Instead, it returns an <a class="el" href="class_account_ref.html" title="Reference to an Account class instance, equivalent to Account::Ref.">AccountRef</a>. So, you will have to write your code like this:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="class_s_e_string.html" title="SEString is basic char* based string class.">SEString</a> SomeAccountName = <span class="stringliteral">&quot;somename&quot;</span>;
MyAccount::Ref SomeAccount;
skype::GetAccount (SomeAccountName, SomeAccount);
SomeAccount-&gt;LoginWithPassword(SomePassword, <span class="keyword">false</span>, <span class="keyword">true</span>);
</pre></div><p><br/>
 </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


<hr/>	
		<p><b>(c) Skype Technologies S.A. Confidential/Proprietary</b></p>		
		<p>Last updated: Fri Oct 7 2011</p>		
		</BODY>
</HTML>
